!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=a()}(function(){return function e(d,g,m){function b(h,l){if(!g[h]){if(!d[h]){var p="function"==typeof require&&require;if(!l&&p)return p(h,!0);if(c)return c(h,!0);l=Error("Cannot find module '"+h+"'");throw l.code="MODULE_NOT_FOUND",l;}l=g[h]={exports:{}};
d[h][0].call(l.exports,function(k){return b(d[h][1][k]||k)},l,l.exports,e,d,g,m)}return g[h].exports}for(var c="function"==typeof require&&require,f=0;f<m.length;f++)b(m[f]);return b}({1:[function(d,g,m){function e(z){if(!(this instanceof e))return new e(z);z=this.options=f.assign({level:u,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},z||{});z.raw&&0<z.windowBits?z.windowBits=-z.windowBits:z.gzip&&0<z.windowBits&&16>z.windowBits&&(z.windowBits+=16);this.err=0;this.msg="";this.ended=
!1;this.chunks=[];this.strm=new p;this.strm.avail_out=0;var y=c.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(y!==t)throw Error(l[y]);if(z.header&&c.deflateSetHeader(this.strm,z.header),z.dictionary){var D;if(D="string"==typeof z.dictionary?h.string2buf(z.dictionary):"[object ArrayBuffer]"===k.call(z.dictionary)?new Uint8Array(z.dictionary):z.dictionary,(y=c.deflateSetDictionary(this.strm,D))!==t)throw Error(l[y]);this._dict_set=!0}}function b(z,y){y=new e(y);if(y.push(z,
!0),y.err)throw y.msg||l[y.err];return y.result}var c=d("./zlib/deflate"),f=d("./utils/common"),h=d("./utils/strings"),l=d("./zlib/messages"),p=d("./zlib/zstream"),k=Object.prototype.toString,t=0,u=-1,v=0,w=8;e.prototype.push=function(z,y){var D,G=this.strm,K=this.options.chunkSize;if(this.ended)return!1;y=y===~~y?y:!0===y?4:0;"string"==typeof z?G.input=h.string2buf(z):"[object ArrayBuffer]"===k.call(z)?G.input=new Uint8Array(z):G.input=z;G.next_in=0;G.avail_in=G.input.length;do{if(0===G.avail_out&&
(G.output=new f.Buf8(K),G.next_out=0,G.avail_out=K),1!==(D=c.deflate(G,y))&&D!==t)return this.onEnd(D),this.ended=!0,!1;0!==G.avail_out&&(0!==G.avail_in||4!==y&&2!==y)||("string"===this.options.to?this.onData(h.buf2binstring(f.shrinkBuf(G.output,G.next_out))):this.onData(f.shrinkBuf(G.output,G.next_out)))}while((0<G.avail_in||0===G.avail_out)&&1!==D);return 4===y?(D=c.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===t):2!==y||(this.onEnd(t),G.avail_out=0,!0)};e.prototype.onData=function(z){this.chunks.push(z)};
e.prototype.onEnd=function(z){z===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks));this.chunks=[];this.err=z;this.msg=this.strm.msg};m.Deflate=e;m.deflate=b;m.deflateRaw=function(z,y){return y=y||{},y.raw=!0,b(z,y)};m.gzip=function(z,y){return y=y||{},y.gzip=!0,b(z,y)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(d,g,m){function e(v){if(!(this instanceof e))return new e(v);
var w=this.options=f.assign({chunkSize:16384,windowBits:0,to:""},v||{});w.raw&&0<=w.windowBits&&16>w.windowBits&&(w.windowBits=-w.windowBits,0===w.windowBits&&(w.windowBits=-15));!(0<=w.windowBits&&16>w.windowBits)||v&&v.windowBits||(w.windowBits+=32);15<w.windowBits&&48>w.windowBits&&0==(15&w.windowBits)&&(w.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new k;this.strm.avail_out=0;v=c.inflateInit2(this.strm,w.windowBits);if(v!==l.Z_OK)throw Error(p[v]);this.header=
new t;c.inflateGetHeader(this.strm,this.header)}function b(v,w){w=new e(w);if(w.push(v,!0),w.err)throw w.msg||p[w.err];return w.result}var c=d("./zlib/inflate"),f=d("./utils/common"),h=d("./utils/strings"),l=d("./zlib/constants"),p=d("./zlib/messages"),k=d("./zlib/zstream"),t=d("./zlib/gzheader"),u=Object.prototype.toString;e.prototype.push=function(v,w){var z,y,D,G,K,C=this.strm,R=this.options.chunkSize,E=this.options.dictionary,x=!1;if(this.ended)return!1;w=w===~~w?w:!0===w?l.Z_FINISH:l.Z_NO_FLUSH;
"string"==typeof v?C.input=h.binstring2buf(v):"[object ArrayBuffer]"===u.call(v)?C.input=new Uint8Array(v):C.input=v;C.next_in=0;C.avail_in=C.input.length;do{if(0===C.avail_out&&(C.output=new f.Buf8(R),C.next_out=0,C.avail_out=R),(z=c.inflate(C,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&E&&(K="string"==typeof E?h.string2buf(E):"[object ArrayBuffer]"===u.call(E)?new Uint8Array(E):E,z=c.inflateSetDictionary(this.strm,K)),z===l.Z_BUF_ERROR&&!0===x&&(z=l.Z_OK,x=!1),z!==l.Z_STREAM_END&&z!==l.Z_OK)return this.onEnd(z),
this.ended=!0,!1;C.next_out&&(0!==C.avail_out&&z!==l.Z_STREAM_END&&(0!==C.avail_in||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(y=h.utf8border(C.output,C.next_out),D=C.next_out-y,G=h.buf2string(C.output,y),C.next_out=D,C.avail_out=R-D,D&&f.arraySet(C.output,C.output,y,D,0),this.onData(G)):this.onData(f.shrinkBuf(C.output,C.next_out))));0===C.avail_in&&0===C.avail_out&&(x=!0)}while((0<C.avail_in||0===C.avail_out)&&z!==l.Z_STREAM_END);return z===l.Z_STREAM_END&&(w=l.Z_FINISH),
w===l.Z_FINISH?(z=c.inflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),C.avail_out=0,!0)};e.prototype.onData=function(v){this.chunks.push(v)};e.prototype.onEnd=function(v){v===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks));this.chunks=[];this.err=v;this.msg=this.strm.msg};m.Inflate=e;m.inflate=b;m.inflateRaw=function(v,w){return w=w||{},w.raw=!0,b(v,w)};m.ungzip=b},{"./utils/common":3,
"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(d,g,m){d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;m.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if("object"!=typeof h)throw new TypeError(h+"must be non-object");for(var l in h)Object.prototype.hasOwnProperty.call(h,l)&&(c[l]=h[l])}}return c};m.shrinkBuf=
function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var e={arraySet:function(c,f,h,l,p){if(f.subarray&&c.subarray)c.set(f.subarray(h,h+l),p);else for(var k=0;k<l;k++)c[p+k]=f[h+k]},flattenChunks:function(c){var f,h;var l=h=0;for(f=c.length;l<f;l++)h+=c[l].length;var p=new Uint8Array(h);l=h=0;for(f=c.length;l<f;l++){var k=c[l];p.set(k,h);h+=k.length}return p}},b={arraySet:function(c,f,h,l,p){for(var k=0;k<l;k++)c[p+k]=f[h+k]},flattenChunks:function(c){return[].concat.apply([],
c)}};m.setTyped=function(c){c?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,e)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,b))};m.setTyped(d)},{}],4:[function(d,g,m){function e(l,p){if(65537>p&&(l.subarray&&f||!l.subarray&&c))return String.fromCharCode.apply(null,b.shrinkBuf(l,p));for(var k="",t=0;t<p;t++)k+=String.fromCharCode(l[t]);return k}var b=d("./common"),c=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch(l){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){f=
!1}var h=new b.Buf8(256);for(d=0;256>d;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;m.string2buf=function(l){var p,k,t,u,v=l.length,w=0;for(t=0;t<v;t++)55296==(64512&(p=l.charCodeAt(t)))&&t+1<v&&56320==(64512&(k=l.charCodeAt(t+1)))&&(p=65536+(p-55296<<10)+(k-56320),t++),w+=128>p?1:2048>p?2:65536>p?3:4;var z=new b.Buf8(w);for(t=u=0;u<w;t++)55296==(64512&(p=l.charCodeAt(t)))&&t+1<v&&56320==(64512&(k=l.charCodeAt(t+1)))&&(p=65536+(p-55296<<10)+(k-56320),t++),128>p?z[u++]=p:
2048>p?(z[u++]=192|p>>>6,z[u++]=128|63&p):65536>p?(z[u++]=224|p>>>12,z[u++]=128|p>>>6&63,z[u++]=128|63&p):(z[u++]=240|p>>>18,z[u++]=128|p>>>12&63,z[u++]=128|p>>>6&63,z[u++]=128|63&p);return z};m.buf2binstring=function(l){return e(l,l.length)};m.binstring2buf=function(l){for(var p=new b.Buf8(l.length),k=0,t=p.length;k<t;k++)p[k]=l.charCodeAt(k);return p};m.buf2string=function(l,p){var k,t,u,v=p||l.length,w=Array(2*v);for(p=k=0;p<v;)if(128>(t=l[p++]))w[k++]=t;else if(4<(u=h[t]))w[k++]=65533,p+=u-1;
else{for(t&=2===u?31:3===u?15:7;1<u&&p<v;)t=t<<6|63&l[p++],u--;1<u?w[k++]=65533:65536>t?w[k++]=t:(t-=65536,w[k++]=55296|t>>10&1023,w[k++]=56320|1023&t)}return e(w,k)};m.utf8border=function(l,p){var k;(p=p||l.length)>l.length&&(p=l.length);for(k=p-1;0<=k&&128==(192&l[k]);)k--;return 0>k?p:0===k?p:k+h[l[k]]>p?k:p}},{"./common":3}],5:[function(d,g,m){g.exports=function(e,b,c,f){var h=65535&e|0;e=e>>>16&65535|0;for(var l;0!==c;){c-=l=2E3<c?2E3:c;do e=e+(h=h+b[f++]|0)|0;while(--l);h%=65521;e%=65521}return h|
e<<16|0}},{}],6:[function(d,g,m){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(d,g,m){var e=function(){for(var b,c=[],f=0;256>f;f++){b=f;
for(var h=0;8>h;h++)b=1&b?3988292384^b>>>1:b>>>1;c[f]=b}return c}();g.exports=function(b,c,f,h){f=h+f;for(b^=-1;h<f;h++)b=b>>>8^e[255&(b^c[h])];return-1^b}},{}],8:[function(d,g,m){function e(q,L){return q.msg=E[L],L}function b(q){for(var L=q.length;0<=--L;)q[L]=0}function c(q){var L=q.state,N=L.pending;N>q.avail_out&&(N=q.avail_out);0!==N&&(G.arraySet(q.output,L.pending_buf,L.pending_out,N,q.next_out),q.next_out+=N,L.pending_out+=N,q.total_out+=N,q.avail_out-=N,L.pending-=N,0===L.pending&&(L.pending_out=
0))}function f(q,L){K._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,L);q.block_start=q.strstart;c(q.strm)}function h(q,L){q.pending_buf[q.pending++]=L}function l(q,L){q.pending_buf[q.pending++]=L>>>8&255;q.pending_buf[q.pending++]=255&L}function p(q,L){var N,n,A=q.max_chain_length,F=q.strstart,O=q.prev_length,J=q.nice_match,Z=q.strstart>q.w_size-ea?q.strstart-(q.w_size-ea):0,T=q.window,la=q.w_mask,oa=q.prev,ka=q.strstart+aa,sa=T[F+O-1],na=T[F+O];q.prev_length>=q.good_match&&
(A>>=2);J>q.lookahead&&(J=q.lookahead);do if(N=L,T[N+O]===na&&T[N+O-1]===sa&&T[N]===T[F]&&T[++N]===T[F+1]){F+=2;for(N++;T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&T[++F]===T[++N]&&F<ka;);if(n=aa-(ka-F),F=ka-aa,n>O){if(q.match_start=L,O=n,n>=J)break;sa=T[F+O-1];na=T[F+O]}}while((L=oa[L&la])>Z&&0!=--A);return O<=q.lookahead?O:q.lookahead}function k(q){var L,N,n=q.w_size;do{if(N=q.window_size-q.lookahead-q.strstart,q.strstart>=
n+(n-ea)){G.arraySet(q.window,q.window,n,n,0);q.match_start-=n;q.strstart-=n;q.block_start-=n;var A=L=q.hash_size;do{var F=q.head[--A];q.head[A]=F>=n?F-n:0}while(--L);A=L=n;do F=q.prev[--A],q.prev[A]=F>=n?F-n:0;while(--L);N+=n}if(0===q.strm.avail_in)break;A=q.strm;F=q.window;var O=q.strstart+q.lookahead,J=A.avail_in;if(L=(J>N&&(J=N),0===J?0:(A.avail_in-=J,G.arraySet(F,A.input,A.next_in,J,O),1===A.state.wrap?A.adler=C(A.adler,F,J,O):2===A.state.wrap&&(A.adler=R(A.adler,F,J,O)),A.next_in+=J,A.total_in+=
J,J)),q.lookahead+=L,q.lookahead+q.insert>=Y)for(N=q.strstart-q.insert,q.ins_h=q.window[N],q.ins_h=(q.ins_h<<q.hash_shift^q.window[N+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[N+Y-1])&q.hash_mask,q.prev[N&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=N,N++,q.insert--,!(q.lookahead+q.insert<Y)););}while(q.lookahead<ea&&0!==q.strm.avail_in)}function t(q,L){for(var N,n;;){if(q.lookahead<ea){if(k(q),q.lookahead<ea&&L===x)return H;if(0===q.lookahead)break}if(N=0,q.lookahead>=Y&&(q.ins_h=
(q.ins_h<<q.hash_shift^q.window[q.strstart+Y-1])&q.hash_mask,N=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),0!==N&&q.strstart-N<=q.w_size-ea&&(q.match_length=p(q,N)),q.match_length>=Y)if(n=K._tr_tally(q,q.strstart-q.match_start,q.match_length-Y),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=Y){q.match_length--;do q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+Y-1])&q.hash_mask,N=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=
q.strstart;while(0!=--q.match_length);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else n=K._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(n&&(f(q,!1),0===q.strm.avail_out))return H}return q.insert=q.strstart<Y-1?q.strstart:Y-1,L===I?(f(q,!0),0===q.strm.avail_out?fa:ma):q.last_lit&&(f(q,!1),0===q.strm.avail_out)?H:qa}function u(q,L){for(var N,n,A;;){if(q.lookahead<ea){if(k(q),
q.lookahead<ea&&L===x)return H;if(0===q.lookahead)break}if(N=0,q.lookahead>=Y&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+Y-1])&q.hash_mask,N=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=Y-1,0!==N&&q.prev_length<q.max_lazy_match&&q.strstart-N<=q.w_size-ea&&(q.match_length=p(q,N),5>=q.match_length&&(q.strategy===S||q.match_length===Y&&4096<q.strstart-q.match_start)&&(q.match_length=Y-1)),q.prev_length>=
Y&&q.match_length<=q.prev_length){A=q.strstart+q.lookahead-Y;n=K._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-Y);q.lookahead-=q.prev_length-1;q.prev_length-=2;do++q.strstart<=A&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+Y-1])&q.hash_mask,N=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart);while(0!=--q.prev_length);if(q.match_available=0,q.match_length=Y-1,q.strstart++,n&&(f(q,!1),0===q.strm.avail_out))return H}else if(q.match_available){if(K._tr_tally(q,0,q.window[q.strstart-
1])&&f(q,!1),q.strstart++,q.lookahead--,0===q.strm.avail_out)return H}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(K._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<Y-1?q.strstart:Y-1,L===I?(f(q,!0),0===q.strm.avail_out?fa:ma):q.last_lit&&(f(q,!1),0===q.strm.avail_out)?H:qa}function v(q,L,N,n,A){this.good_length=q;this.max_lazy=L;this.nice_length=N;this.max_chain=n;this.func=A}function w(){this.strm=null;this.status=0;this.pending_buf=
null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=Q;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=
this.hash_size=this.ins_h=0;this.dyn_ltree=new G.Buf16(2*ha);this.dyn_dtree=new G.Buf16(2*(2*da+1));this.bl_tree=new G.Buf16(2*(2*ia+1));b(this.dyn_ltree);b(this.dyn_dtree);b(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new G.Buf16(ja+1);this.heap=new G.Buf16(2*U+1);b(this.heap);this.heap_max=this.heap_len=0;this.depth=new G.Buf16(2*U+1);b(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=
this.l_buf=0}function z(q){var L;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=V,L=q.state,L.pending=0,L.pending_out=0,0>L.wrap&&(L.wrap=-L.wrap),L.status=L.wrap?P:M,q.adler=2===L.wrap?0:1,L.last_flush=x,K._tr_init(L),r):e(q,B)}function y(q){var L=z(q);L===r&&(q=q.state,q.window_size=2*q.w_size,b(q.head),q.max_lazy_match=ca[q.level].max_lazy,q.good_match=ca[q.level].good_length,q.nice_match=ca[q.level].nice_length,q.max_chain_length=ca[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=
0,q.insert=0,q.match_length=q.prev_length=Y-1,q.match_available=0,q.ins_h=0);return L}function D(q,L,N,n,A,F){if(!q)return B;var O=1;if(L===W&&(L=6),0>n?(O=0,n=-n):15<n&&(O=2,n-=16),1>A||A>ba||N!==Q||8>n||15<n||0>L||9<L||0>F||F>X)return e(q,B);8===n&&(n=9);var J=new w;return q.state=J,J.strm=q,J.wrap=O,J.gzhead=null,J.w_bits=n,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=A+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+Y-1)/Y),J.window=new G.Buf8(2*J.w_size),
J.head=new G.Buf16(J.hash_size),J.prev=new G.Buf16(J.w_size),J.lit_bufsize=1<<A+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new G.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=L,J.strategy=F,J.method=N,y(q)}var G=d("../utils/common"),K=d("./trees"),C=d("./adler32"),R=d("./crc32"),E=d("./messages"),x=0,I=4,r=0,B=-2,W=-1,S=1,X=4,V=2,Q=8,ba=9,U=286,da=30,ia=19,ha=2*U+1,ja=15,Y=3,aa=258,ea=aa+Y+1,P=42,M=113,H=1,qa=2,fa=3,ma=4;var ca=[new v(0,0,0,0,function(q,
L){var N=65535;for(N>q.pending_buf_size-5&&(N=q.pending_buf_size-5);;){if(1>=q.lookahead){if(k(q),0===q.lookahead&&L===x)return H;if(0===q.lookahead)break}q.strstart+=q.lookahead;q.lookahead=0;var n=q.block_start+N;if((0===q.strstart||q.strstart>=n)&&(q.lookahead=q.strstart-n,q.strstart=n,f(q,!1),0===q.strm.avail_out)||q.strstart-q.block_start>=q.w_size-ea&&(f(q,!1),0===q.strm.avail_out))return H}return q.insert=0,L===I?(f(q,!0),0===q.strm.avail_out?fa:ma):(q.strstart>q.block_start&&(f(q,!1),q.strm.avail_out),
H)}),new v(4,4,8,4,t),new v(4,5,16,8,t),new v(4,6,32,32,t),new v(4,4,16,16,u),new v(8,16,32,32,u),new v(8,16,128,128,u),new v(8,32,128,256,u),new v(32,128,258,1024,u),new v(32,258,258,4096,u)];m.deflateInit=function(q,L){return D(q,L,Q,15,8,0)};m.deflateInit2=D;m.deflateReset=y;m.deflateResetKeep=z;m.deflateSetHeader=function(q,L){return q&&q.state?2!==q.state.wrap?B:(q.state.gzhead=L,r):B};m.deflate=function(q,L){var N,n;if(!q||!q.state||5<L||0>L)return q?e(q,B):B;if(n=q.state,!q.output||!q.input&&
0!==q.avail_in||666===n.status&&L!==I)return e(q,0===q.avail_out?-5:B);if(n.strm=q,N=n.last_flush,n.last_flush=L,n.status===P)if(2===n.wrap)q.adler=0,h(n,31),h(n,139),h(n,8),n.gzhead?(h(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),h(n,255&n.gzhead.time),h(n,n.gzhead.time>>8&255),h(n,n.gzhead.time>>16&255),h(n,n.gzhead.time>>24&255),h(n,9===n.level?2:2<=n.strategy||2>n.level?4:0),h(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&
(h(n,255&n.gzhead.extra.length),h(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(q.adler=R(q.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(h(n,0),h(n,0),h(n,0),h(n,0),h(n,0),h(n,9===n.level?2:2<=n.strategy||2>n.level?4:0),h(n,3),n.status=M);else{var A=Q+(n.w_bits-8<<4)<<8;A|=(2<=n.strategy||2>n.level?0:6>n.level?1:6===n.level?2:3)<<6;0!==n.strstart&&(A|=32);n.status=M;l(n,A+(31-A%31));0!==n.strstart&&(l(n,q.adler>>>16),l(n,65535&q.adler));q.adler=1}if(69===n.status)if(n.gzhead.extra){for(A=
n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-A,A)),c(q),A=n.pending,n.pending!==n.pending_buf_size));)h(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-A,A));n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){A=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&
n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-A,A)),c(q),A=n.pending,n.pending===n.pending_buf_size)){var F=1;break}F=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0;h(n,F)}while(0!==F);n.gzhead.hcrc&&n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-A,A));0===F&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){A=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-
A,A)),c(q),A=n.pending,n.pending===n.pending_buf_size)){F=1;break}F=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0;h(n,F)}while(0!==F);n.gzhead.hcrc&&n.pending>A&&(q.adler=R(q.adler,n.pending_buf,n.pending-A,A));0===F&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&c(q),n.pending+2<=n.pending_buf_size&&(h(n,255&q.adler),h(n,q.adler>>8&255),q.adler=0,n.status=M)):n.status=M),0!==n.pending){if(c(q),0===q.avail_out)return n.last_flush=
-1,r}else if(0===q.avail_in&&(L<<1)-(4<L?9:0)<=(N<<1)-(4<N?9:0)&&L!==I)return e(q,-5);if(666===n.status&&0!==q.avail_in)return e(q,-5);if(0!==q.avail_in||0!==n.lookahead||L!==x&&666!==n.status){if(2===n.strategy)a:{for(var O;;){if(0===n.lookahead&&(k(n),0===n.lookahead)){if(L===x){var J=H;break a}break}if(n.match_length=0,O=K._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,O&&(f(n,!1),0===n.strm.avail_out)){J=H;break a}}J=(n.insert=0,L===I?(f(n,!0),0===n.strm.avail_out?fa:ma):n.last_lit&&
(f(n,!1),0===n.strm.avail_out)?H:qa)}else if(3===n.strategy)a:{var Z,T;for(O=n.window;;){if(n.lookahead<=aa){if(k(n),n.lookahead<=aa&&L===x){J=H;break a}if(0===n.lookahead)break}if(n.match_length=0,n.lookahead>=Y&&0<n.strstart&&(T=n.strstart-1,(Z=O[T])===O[++T]&&Z===O[++T]&&Z===O[++T])){for(N=n.strstart+aa;Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&Z===O[++T]&&T<N;);n.match_length=aa-(N-T);n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=
Y?(J=K._tr_tally(n,1,n.match_length-Y),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(J=K._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),J&&(f(n,!1),0===n.strm.avail_out)){J=H;break a}}J=(n.insert=0,L===I?(f(n,!0),0===n.strm.avail_out?fa:ma):n.last_lit&&(f(n,!1),0===n.strm.avail_out)?H:qa)}else J=ca[n.level].func(n,L);if(J!==fa&&J!==ma||(n.status=666),J===H||J===fa)return 0===q.avail_out&&(n.last_flush=-1),r;if(J===qa&&(1===L?K._tr_align(n):5!==L&&(K._tr_stored_block(n,
0,0,!1),3===L&&(b(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),c(q),0===q.avail_out))return n.last_flush=-1,r}return L!==I?r:0>=n.wrap?1:(2===n.wrap?(h(n,255&q.adler),h(n,q.adler>>8&255),h(n,q.adler>>16&255),h(n,q.adler>>24&255),h(n,255&q.total_in),h(n,q.total_in>>8&255),h(n,q.total_in>>16&255),h(n,q.total_in>>24&255)):(l(n,q.adler>>>16),l(n,65535&q.adler)),c(q),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?r:1)};m.deflateEnd=function(q){var L;return q&&q.state?(L=q.state.status)!==
P&&69!==L&&73!==L&&91!==L&&103!==L&&L!==M&&666!==L?e(q,B):(q.state=null,L===M?e(q,-3):r):B};m.deflateSetDictionary=function(q,L){var N,n,A;var F=L.length;if(!q||!q.state||(N=q.state,2===(n=N.wrap)||1===n&&N.status!==P||N.lookahead))return B;1===n&&(q.adler=C(q.adler,L,F,0));N.wrap=0;F>=N.w_size&&(0===n&&(b(N.head),N.strstart=0,N.block_start=0,N.insert=0),A=new G.Buf8(N.w_size),G.arraySet(A,L,F-N.w_size,N.w_size,0),L=A,F=N.w_size);A=q.avail_in;var O=q.next_in;var J=q.input;q.avail_in=F;q.next_in=0;
q.input=L;for(k(N);N.lookahead>=Y;){L=N.strstart;F=N.lookahead-(Y-1);do N.ins_h=(N.ins_h<<N.hash_shift^N.window[L+Y-1])&N.hash_mask,N.prev[L&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=L,L++;while(--F);N.strstart=L;N.lookahead=Y-1;k(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=Y-1,N.match_available=0,q.next_in=O,q.input=J,q.avail_in=A,N.wrap=n,r};m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,
"./crc32":7,"./messages":13,"./trees":14}],9:[function(d,g,m){g.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(d,g,m){g.exports=function(e,b){var c,f,h;var l=e.state;var p=e.next_in;var k=e.input;var t=p+(e.avail_in-5);var u=e.next_out;var v=e.output;b=u-(b-e.avail_out);var w=u+(e.avail_out-257);var z=l.dmax;var y=l.wsize;var D=l.whave;var G=l.wnext;var K=l.window;var C=l.hold;var R=
l.bits;var E=l.lencode;var x=l.distcode;var I=(1<<l.lenbits)-1;var r=(1<<l.distbits)-1;a:do{15>R&&(C+=k[p++]<<R,R+=8,C+=k[p++]<<R,R+=8);var B=E[C&I];b:for(;;){if(c=B>>>24,C>>>=c,R-=c,0===(c=B>>>16&255))v[u++]=65535&B;else{if(!(16&c)){if(0==(64&c)){B=E[(65535&B)+(C&(1<<c)-1)];continue b}if(32&c){l.mode=12;break a}e.msg="invalid literal/length code";l.mode=30;break a}var W=65535&B;(c&=15)&&(R<c&&(C+=k[p++]<<R,R+=8),W+=C&(1<<c)-1,C>>>=c,R-=c);15>R&&(C+=k[p++]<<R,R+=8,C+=k[p++]<<R,R+=8);B=x[C&r];c:for(;;){if(c=
B>>>24,C>>>=c,R-=c,!(16&(c=B>>>16&255))){if(0==(64&c)){B=x[(65535&B)+(C&(1<<c)-1)];continue c}e.msg="invalid distance code";l.mode=30;break a}if(f=65535&B,c&=15,R<c&&(C+=k[p++]<<R,(R+=8)<c&&(C+=k[p++]<<R,R+=8)),(f+=C&(1<<c)-1)>z){e.msg="invalid distance too far back";l.mode=30;break a}if(C>>>=c,R-=c,c=u-b,f>c){if((c=f-c)>D&&l.sane){e.msg="invalid distance too far back";l.mode=30;break a}if(B=0,h=K,0===G){if(B+=y-c,c<W){W-=c;do v[u++]=K[B++];while(--c);B=u-f;h=v}}else if(G<c){if(B+=y+G-c,(c-=G)<W){W-=
c;do v[u++]=K[B++];while(--c);if(B=0,G<W){W-=c=G;do v[u++]=K[B++];while(--c);B=u-f;h=v}}}else if(B+=G-c,c<W){W-=c;do v[u++]=K[B++];while(--c);B=u-f;h=v}for(;2<W;)v[u++]=h[B++],v[u++]=h[B++],v[u++]=h[B++],W-=3;W&&(v[u++]=h[B++],1<W&&(v[u++]=h[B++]))}else{B=u-f;do v[u++]=v[B++],v[u++]=v[B++],v[u++]=v[B++],W-=3;while(2<W);W&&(v[u++]=v[B++],1<W&&(v[u++]=v[B++]))}break}}break}}while(p<t&&u<w);p-=W=R>>3;C&=(1<<(R-=W<<3))-1;e.next_in=p;e.next_out=u;e.avail_in=p<t?t-p+5:5-(p-t);e.avail_out=u<w?w-u+257:257-
(u-w);l.hold=C;l.bits=R}},{}],11:[function(d,g,m){function e(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function b(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=
new u.Buf16(320);this.work=new u.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(x){var I;return x&&x.state?(I=x.state,x.total_in=x.total_out=I.total=0,x.msg="",I.wrap&&(x.adler=1&I.wrap),I.mode=K,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new u.Buf32(C),I.distcode=I.distdyn=new u.Buf32(R),I.sane=1,I.back=-1,D):G}function f(x){var I;return x&&x.state?(I=x.state,I.wsize=0,I.whave=0,I.wnext=0,c(x)):G}function h(x,I){var r,B;
return x&&x.state?(B=x.state,0>I?(r=0,I=-I):(r=1+(I>>4),48>I&&(I&=15)),I&&(8>I||15<I)?G:(null!==B.window&&B.wbits!==I&&(B.window=null),B.wrap=r,B.wbits=I,f(x))):G}function l(x,I){var r,B;return x?(B=new b,x.state=B,B.window=null,(r=h(x,I))!==D&&(x.state=null),r):G}function p(x,I,r,B){var W;x=x.state;return null===x.window&&(x.wsize=1<<x.wbits,x.wnext=0,x.whave=0,x.window=new u.Buf8(x.wsize)),B>=x.wsize?(u.arraySet(x.window,I,r-x.wsize,x.wsize,0),x.wnext=0,x.whave=x.wsize):((W=x.wsize-x.wnext)>B&&
(W=B),u.arraySet(x.window,I,r-B,W,x.wnext),(B-=W)?(u.arraySet(x.window,I,r-B,B,0),x.wnext=B,x.whave=x.wsize):(x.wnext+=W,x.wnext===x.wsize&&(x.wnext=0),x.whave<x.wsize&&(x.whave+=W))),0}var k,t,u=d("../utils/common"),v=d("./adler32"),w=d("./crc32"),z=d("./inffast"),y=d("./inftrees"),D=0,G=-2,K=1,C=852,R=592,E=!0;m.inflateReset=f;m.inflateReset2=h;m.inflateResetKeep=c;m.inflateInit=function(x){return l(x,15)};m.inflateInit2=l;m.inflate=function(x,I){var r,B,W,S,X,V,Q,ba,U=0,da=new u.Buf8(4),ia=[16,
17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&0!==x.avail_in)return G;12===(r=x.state).mode&&(r.mode=13);var ha=x.next_out;var ja=x.output;var Y=x.avail_out;var aa=x.next_in;var ea=x.input;var P=x.avail_in;var M=r.hold;var H=r.bits;var qa=P;var fa=Y;var ma=D;a:for(;;)switch(r.mode){case K:if(0===r.wrap){r.mode=13;break}for(;16>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(2&r.wrap&&35615===M){r.check=0;da[0]=255&M;da[1]=M>>>8&255;r.check=w(r.check,da,2,0);H=
M=0;r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&M)<<8)+(M>>8))%31){x.msg="incorrect header check";r.mode=30;break}if(8!==(15&M)){x.msg="unknown compression method";r.mode=30;break}if(M>>>=4,H-=4,Q=8+(15&M),0===r.wbits)r.wbits=Q;else if(Q>r.wbits){x.msg="invalid window size";r.mode=30;break}r.dmax=1<<Q;x.adler=r.check=1;r.mode=512&M?10:12;H=M=0;break;case 2:for(;16>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(r.flags=M,8!==(255&r.flags)){x.msg="unknown compression method";
r.mode=30;break}if(57344&r.flags){x.msg="unknown header flags set";r.mode=30;break}r.head&&(r.head.text=M>>8&1);512&r.flags&&(da[0]=255&M,da[1]=M>>>8&255,r.check=w(r.check,da,2,0));H=M=0;r.mode=3;case 3:for(;32>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.head&&(r.head.time=M);512&r.flags&&(da[0]=255&M,da[1]=M>>>8&255,da[2]=M>>>16&255,da[3]=M>>>24&255,r.check=w(r.check,da,4,0));H=M=0;r.mode=4;case 4:for(;16>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.head&&(r.head.xflags=255&M,r.head.os=M>>8);
512&r.flags&&(da[0]=255&M,da[1]=M>>>8&255,r.check=w(r.check,da,2,0));H=M=0;r.mode=5;case 5:if(1024&r.flags){for(;16>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.length=M;r.head&&(r.head.extra_len=M);512&r.flags&&(da[0]=255&M,da[1]=M>>>8&255,r.check=w(r.check,da,2,0));H=M=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((B=r.length)>P&&(B=P),B&&(r.head&&(Q=r.head.extra_len-r.length,r.head.extra||(r.head.extra=Array(r.head.extra_len)),u.arraySet(r.head.extra,ea,aa,B,Q)),512&r.flags&&
(r.check=w(r.check,ea,B,aa)),P-=B,aa+=B,r.length-=B),r.length))break a;r.length=0;r.mode=7;case 7:if(2048&r.flags){if(0===P)break a;B=0;do Q=ea[aa+B++],r.head&&Q&&65536>r.length&&(r.head.name+=String.fromCharCode(Q));while(Q&&B<P);if(512&r.flags&&(r.check=w(r.check,ea,B,aa)),P-=B,aa+=B,Q)break a}else r.head&&(r.head.name=null);r.length=0;r.mode=8;case 8:if(4096&r.flags){if(0===P)break a;B=0;do Q=ea[aa+B++],r.head&&Q&&65536>r.length&&(r.head.comment+=String.fromCharCode(Q));while(Q&&B<P);if(512&r.flags&&
(r.check=w(r.check,ea,B,aa)),P-=B,aa+=B,Q)break a}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;16>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(M!==(65535&r.check)){x.msg="header crc mismatch";r.mode=30;break}H=M=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0);x.adler=r.check=0;r.mode=12;break;case 10:for(;32>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}x.adler=r.check=e(M);H=M=0;r.mode=11;case 11:if(0===r.havedict)return x.next_out=ha,x.avail_out=Y,x.next_in=aa,x.avail_in=
P,r.hold=M,r.bits=H,2;x.adler=r.check=1;r.mode=12;case 12:if(5===I||6===I)break a;case 13:if(r.last){M>>>=7&H;H-=7&H;r.mode=27;break}for(;3>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}switch(r.last=1&M,M>>>=1,--H,3&M){case 0:r.mode=14;break;case 1:var ca=r;if(E){k=new u.Buf32(512);t=new u.Buf32(32);for(S=0;144>S;)ca.lens[S++]=8;for(;256>S;)ca.lens[S++]=9;for(;280>S;)ca.lens[S++]=7;for(;288>S;)ca.lens[S++]=8;y(1,ca.lens,0,288,k,0,ca.work,{bits:9});for(S=0;32>S;)ca.lens[S++]=5;y(2,ca.lens,0,32,t,0,
ca.work,{bits:5});E=!1}ca.lencode=k;ca.lenbits=9;ca.distcode=t;ca.distbits=5;if(r.mode=20,6===I){M>>>=2;H-=2;break a}break;case 2:r.mode=17;break;case 3:x.msg="invalid block type",r.mode=30}M>>>=2;H-=2;break;case 14:M>>>=7&H;for(H-=7&H;32>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if((65535&M)!=(M>>>16^65535)){x.msg="invalid stored block lengths";r.mode=30;break}if(r.length=65535&M,M=0,H=0,r.mode=15,6===I)break a;case 15:r.mode=16;case 16:if(B=r.length){if(B>P&&(B=P),B>Y&&(B=Y),0===B)break a;u.arraySet(ja,
ea,aa,B,ha);P-=B;aa+=B;Y-=B;ha+=B;r.length-=B;break}r.mode=12;break;case 17:for(;14>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(r.nlen=257+(31&M),M>>>=5,H-=5,r.ndist=1+(31&M),M>>>=5,H-=5,r.ncode=4+(15&M),M>>>=4,H-=4,286<r.nlen||30<r.ndist){x.msg="too many length or distance symbols";r.mode=30;break}r.have=0;r.mode=18;case 18:for(;r.have<r.ncode;){for(;3>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.lens[ia[r.have++]]=7&M;M>>>=3;H-=3}for(;19>r.have;)r.lens[ia[r.have++]]=0;if(r.lencode=r.lendyn,
r.lenbits=7,ba={bits:r.lenbits},ma=y(0,r.lens,0,19,r.lencode,0,r.work,ba),r.lenbits=ba.bits,ma){x.msg="invalid code lengths set";r.mode=30;break}r.have=0;r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;U=r.lencode[M&(1<<r.lenbits)-1],X=U>>>24,ca=65535&U,!(X<=H);){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(16>ca)M>>>=X,H-=X,r.lens[r.have++]=ca;else{if(16===ca){for(S=X+2;H<S;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(M>>>=X,H-=X,0===r.have){x.msg="invalid bit length repeat";r.mode=30;break}Q=
r.lens[r.have-1];B=3+(3&M);M>>>=2;H-=2}else if(17===ca){for(S=X+3;H<S;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}H-=X;Q=0;B=3+(7&(M>>>=X));M>>>=3;H-=3}else{for(S=X+7;H<S;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}H-=X;Q=0;B=11+(127&(M>>>=X));M>>>=7;H-=7}if(r.have+B>r.nlen+r.ndist){x.msg="invalid bit length repeat";r.mode=30;break}for(;B--;)r.lens[r.have++]=Q}}if(30===r.mode)break;if(0===r.lens[256]){x.msg="invalid code -- missing end-of-block";r.mode=30;break}if(r.lenbits=9,ba={bits:r.lenbits},ma=
y(1,r.lens,0,r.nlen,r.lencode,0,r.work,ba),r.lenbits=ba.bits,ma){x.msg="invalid literal/lengths set";r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,ba={bits:r.distbits},ma=y(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ba),r.distbits=ba.bits,ma){x.msg="invalid distances set";r.mode=30;break}if(r.mode=20,6===I)break a;case 20:r.mode=21;case 21:if(6<=P&&258<=Y){x.next_out=ha;x.avail_out=Y;x.next_in=aa;x.avail_in=P;r.hold=M;r.bits=H;z(x,fa);ha=x.next_out;ja=x.output;Y=x.avail_out;aa=x.next_in;ea=
x.input;P=x.avail_in;M=r.hold;H=r.bits;12===r.mode&&(r.back=-1);break}for(r.back=0;U=r.lencode[M&(1<<r.lenbits)-1],X=U>>>24,S=U>>>16&255,ca=65535&U,!(X<=H);){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(S&&0==(240&S)){var q=X;var L=S;for(V=ca;U=r.lencode[V+((M&(1<<q+L)-1)>>q)],X=U>>>24,S=U>>>16&255,ca=65535&U,!(q+X<=H);){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}M>>>=q;H-=q;r.back+=q}if(M>>>=X,H-=X,r.back+=X,r.length=ca,0===S){r.mode=26;break}if(32&S){r.back=-1;r.mode=12;break}if(64&S){x.msg="invalid literal/length code";
r.mode=30;break}r.extra=15&S;r.mode=22;case 22:if(r.extra){for(S=r.extra;H<S;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.length+=M&(1<<r.extra)-1;M>>>=r.extra;H-=r.extra;r.back+=r.extra}r.was=r.length;r.mode=23;case 23:for(;U=r.distcode[M&(1<<r.distbits)-1],X=U>>>24,S=U>>>16&255,ca=65535&U,!(X<=H);){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(0==(240&S)){q=X;L=S;for(V=ca;U=r.distcode[V+((M&(1<<q+L)-1)>>q)],X=U>>>24,S=U>>>16&255,ca=65535&U,!(q+X<=H);){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}M>>>=
q;H-=q;r.back+=q}if(M>>>=X,H-=X,r.back+=X,64&S){x.msg="invalid distance code";r.mode=30;break}r.offset=ca;r.extra=15&S;r.mode=24;case 24:if(r.extra){for(S=r.extra;H<S;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}r.offset+=M&(1<<r.extra)-1;M>>>=r.extra;H-=r.extra;r.back+=r.extra}if(r.offset>r.dmax){x.msg="invalid distance too far back";r.mode=30;break}r.mode=25;case 25:if(0===Y)break a;if(B=fa-Y,r.offset>B){if((B=r.offset-B)>r.whave&&r.sane){x.msg="invalid distance too far back";r.mode=30;break}B>r.wnext?
(B-=r.wnext,W=r.wsize-B):W=r.wnext-B;B>r.length&&(B=r.length);S=r.window}else S=ja,W=ha-r.offset,B=r.length;B>Y&&(B=Y);Y-=B;r.length-=B;do ja[ha++]=S[W++];while(--B);0===r.length&&(r.mode=21);break;case 26:if(0===Y)break a;ja[ha++]=r.length;Y--;r.mode=21;break;case 27:if(r.wrap){for(;32>H;){if(0===P)break a;P--;M|=ea[aa++]<<H;H+=8}if(fa-=Y,x.total_out+=fa,r.total+=fa,fa&&(x.adler=r.check=r.flags?w(r.check,ja,fa,ha-fa):v(r.check,ja,fa,ha-fa)),fa=Y,(r.flags?M:e(M))!==r.check){x.msg="incorrect data check";
r.mode=30;break}H=M=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;32>H;){if(0===P)break a;P--;M+=ea[aa++]<<H;H+=8}if(M!==(4294967295&r.total)){x.msg="incorrect length check";r.mode=30;break}H=M=0}r.mode=29;case 29:ma=1;break a;case 30:ma=-3;break a;case 31:return-4;default:return G}return x.next_out=ha,x.avail_out=Y,x.next_in=aa,x.avail_in=P,r.hold=M,r.bits=H,(r.wsize||fa!==x.avail_out&&30>r.mode&&(27>r.mode||4!==I))&&p(x,x.output,x.next_out,fa-x.avail_out)?(r.mode=31,-4):(qa-=x.avail_in,fa-=x.avail_out,
x.total_in+=qa,x.total_out+=fa,r.total+=fa,r.wrap&&fa&&(x.adler=r.check=r.flags?w(r.check,ja,fa,x.next_out-fa):v(r.check,ja,fa,x.next_out-fa)),x.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===qa&&0===fa||4===I)&&ma===D&&(ma=-5),ma)};m.inflateEnd=function(x){if(!x||!x.state)return G;var I=x.state;return I.window&&(I.window=null),x.state=null,D};m.inflateGetHeader=function(x,I){var r;return x&&x.state?0==(2&(r=x.state).wrap)?G:(r.head=I,I.done=!1,D):G};m.inflateSetDictionary=
function(x,I){var r,B=I.length;return x&&x.state?0!==(r=x.state).wrap&&11!==r.mode?G:11===r.mode&&v(1,I,B,0)!==r.check?-3:p(x,I,B,B)?(r.mode=31,-4):(r.havedict=1,D):G};m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(d,g,m){var e=d("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,
19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function(l,p,k,t,u,v,w,z){var y,D,G,K,C,R,E=z.bits,x,I,r,B,W,S=0,X,V=null,Q=0,ba=new e.Buf16(16);var U=new e.Buf16(16);var da=null,ia=0;for(x=0;15>=x;x++)ba[x]=0;for(I=0;I<t;I++)ba[p[k+I]]++;var ha=E;for(r=15;1<=r&&0===ba[r];r--);if(ha>
r&&(ha=r),0===r)return u[v++]=20971520,u[v++]=20971520,z.bits=1,0;for(E=1;E<r&&0===ba[E];E++);ha<E&&(ha=E);for(x=y=1;15>=x;x++)if(y<<=1,0>(y-=ba[x]))return-1;if(0<y&&(0===l||1!==r))return-1;U[1]=0;for(x=1;15>x;x++)U[x+1]=U[x]+ba[x];for(I=0;I<t;I++)0!==p[k+I]&&(w[U[p[k+I]]++]=I);if(0===l?(V=da=w,K=19):1===l?(V=b,Q-=257,da=c,ia-=257,K=256):(V=f,da=h,K=-1),X=0,I=0,x=E,U=v,B=ha,W=0,G=-1,S=1<<ha,t=S-1,1===l&&852<S||2===l&&592<S)return 1;for(;;){var ja=x-W;w[I]<K?(C=0,R=w[I]):w[I]>K?(C=da[ia+w[I]],R=V[Q+
w[I]]):(C=96,R=0);y=1<<x-W;E=D=1<<B;do u[U+(X>>W)+(D-=y)]=ja<<24|C<<16|R|0;while(0!==D);for(y=1<<x-1;X&y;)y>>=1;if(0!==y?(X&=y-1,X+=y):X=0,I++,0==--ba[x]){if(x===r)break;x=p[k+w[I]]}if(x>ha&&(X&t)!==G){0===W&&(W=ha);U+=E;for(y=1<<(B=x-W);B+W<r&&!(0>=(y-=ba[B+W]));)B++,y<<=1;if(S+=1<<B,1===l&&852<S||2===l&&592<S)return 1;u[G=X&t]=ha<<24|B<<16|U-v|0}}return 0!==X&&(u[U+X]=x-W<<24|4194304),z.bits=ha,0}},{"../utils/common":3}],13:[function(d,g,m){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(d,g,m){function e(n){for(var A=n.length;0<=--A;)n[A]=0}function b(n,A,F,O,J){this.static_tree=n;this.extra_bits=A;this.extra_base=F;this.elems=O;this.max_length=J;this.has_stree=n&&n.length}function c(n,A){this.dyn_tree=n;this.max_code=0;this.stat_desc=A}function f(n){return 256>n?H[n]:H[256+(n>>>7)]}function h(n,A){n.pending_buf[n.pending++]=255&A;n.pending_buf[n.pending++]=
A>>>8&255}function l(n,A,F){n.bi_valid>ba-F?(n.bi_buf|=A<<n.bi_valid&65535,h(n,n.bi_buf),n.bi_buf=A>>ba-n.bi_valid,n.bi_valid+=F-ba):(n.bi_buf|=A<<n.bi_valid&65535,n.bi_valid+=F)}function p(n,A,F){l(n,F[2*A],F[2*A+1])}function k(n,A){var F=0;do F|=1&n,n>>>=1,F<<=1;while(0<--A);return F>>>1}function t(n,A,F){var O,J=Array(Q+1),Z=0;for(O=1;O<=Q;O++)J[O]=Z=Z+F[O-1]<<1;for(F=0;F<=A;F++)O=n[2*F+1],0!==O&&(n[2*F]=k(J[O]++,O))}function u(n){var A;for(A=0;A<W;A++)n.dyn_ltree[2*A]=0;for(A=0;A<S;A++)n.dyn_dtree[2*
A]=0;for(A=0;A<X;A++)n.bl_tree[2*A]=0;n.dyn_ltree[2*U]=1;n.opt_len=n.static_len=0;n.last_lit=n.matches=0}function v(n){8<n.bi_valid?h(n,n.bi_buf):0<n.bi_valid&&(n.pending_buf[n.pending++]=n.bi_buf);n.bi_buf=0;n.bi_valid=0}function w(n,A,F,O){var J=2*A,Z=2*F;return n[J]<n[Z]||n[J]===n[Z]&&O[A]<=O[F]}function z(n,A,F){for(var O=n.heap[F],J=F<<1;J<=n.heap_len&&(J<n.heap_len&&w(A,n.heap[J+1],n.heap[J],n.depth)&&J++,!w(A,O,n.heap[J],n.depth));)n.heap[F]=n.heap[J],F=J,J<<=1;n.heap[F]=O}function y(n,A,F){var O,
J,Z=0;if(0!==n.last_lit){do{var T=n.pending_buf[n.d_buf+2*Z]<<8|n.pending_buf[n.d_buf+2*Z+1];var la=n.pending_buf[n.l_buf+Z];Z++;0===T?p(n,la,A):(p(n,(O=qa[la])+B+1,A),0!==(J=ja[O])&&l(n,la-fa[O],J),p(n,O=f(--T),F),0!==(J=Y[O])&&l(n,T-ma[O],J))}while(Z<n.last_lit)}p(n,U,A)}function D(n,A){var F,O,J=A.dyn_tree;var Z=A.stat_desc.static_tree;var T=A.stat_desc.has_stree,la=A.stat_desc.elems,oa=-1;n.heap_len=0;n.heap_max=V;for(F=0;F<la;F++)0!==J[2*F]?(n.heap[++n.heap_len]=oa=F,n.depth[F]=0):J[2*F+1]=0;
for(;2>n.heap_len;)J[2*(O=n.heap[++n.heap_len]=2>oa?++oa:0)]=1,n.depth[O]=0,n.opt_len--,T&&(n.static_len-=Z[2*O+1]);A.max_code=oa;for(F=n.heap_len>>1;1<=F;F--)z(n,J,F);O=la;do F=n.heap[1],n.heap[1]=n.heap[n.heap_len--],z(n,J,1),Z=n.heap[1],n.heap[--n.heap_max]=F,n.heap[--n.heap_max]=Z,J[2*O]=J[2*F]+J[2*Z],n.depth[O]=(n.depth[F]>=n.depth[Z]?n.depth[F]:n.depth[Z])+1,J[2*F+1]=J[2*Z+1]=O,n.heap[1]=O++,z(n,J,1);while(2<=n.heap_len);n.heap[--n.heap_max]=n.heap[1];var ka,sa,na,ta,va;F=A.dyn_tree;O=A.max_code;
Z=A.stat_desc.static_tree;T=A.stat_desc.has_stree;la=A.stat_desc.extra_bits;var xa=A.stat_desc.extra_base,pa=A.stat_desc.max_length,ra=0;for(na=0;na<=Q;na++)n.bl_count[na]=0;F[2*n.heap[n.heap_max]+1]=0;for(A=n.heap_max+1;A<V;A++)(na=F[2*F[2*(ka=n.heap[A])+1]+1]+1)>pa&&(na=pa,ra++),F[2*ka+1]=na,ka>O||(n.bl_count[na]++,ta=0,ka>=xa&&(ta=la[ka-xa]),va=F[2*ka],n.opt_len+=va*(na+ta),T&&(n.static_len+=va*(Z[2*ka+1]+ta)));if(0!==ra){do{for(na=pa-1;0===n.bl_count[na];)na--;n.bl_count[na]--;n.bl_count[na+1]+=
2;n.bl_count[pa]--;ra-=2}while(0<ra);for(na=pa;0!==na;na--)for(ka=n.bl_count[na];0!==ka;)(sa=n.heap[--A])>O||(F[2*sa+1]!==na&&(n.opt_len+=(na-F[2*sa+1])*F[2*sa],F[2*sa+1]=na),ka--)}t(J,oa,n.bl_count)}function G(n,A,F){var O,J=-1,Z=A[1],T=0,la=7,oa=4;0===Z&&(la=138,oa=3);A[2*(F+1)+1]=65535;for(O=0;O<=F;O++){var ka=Z;Z=A[2*(O+1)+1];++T<la&&ka===Z||(T<oa?n.bl_tree[2*ka]+=T:0!==ka?(ka!==J&&n.bl_tree[2*ka]++,n.bl_tree[2*da]++):10>=T?n.bl_tree[2*ia]++:n.bl_tree[2*ha]++,T=0,J=ka,0===Z?(la=138,oa=3):ka===
Z?(la=6,oa=3):(la=7,oa=4))}}function K(n,A,F){var O,J,Z=-1,T=A[1],la=0,oa=7,ka=4;0===T&&(oa=138,ka=3);for(O=0;O<=F;O++)if(J=T,T=A[2*(O+1)+1],!(++la<oa&&J===T)){if(la<ka){do p(n,J,n.bl_tree);while(0!=--la)}else 0!==J?(J!==Z&&(p(n,J,n.bl_tree),la--),p(n,da,n.bl_tree),l(n,la-3,2)):10>=la?(p(n,ia,n.bl_tree),l(n,la-3,3)):(p(n,ha,n.bl_tree),l(n,la-11,7));la=0;Z=J;0===T?(oa=138,ka=3):J===T?(oa=6,ka=3):(oa=7,ka=4)}}function C(n){var A,F=4093624447;for(A=0;31>=A;A++,F>>>=1)if(1&F&&0!==n.dyn_ltree[2*A])return x;
if(0!==n.dyn_ltree[18]||0!==n.dyn_ltree[20]||0!==n.dyn_ltree[26])return I;for(A=32;A<B;A++)if(0!==n.dyn_ltree[2*A])return I;return x}function R(n,A,F,O){l(n,(r<<1)+(O?1:0),3);v(n);h(n,F);h(n,~F);E.arraySet(n.pending_buf,n.window,A,F,n.pending);n.pending+=F}var E=d("../utils/common"),x=0,I=1,r=0,B=256,W=B+1+29,S=30,X=19,V=2*W+1,Q=15,ba=16,U=256,da=16,ia=17,ha=18,ja=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],aa=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=Array(2*(W+2));e(P);var M=Array(2*S);e(M);var H=Array(512);e(H);var qa=Array(256);e(qa);var fa=Array(29);e(fa);var ma=Array(S);e(ma);var ca,q,L,N=!1;m._tr_init=function(n){if(!N){var A,F,O,J=Array(Q+1);for(O=F=0;28>O;O++)for(fa[O]=F,A=0;A<1<<ja[O];A++)qa[F++]=O;qa[F-1]=O;for(O=F=0;16>O;O++)for(ma[O]=F,A=0;A<1<<Y[O];A++)H[F++]=O;for(F>>=7;O<S;O++)for(ma[O]=F<<7,A=0;A<1<<Y[O]-7;A++)H[256+F++]=O;for(A=0;A<=
Q;A++)J[A]=0;for(A=0;143>=A;)P[2*A+1]=8,A++,J[8]++;for(;255>=A;)P[2*A+1]=9,A++,J[9]++;for(;279>=A;)P[2*A+1]=7,A++,J[7]++;for(;287>=A;)P[2*A+1]=8,A++,J[8]++;t(P,W+1,J);for(A=0;A<S;A++)M[2*A+1]=5,M[2*A]=k(A,5);ca=new b(P,ja,B+1,W,Q);q=new b(M,Y,0,S,Q);L=new b([],aa,0,X,7);N=!0}n.l_desc=new c(n.dyn_ltree,ca);n.d_desc=new c(n.dyn_dtree,q);n.bl_desc=new c(n.bl_tree,L);n.bi_buf=0;n.bi_valid=0;u(n)};m._tr_stored_block=R;m._tr_flush_block=function(n,A,F,O){var J,Z=0;if(0<n.level){2===n.strm.data_type&&(n.strm.data_type=
C(n));D(n,n.l_desc);D(n,n.d_desc);G(n,n.dyn_ltree,n.l_desc.max_code);G(n,n.dyn_dtree,n.d_desc.max_code);D(n,n.bl_desc);for(Z=X-1;3<=Z&&0===n.bl_tree[2*ea[Z]+1];Z--);Z=(n.opt_len+=3*(Z+1)+14,Z);var T=n.opt_len+3+7>>>3;(J=n.static_len+3+7>>>3)<=T&&(T=J)}else T=J=F+5;if(F+4<=T&&-1!==A)R(n,A,F,O);else if(4===n.strategy||J===T)l(n,2+(O?1:0),3),y(n,P,M);else{l(n,4+(O?1:0),3);A=n.l_desc.max_code+1;F=n.d_desc.max_code+1;Z+=1;l(n,A-257,5);l(n,F-1,5);l(n,Z-4,4);for(J=0;J<Z;J++)l(n,n.bl_tree[2*ea[J]+1],3);K(n,
n.dyn_ltree,A-1);K(n,n.dyn_dtree,F-1);y(n,n.dyn_ltree,n.dyn_dtree)}u(n);O&&v(n)};m._tr_tally=function(n,A,F){return n.pending_buf[n.d_buf+2*n.last_lit]=A>>>8&255,n.pending_buf[n.d_buf+2*n.last_lit+1]=255&A,n.pending_buf[n.l_buf+n.last_lit]=255&F,n.last_lit++,0===A?n.dyn_ltree[2*F]++:(n.matches++,A--,n.dyn_ltree[2*(qa[F]+B+1)]++,n.dyn_dtree[2*f(A)]++),n.last_lit===n.lit_bufsize-1};m._tr_align=function(n){l(n,2,3);p(n,U,P);16===n.bi_valid?(h(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=
255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}},{"../utils/common":3}],15:[function(d,g,m){g.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(d,g,m){m={};(0,d("./lib/utils/common").assign)(m,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants"));g.exports=m},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},
{},[])("/")});!function(a,d){if("object"==typeof exports&&"object"==typeof module)module.exports=d();else if("function"==typeof define&&define.amd)define(d);else{d=d();for(var g in d)("object"==typeof exports?exports:a)[g]=d[g]}}(this,function(){return function(a){function d(m){if(g[m])return g[m].exports;var e=g[m]={exports:{},id:m,loaded:!1};return a[m].call(e.exports,e,e.exports,d),e.loaded=!0,e.exports}var g={};return d.m=a,d.c=g,d.p="",d(0)}([function(a,d,g){d.glMatrix=g(1);d.mat2=g(2);d.mat2d=g(3);d.mat3=
g(4);d.mat4=g(5);d.quat=g(6);d.vec2=g(9);d.vec3=g(7);d.vec4=g(8)},function(a,d){d={EPSILON:1E-6};d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;d.setMatrixArrayType=function(m){GLMAT_ARRAY_TYPE=m};var g=Math.PI/180;d.toRadian=function(m){return m*g};a.exports=d},function(a,d,g){var m=g(1);d={create:function(){var e=new m.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var b=new m.ARRAY_TYPE(4);return b[0]=e[0],b[1]=e[1],b[2]=e[2],b[3]=e[3],
b},copy:function(e,b){return e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=b[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,b){if(e===b){var c=b[1];e[1]=b[2];e[2]=c}else e[0]=b[0],e[1]=b[2],e[2]=b[1],e[3]=b[3];return e},invert:function(e,b){var c=b[0],f=b[1],h=b[2];b=b[3];var l=c*b-h*f;return l?(l=1/l,e[0]=b*l,e[1]=-f*l,e[2]=-h*l,e[3]=c*l,e):null},adjoint:function(e,b){var c=b[0];return e[0]=b[3],e[1]=-b[1],e[2]=-b[2],e[3]=c,e},determinant:function(e){return e[0]*e[3]-
e[2]*e[1]},multiply:function(e,b,c){var f=b[0],h=b[1],l=b[2];b=b[3];var p=c[0],k=c[1],t=c[2];c=c[3];return e[0]=f*p+l*k,e[1]=h*p+b*k,e[2]=f*t+l*c,e[3]=h*t+b*c,e}};d.mul=d.multiply;d.rotate=function(e,b,c){var f=b[0],h=b[1],l=b[2];b=b[3];var p=Math.sin(c);c=Math.cos(c);return e[0]=f*c+l*p,e[1]=h*c+b*p,e[2]=f*-p+l*c,e[3]=h*-p+b*c,e};d.scale=function(e,b,c){var f=b[1],h=b[2],l=b[3],p=c[0];c=c[1];return e[0]=b[0]*p,e[1]=f*p,e[2]=h*c,e[3]=l*c,e};d.fromRotation=function(e,b){var c=Math.sin(b);b=Math.cos(b);
return e[0]=b,e[1]=c,e[2]=-c,e[3]=b,e};d.fromScaling=function(e,b){return e[0]=b[0],e[1]=0,e[2]=0,e[3]=b[1],e};d.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};d.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))};d.LDU=function(e,b,c,f){return e[2]=f[2]/f[0],c[0]=f[0],c[1]=f[1],c[3]=f[3]-e[2]*c[1],[e,b,c]};a.exports=d},function(a,d,g){var m=g(1);d={create:function(){var e=new m.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=
1,e[4]=0,e[5]=0,e},clone:function(e){var b=new m.ARRAY_TYPE(6);return b[0]=e[0],b[1]=e[1],b[2]=e[2],b[3]=e[3],b[4]=e[4],b[5]=e[5],b},copy:function(e,b){return e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=b[3],e[4]=b[4],e[5]=b[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,b){var c=b[0],f=b[1],h=b[2],l=b[3],p=b[4];b=b[5];var k=c*l-f*h;return k?(k=1/k,e[0]=l*k,e[1]=-f*k,e[2]=-h*k,e[3]=c*k,e[4]=(h*b-l*p)*k,e[5]=(f*p-c*b)*k,e):null},determinant:function(e){return e[0]*
e[3]-e[1]*e[2]},multiply:function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4];b=b[5];var t=c[0],u=c[1],v=c[2],w=c[3],z=c[4];c=c[5];return e[0]=f*t+l*u,e[1]=h*t+p*u,e[2]=f*v+l*w,e[3]=h*v+p*w,e[4]=f*z+l*c+k,e[5]=h*z+p*c+b,e}};d.mul=d.multiply;d.rotate=function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4];b=b[5];var t=Math.sin(c);c=Math.cos(c);return e[0]=f*c+l*t,e[1]=h*c+p*t,e[2]=f*-t+l*c,e[3]=h*-t+p*c,e[4]=k,e[5]=b,e};d.scale=function(e,b,c){var f=b[1],h=b[2],l=b[3],p=b[4],k=b[5],t=c[0];c=c[1];
return e[0]=b[0]*t,e[1]=f*t,e[2]=h*c,e[3]=l*c,e[4]=p,e[5]=k,e};d.translate=function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4];b=b[5];var t=c[0];c=c[1];return e[0]=f,e[1]=h,e[2]=l,e[3]=p,e[4]=f*t+l*c+k,e[5]=h*t+p*c+b,e};d.fromRotation=function(e,b){var c=Math.sin(b);b=Math.cos(b);return e[0]=b,e[1]=c,e[2]=-c,e[3]=b,e[4]=0,e[5]=0,e};d.fromScaling=function(e,b){return e[0]=b[0],e[1]=0,e[2]=0,e[3]=b[1],e[4]=0,e[5]=0,e};d.fromTranslation=function(e,b){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=b[0],e[5]=
b[1],e};d.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"};d.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};a.exports=d},function(a,d,g){var m=g(1);d={create:function(){var e=new m.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,b){return e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=b[4],e[4]=b[5],e[5]=b[6],e[6]=b[8],
e[7]=b[9],e[8]=b[10],e},clone:function(e){var b=new m.ARRAY_TYPE(9);return b[0]=e[0],b[1]=e[1],b[2]=e[2],b[3]=e[3],b[4]=e[4],b[5]=e[5],b[6]=e[6],b[7]=e[7],b[8]=e[8],b},copy:function(e,b){return e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=b[3],e[4]=b[4],e[5]=b[5],e[6]=b[6],e[7]=b[7],e[8]=b[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,b){if(e===b){var c=b[1],f=b[2],h=b[5];e[1]=b[3];e[2]=b[6];e[3]=c;e[5]=b[7];e[6]=f;e[7]=h}else e[0]=
b[0],e[1]=b[3],e[2]=b[6],e[3]=b[1],e[4]=b[4],e[5]=b[7],e[6]=b[2],e[7]=b[5],e[8]=b[8];return e},invert:function(e,b){var c=b[0],f=b[1],h=b[2],l=b[3],p=b[4],k=b[5],t=b[6],u=b[7];b=b[8];var v=b*p-k*u,w=-b*l+k*t,z=u*l-p*t,y=c*v+f*w+h*z;return y?(y=1/y,e[0]=v*y,e[1]=(-b*f+h*u)*y,e[2]=(k*f-h*p)*y,e[3]=w*y,e[4]=(b*c-h*t)*y,e[5]=(-k*c+h*l)*y,e[6]=z*y,e[7]=(-u*c+f*t)*y,e[8]=(p*c-f*l)*y,e):null},adjoint:function(e,b){var c=b[0],f=b[1],h=b[2],l=b[3],p=b[4],k=b[5],t=b[6],u=b[7];b=b[8];return e[0]=p*b-k*u,e[1]=
h*u-f*b,e[2]=f*k-h*p,e[3]=k*t-l*b,e[4]=c*b-h*t,e[5]=h*l-c*k,e[6]=l*u-p*t,e[7]=f*t-c*u,e[8]=c*p-f*l,e},determinant:function(e){var b=e[3],c=e[4],f=e[5],h=e[6],l=e[7],p=e[8];return e[0]*(p*c-f*l)+e[1]*(-p*b+f*h)+e[2]*(l*b-c*h)},multiply:function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4],t=b[5],u=b[6],v=b[7];b=b[8];var w=c[0],z=c[1],y=c[2],D=c[3],G=c[4],K=c[5],C=c[6],R=c[7];c=c[8];return e[0]=w*f+z*p+y*u,e[1]=w*h+z*k+y*v,e[2]=w*l+z*t+y*b,e[3]=D*f+G*p+K*u,e[4]=D*h+G*k+K*v,e[5]=D*l+G*t+K*b,e[6]=C*
f+R*p+c*u,e[7]=C*h+R*k+c*v,e[8]=C*l+R*t+c*b,e}};d.mul=d.multiply;d.translate=function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4],t=b[5],u=b[6],v=b[7];b=b[8];var w=c[0];c=c[1];return e[0]=f,e[1]=h,e[2]=l,e[3]=p,e[4]=k,e[5]=t,e[6]=w*f+c*p+u,e[7]=w*h+c*k+v,e[8]=w*l+c*t+b,e};d.rotate=function(e,b,c){var f=b[0],h=b[1],l=b[2],p=b[3],k=b[4],t=b[5],u=b[6],v=b[7];b=b[8];var w=Math.sin(c);c=Math.cos(c);return e[0]=c*f+w*p,e[1]=c*h+w*k,e[2]=c*l+w*t,e[3]=c*p-w*f,e[4]=c*k-w*h,e[5]=c*t-w*l,e[6]=u,e[7]=v,e[8]=
b,e};d.scale=function(e,b,c){var f=c[0];c=c[1];return e[0]=f*b[0],e[1]=f*b[1],e[2]=f*b[2],e[3]=c*b[3],e[4]=c*b[4],e[5]=c*b[5],e[6]=b[6],e[7]=b[7],e[8]=b[8],e};d.fromTranslation=function(e,b){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=b[0],e[7]=b[1],e[8]=1,e};d.fromRotation=function(e,b){var c=Math.sin(b);b=Math.cos(b);return e[0]=b,e[1]=c,e[2]=0,e[3]=-c,e[4]=b,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};d.fromScaling=function(e,b){return e[0]=b[0],e[1]=0,e[2]=0,e[3]=0,e[4]=b[1],e[5]=0,e[6]=0,e[7]=0,
e[8]=1,e};d.fromMat2d=function(e,b){return e[0]=b[0],e[1]=b[1],e[2]=0,e[3]=b[2],e[4]=b[3],e[5]=0,e[6]=b[4],e[7]=b[5],e[8]=1,e};d.fromQuat=function(e,b){var c=b[0],f=b[1],h=b[2];b=b[3];var l=c+c,p=f+f,k=h+h;c*=l;var t=f*l;f*=p;var u=h*l,v=h*p;h*=k;l*=b;p*=b;b*=k;return e[0]=1-f-h,e[3]=t-b,e[6]=u+p,e[1]=t+b,e[4]=1-c-h,e[7]=v-l,e[2]=u-p,e[5]=v+l,e[8]=1-c-f,e};d.normalFromMat4=function(e,b){var c=b[0],f=b[1],h=b[2],l=b[3],p=b[4],k=b[5],t=b[6],u=b[7],v=b[8],w=b[9],z=b[10],y=b[11],D=b[12],G=b[13],K=b[14];
b=b[15];var C=c*k-f*p,R=c*t-h*p,E=c*u-l*p,x=f*t-h*k,I=f*u-l*k,r=h*u-l*t,B=v*G-w*D,W=v*K-z*D;v=v*b-y*D;var S=w*K-z*G;w=w*b-y*G;z=z*b-y*K;return(y=C*z-R*w+E*S+x*v-I*W+r*B)?(y=1/y,e[0]=(k*z-t*w+u*S)*y,e[1]=(t*v-p*z-u*W)*y,e[2]=(p*w-k*v+u*B)*y,e[3]=(h*w-f*z-l*S)*y,e[4]=(c*z-h*v+l*W)*y,e[5]=(f*v-c*w-l*B)*y,e[6]=(G*r-K*I+b*x)*y,e[7]=(K*E-D*r-b*R)*y,e[8]=(D*I-G*E+b*C)*y,e):null};d.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"};d.frob=
function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))};a.exports=d},function(a,d,g){var m=g(1),e={create:function(){var b=new m.ARRAY_TYPE(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},clone:function(b){var c=new m.ARRAY_TYPE(16);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],
c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15],c},copy:function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b},identity:function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},transpose:function(b,c){if(b===
c){var f=c[1],h=c[2],l=c[3],p=c[6],k=c[7],t=c[11];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=f;b[6]=c[9];b[7]=c[13];b[8]=h;b[9]=p;b[11]=c[14];b[12]=l;b[13]=k;b[14]=t}else b[0]=c[0],b[1]=c[4],b[2]=c[8],b[3]=c[12],b[4]=c[1],b[5]=c[5],b[6]=c[9],b[7]=c[13],b[8]=c[2],b[9]=c[6],b[10]=c[10],b[11]=c[14],b[12]=c[3],b[13]=c[7],b[14]=c[11],b[15]=c[15];return b},invert:function(b,c){var f=c[0],h=c[1],l=c[2],p=c[3],k=c[4],t=c[5],u=c[6],v=c[7],w=c[8],z=c[9],y=c[10],D=c[11],G=c[12],K=c[13],C=c[14];c=c[15];var R=f*t-h*
k,E=f*u-l*k,x=f*v-p*k,I=h*u-l*t,r=h*v-p*t,B=l*v-p*u,W=w*K-z*G,S=w*C-y*G,X=w*c-D*G,V=z*C-y*K,Q=z*c-D*K,ba=y*c-D*C,U=R*ba-E*Q+x*V+I*X-r*S+B*W;return U?(U=1/U,b[0]=(t*ba-u*Q+v*V)*U,b[1]=(l*Q-h*ba-p*V)*U,b[2]=(K*B-C*r+c*I)*U,b[3]=(y*r-z*B-D*I)*U,b[4]=(u*X-k*ba-v*S)*U,b[5]=(f*ba-l*X+p*S)*U,b[6]=(C*x-G*B-c*E)*U,b[7]=(w*B-y*x+D*E)*U,b[8]=(k*Q-t*X+v*W)*U,b[9]=(h*X-f*Q-p*W)*U,b[10]=(G*r-K*x+c*R)*U,b[11]=(z*x-w*r-D*R)*U,b[12]=(t*S-k*V-u*W)*U,b[13]=(f*V-h*S+l*W)*U,b[14]=(K*E-G*I-C*R)*U,b[15]=(w*I-z*E+y*R)*U,
b):null},adjoint:function(b,c){var f=c[0],h=c[1],l=c[2],p=c[3],k=c[4],t=c[5],u=c[6],v=c[7],w=c[8],z=c[9],y=c[10],D=c[11],G=c[12],K=c[13],C=c[14];c=c[15];return b[0]=t*(y*c-D*C)-z*(u*c-v*C)+K*(u*D-v*y),b[1]=-(h*(y*c-D*C)-z*(l*c-p*C)+K*(l*D-p*y)),b[2]=h*(u*c-v*C)-t*(l*c-p*C)+K*(l*v-p*u),b[3]=-(h*(u*D-v*y)-t*(l*D-p*y)+z*(l*v-p*u)),b[4]=-(k*(y*c-D*C)-w*(u*c-v*C)+G*(u*D-v*y)),b[5]=f*(y*c-D*C)-w*(l*c-p*C)+G*(l*D-p*y),b[6]=-(f*(u*c-v*C)-k*(l*c-p*C)+G*(l*v-p*u)),b[7]=f*(u*D-v*y)-k*(l*D-p*y)+w*(l*v-p*u),b[8]=
k*(z*c-D*K)-w*(t*c-v*K)+G*(t*D-v*z),b[9]=-(f*(z*c-D*K)-w*(h*c-p*K)+G*(h*D-p*z)),b[10]=f*(t*c-v*K)-k*(h*c-p*K)+G*(h*v-p*t),b[11]=-(f*(t*D-v*z)-k*(h*D-p*z)+w*(h*v-p*t)),b[12]=-(k*(z*C-y*K)-w*(t*C-u*K)+G*(t*y-u*z)),b[13]=f*(z*C-y*K)-w*(h*C-l*K)+G*(h*y-l*z),b[14]=-(f*(t*C-u*K)-k*(h*C-l*K)+G*(h*u-l*t)),b[15]=f*(t*y-u*z)-k*(h*y-l*z)+w*(h*u-l*t),b},determinant:function(b){var c=b[0],f=b[1],h=b[2],l=b[3],p=b[4],k=b[5],t=b[6],u=b[7],v=b[8],w=b[9],z=b[10],y=b[11],D=b[12],G=b[13],K=b[14];b=b[15];return(c*k-
f*p)*(z*b-y*K)-(c*t-h*p)*(w*b-y*G)+(c*u-l*p)*(w*K-z*G)+(f*t-h*k)*(v*b-y*D)-(f*u-l*k)*(v*K-z*D)+(h*u-l*t)*(v*G-w*D)},multiply:function(b,c,f){var h=c[0],l=c[1],p=c[2],k=c[3],t=c[4],u=c[5],v=c[6],w=c[7],z=c[8],y=c[9],D=c[10],G=c[11],K=c[12],C=c[13],R=c[14];c=c[15];var E=f[0],x=f[1],I=f[2],r=f[3];return b[0]=E*h+x*t+I*z+r*K,b[1]=E*l+x*u+I*y+r*C,b[2]=E*p+x*v+I*D+r*R,b[3]=E*k+x*w+I*G+r*c,E=f[4],x=f[5],I=f[6],r=f[7],b[4]=E*h+x*t+I*z+r*K,b[5]=E*l+x*u+I*y+r*C,b[6]=E*p+x*v+I*D+r*R,b[7]=E*k+x*w+I*G+r*c,E=f[8],
x=f[9],I=f[10],r=f[11],b[8]=E*h+x*t+I*z+r*K,b[9]=E*l+x*u+I*y+r*C,b[10]=E*p+x*v+I*D+r*R,b[11]=E*k+x*w+I*G+r*c,E=f[12],x=f[13],I=f[14],r=f[15],b[12]=E*h+x*t+I*z+r*K,b[13]=E*l+x*u+I*y+r*C,b[14]=E*p+x*v+I*D+r*R,b[15]=E*k+x*w+I*G+r*c,b}};e.mul=e.multiply;e.translate=function(b,c,f){var h,l,p,k,t,u,v,w,z,y,D,G,K=f[0],C=f[1];f=f[2];return c===b?(b[12]=c[0]*K+c[4]*C+c[8]*f+c[12],b[13]=c[1]*K+c[5]*C+c[9]*f+c[13],b[14]=c[2]*K+c[6]*C+c[10]*f+c[14],b[15]=c[3]*K+c[7]*C+c[11]*f+c[15]):(h=c[0],l=c[1],p=c[2],k=c[3],
t=c[4],u=c[5],v=c[6],w=c[7],z=c[8],y=c[9],D=c[10],G=c[11],b[0]=h,b[1]=l,b[2]=p,b[3]=k,b[4]=t,b[5]=u,b[6]=v,b[7]=w,b[8]=z,b[9]=y,b[10]=D,b[11]=G,b[12]=h*K+t*C+z*f+c[12],b[13]=l*K+u*C+y*f+c[13],b[14]=p*K+v*C+D*f+c[14],b[15]=k*K+w*C+G*f+c[15]),b};e.scale=function(b,c,f){var h=f[0],l=f[1];f=f[2];return b[0]=c[0]*h,b[1]=c[1]*h,b[2]=c[2]*h,b[3]=c[3]*h,b[4]=c[4]*l,b[5]=c[5]*l,b[6]=c[6]*l,b[7]=c[7]*l,b[8]=c[8]*f,b[9]=c[9]*f,b[10]=c[10]*f,b[11]=c[11]*f,b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b};e.rotate=
function(b,c,f,h){var l,p,k,t,u,v,w,z,y,D,G,K,C,R,E,x,I,r,B,W,S,X,V,Q,ba=h[0],U=h[1];h=h[2];var da=Math.sqrt(ba*ba+U*U+h*h);return Math.abs(da)<m.EPSILON?null:(da=1/da,ba*=da,U*=da,h*=da,l=Math.sin(f),p=Math.cos(f),k=1-p,t=c[0],u=c[1],v=c[2],w=c[3],z=c[4],y=c[5],D=c[6],G=c[7],K=c[8],C=c[9],R=c[10],E=c[11],x=ba*ba*k+p,I=U*ba*k+h*l,r=h*ba*k-U*l,B=ba*U*k-h*l,W=U*U*k+p,S=h*U*k+ba*l,X=ba*h*k+U*l,V=U*h*k-ba*l,Q=h*h*k+p,b[0]=t*x+z*I+K*r,b[1]=u*x+y*I+C*r,b[2]=v*x+D*I+R*r,b[3]=w*x+G*I+E*r,b[4]=t*B+z*W+K*S,
b[5]=u*B+y*W+C*S,b[6]=v*B+D*W+R*S,b[7]=w*B+G*W+E*S,b[8]=t*X+z*V+K*Q,b[9]=u*X+y*V+C*Q,b[10]=v*X+D*V+R*Q,b[11]=w*X+G*V+E*Q,c!==b&&(b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b)};e.rotateX=function(b,c,f){var h=Math.sin(f);f=Math.cos(f);var l=c[4],p=c[5],k=c[6],t=c[7],u=c[8],v=c[9],w=c[10],z=c[11];return c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[4]=l*f+u*h,b[5]=p*f+v*h,b[6]=k*f+w*h,b[7]=t*f+z*h,b[8]=u*f-l*h,b[9]=v*f-p*h,b[10]=w*f-k*h,b[11]=
z*f-t*h,b};e.rotateY=function(b,c,f){var h=Math.sin(f);f=Math.cos(f);var l=c[0],p=c[1],k=c[2],t=c[3],u=c[8],v=c[9],w=c[10],z=c[11];return c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[0]=l*f-u*h,b[1]=p*f-v*h,b[2]=k*f-w*h,b[3]=t*f-z*h,b[8]=l*h+u*f,b[9]=p*h+v*f,b[10]=k*h+w*f,b[11]=t*h+z*f,b};e.rotateZ=function(b,c,f){var h=Math.sin(f);f=Math.cos(f);var l=c[0],p=c[1],k=c[2],t=c[3],u=c[4],v=c[5],w=c[6],z=c[7];return c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=
c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[0]=l*f+u*h,b[1]=p*f+v*h,b[2]=k*f+w*h,b[3]=t*f+z*h,b[4]=u*f-l*h,b[5]=v*f-p*h,b[6]=w*f-k*h,b[7]=z*f-t*h,b};e.fromTranslation=function(b,c){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b};e.fromScaling=function(b,c){return b[0]=c[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=c[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=
1,b};e.fromRotation=function(b,c,f){var h,l,p,k=f[0],t=f[1];f=f[2];var u=Math.sqrt(k*k+t*t+f*f);return Math.abs(u)<m.EPSILON?null:(u=1/u,k*=u,t*=u,f*=u,h=Math.sin(c),l=Math.cos(c),p=1-l,b[0]=k*k*p+l,b[1]=t*k*p+f*h,b[2]=f*k*p-t*h,b[3]=0,b[4]=k*t*p-f*h,b[5]=t*t*p+l,b[6]=f*t*p+k*h,b[7]=0,b[8]=k*f*p+t*h,b[9]=t*f*p-k*h,b[10]=f*f*p+l,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)};e.fromXRotation=function(b,c){var f=Math.sin(c);c=Math.cos(c);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c,b[6]=f,b[7]=0,b[8]=
0,b[9]=-f,b[10]=c,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};e.fromYRotation=function(b,c){var f=Math.sin(c);c=Math.cos(c);return b[0]=c,b[1]=0,b[2]=-f,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=f,b[9]=0,b[10]=c,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};e.fromZRotation=function(b,c){var f=Math.sin(c);c=Math.cos(c);return b[0]=c,b[1]=f,b[2]=0,b[3]=0,b[4]=-f,b[5]=c,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};e.fromRotationTranslation=function(b,c,f){var h=c[0],l=c[1],
p=c[2],k=c[3],t=h+h,u=l+l,v=p+p;c=h*t;var w=h*u;h*=v;var z=l*u;l*=v;p*=v;t*=k;u*=k;k*=v;return b[0]=1-(z+p),b[1]=w+k,b[2]=h-u,b[3]=0,b[4]=w-k,b[5]=1-(c+p),b[6]=l+t,b[7]=0,b[8]=h+u,b[9]=l-t,b[10]=1-(c+z),b[11]=0,b[12]=f[0],b[13]=f[1],b[14]=f[2],b[15]=1,b};e.fromRotationTranslationScale=function(b,c,f,h){var l=c[0],p=c[1],k=c[2],t=c[3],u=l+l,v=p+p,w=k+k;c=l*u;var z=l*v;l*=w;var y=p*v;p*=w;k*=w;u*=t;v*=t;t*=w;w=h[0];var D=h[1];h=h[2];return b[0]=(1-(y+k))*w,b[1]=(z+t)*w,b[2]=(l-v)*w,b[3]=0,b[4]=(z-t)*
D,b[5]=(1-(c+k))*D,b[6]=(p+u)*D,b[7]=0,b[8]=(l+v)*h,b[9]=(p-u)*h,b[10]=(1-(c+y))*h,b[11]=0,b[12]=f[0],b[13]=f[1],b[14]=f[2],b[15]=1,b};e.fromRotationTranslationScaleOrigin=function(b,c,f,h,l){var p=c[0],k=c[1],t=c[2],u=c[3],v=p+p,w=k+k,z=t+t;c=p*v;var y=p*w;p*=z;var D=k*w;k*=z;t*=z;v*=u;w*=u;u*=z;z=h[0];var G=h[1];h=h[2];var K=l[0],C=l[1];l=l[2];return b[0]=(1-(D+t))*z,b[1]=(y+u)*z,b[2]=(p-w)*z,b[3]=0,b[4]=(y-u)*G,b[5]=(1-(c+t))*G,b[6]=(k+v)*G,b[7]=0,b[8]=(p+w)*h,b[9]=(k-v)*h,b[10]=(1-(c+D))*h,b[11]=
0,b[12]=f[0]+K-(b[0]*K+b[4]*C+b[8]*l),b[13]=f[1]+C-(b[1]*K+b[5]*C+b[9]*l),b[14]=f[2]+l-(b[2]*K+b[6]*C+b[10]*l),b[15]=1,b};e.fromQuat=function(b,c){var f=c[0],h=c[1],l=c[2];c=c[3];var p=f+f,k=h+h,t=l+l;f*=p;var u=h*p;h*=k;var v=l*p,w=l*k;l*=t;p*=c;k*=c;c*=t;return b[0]=1-h-l,b[1]=u+c,b[2]=v-k,b[3]=0,b[4]=u-c,b[5]=1-f-l,b[6]=w+p,b[7]=0,b[8]=v+k,b[9]=w-p,b[10]=1-f-h,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};e.frustum=function(b,c,f,h,l,p,k){var t=1/(f-c),u=1/(l-h),v=1/(p-k);return b[0]=2*p*t,b[1]=0,
b[2]=0,b[3]=0,b[4]=0,b[5]=2*p*u,b[6]=0,b[7]=0,b[8]=(f+c)*t,b[9]=(l+h)*u,b[10]=(k+p)*v,b[11]=-1,b[12]=0,b[13]=0,b[14]=k*p*2*v,b[15]=0,b};e.perspective=function(b,c,f,h,l){c=1/Math.tan(c/2);var p=1/(h-l);return b[0]=c/f,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(l+h)*p,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*l*h*p,b[15]=0,b};e.perspectiveFromFieldOfView=function(b,c,f,h){var l=Math.tan(c.upDegrees*Math.PI/180),p=Math.tan(c.downDegrees*Math.PI/180),k=Math.tan(c.leftDegrees*Math.PI/
180);c=Math.tan(c.rightDegrees*Math.PI/180);var t=2/(k+c),u=2/(l+p);return b[0]=t,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=u,b[6]=0,b[7]=0,b[8]=-((k-c)*t*.5),b[9]=(l-p)*u*.5,b[10]=h/(f-h),b[11]=-1,b[12]=0,b[13]=0,b[14]=h*f/(f-h),b[15]=0,b};e.ortho=function(b,c,f,h,l,p,k){var t=1/(c-f),u=1/(h-l),v=1/(p-k);return b[0]=-2*t,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*u,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*v,b[11]=0,b[12]=(c+f)*t,b[13]=(l+h)*u,b[14]=(k+p)*v,b[15]=1,b};e.lookAt=function(b,c,f,h){var l,p,k,t,u,v,w,z,y,
D,G=c[0],K=c[1];c=c[2];var C=h[0],R=h[1];h=h[2];var E=f[0],x=f[1];f=f[2];return Math.abs(G-E)<m.EPSILON&&Math.abs(K-x)<m.EPSILON&&Math.abs(c-f)<m.EPSILON?e.identity(b):(w=G-E,z=K-x,y=c-f,D=1/Math.sqrt(w*w+z*z+y*y),w*=D,z*=D,y*=D,l=R*y-h*z,p=h*w-C*y,k=C*z-R*w,D=Math.sqrt(l*l+p*p+k*k),D?(D=1/D,l*=D,p*=D,k*=D):(l=0,p=0,k=0),t=z*k-y*p,u=y*l-w*k,v=w*p-z*l,D=Math.sqrt(t*t+u*u+v*v),D?(D=1/D,t*=D,u*=D,v*=D):(t=0,u=0,v=0),b[0]=l,b[1]=t,b[2]=w,b[3]=0,b[4]=p,b[5]=u,b[6]=z,b[7]=0,b[8]=k,b[9]=v,b[10]=y,b[11]=
0,b[12]=-(l*G+p*K+k*c),b[13]=-(t*G+u*K+v*c),b[14]=-(w*G+z*K+y*c),b[15]=1,b)};e.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],
2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};a.exports=e},function(a,d,g){var m=g(1),e=g(4),b=g(7);d=g(8);var c={create:function(){var f=new m.ARRAY_TYPE(4);return f[0]=0,f[1]=0,f[2]=0,f[3]=1,f}};c.rotationTo=function(){var f=b.create(),h=b.fromValues(1,0,0),l=b.fromValues(0,1,0);return function(p,k,t){var u=b.dot(k,t);return-.999999>u?(b.cross(f,h,k),1E-6>b.length(f)&&b.cross(f,l,k),b.normalize(f,f),c.setAxisAngle(p,f,Math.PI),p):.999999<u?(p[0]=0,p[1]=0,p[2]=0,p[3]=
1,p):(b.cross(f,k,t),p[0]=f[0],p[1]=f[1],p[2]=f[2],p[3]=1+u,c.normalize(p,p))}}();c.setAxes=function(){var f=e.create();return function(h,l,p,k){return f[0]=p[0],f[3]=p[1],f[6]=p[2],f[1]=k[0],f[4]=k[1],f[7]=k[2],f[2]=-l[0],f[5]=-l[1],f[8]=-l[2],c.normalize(h,c.fromMat3(h,f))}}();c.clone=d.clone;c.fromValues=d.fromValues;c.copy=d.copy;c.set=d.set;c.identity=function(f){return f[0]=0,f[1]=0,f[2]=0,f[3]=1,f};c.setAxisAngle=function(f,h,l){l*=.5;var p=Math.sin(l);return f[0]=p*h[0],f[1]=p*h[1],f[2]=p*
h[2],f[3]=Math.cos(l),f};c.add=d.add;c.multiply=function(f,h,l){var p=h[0],k=h[1],t=h[2];h=h[3];var u=l[0],v=l[1],w=l[2];l=l[3];return f[0]=p*l+h*u+k*w-t*v,f[1]=k*l+h*v+t*u-p*w,f[2]=t*l+h*w+p*v-k*u,f[3]=h*l-p*u-k*v-t*w,f};c.mul=c.multiply;c.scale=d.scale;c.rotateX=function(f,h,l){l*=.5;var p=h[0],k=h[1],t=h[2];h=h[3];var u=Math.sin(l);l=Math.cos(l);return f[0]=p*l+h*u,f[1]=k*l+t*u,f[2]=t*l-k*u,f[3]=h*l-p*u,f};c.rotateY=function(f,h,l){l*=.5;var p=h[0],k=h[1],t=h[2];h=h[3];var u=Math.sin(l);l=Math.cos(l);
return f[0]=p*l-t*u,f[1]=k*l+h*u,f[2]=t*l+p*u,f[3]=h*l-k*u,f};c.rotateZ=function(f,h,l){l*=.5;var p=h[0],k=h[1],t=h[2];h=h[3];var u=Math.sin(l);l=Math.cos(l);return f[0]=p*l+k*u,f[1]=k*l-p*u,f[2]=t*l+h*u,f[3]=h*l-t*u,f};c.calculateW=function(f,h){var l=h[0],p=h[1];h=h[2];return f[0]=l,f[1]=p,f[2]=h,f[3]=Math.sqrt(Math.abs(1-l*l-p*p-h*h)),f};c.dot=d.dot;c.lerp=d.lerp;c.slerp=function(f,h,l,p){var k,t,u,v,w,z=h[0],y=h[1],D=h[2];h=h[3];var G=l[0],K=l[1],C=l[2];l=l[3];return t=z*G+y*K+D*C+h*l,0>t&&(t=
-t,G=-G,K=-K,C=-C,l=-l),1E-6<1-t?(k=Math.acos(t),u=Math.sin(k),v=Math.sin((1-p)*k)/u,w=Math.sin(p*k)/u):(v=1-p,w=p),f[0]=v*z+w*G,f[1]=v*y+w*K,f[2]=v*D+w*C,f[3]=v*h+w*l,f};c.sqlerp=function(){var f=c.create(),h=c.create();return function(l,p,k,t,u,v){return c.slerp(f,p,u,v),c.slerp(h,k,t,v),c.slerp(l,f,h,2*v*(1-v)),l}}();c.invert=function(f,h){var l=h[0],p=h[1],k=h[2];h=h[3];var t=l*l+p*p+k*k+h*h;t=t?1/t:0;return f[0]=-l*t,f[1]=-p*t,f[2]=-k*t,f[3]=h*t,f};c.conjugate=function(f,h){return f[0]=-h[0],
f[1]=-h[1],f[2]=-h[2],f[3]=h[3],f};c.length=d.length;c.len=c.length;c.squaredLength=d.squaredLength;c.sqrLen=c.squaredLength;c.normalize=d.normalize;c.fromMat3=function(f,h){var l=h[0]+h[4]+h[8];if(0<l)l=Math.sqrt(l+1),f[3]=.5*l,l=.5/l,f[0]=(h[5]-h[7])*l,f[1]=(h[6]-h[2])*l,f[2]=(h[1]-h[3])*l;else{var p=0;h[4]>h[0]&&(p=1);h[8]>h[3*p+p]&&(p=2);var k=(p+1)%3,t=(p+2)%3;l=Math.sqrt(h[3*p+p]-h[3*k+k]-h[3*t+t]+1);f[p]=.5*l;l=.5/l;f[3]=(h[3*k+t]-h[3*t+k])*l;f[k]=(h[3*k+p]+h[3*p+k])*l;f[t]=(h[3*t+p]+h[3*p+
t])*l}return f};c.str=function(f){return"quat("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"};a.exports=c},function(a,d,g){var m=g(1),e={create:function(){var b=new m.ARRAY_TYPE(3);return b[0]=0,b[1]=0,b[2]=0,b},clone:function(b){var c=new m.ARRAY_TYPE(3);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c},fromValues:function(b,c,f){var h=new m.ARRAY_TYPE(3);return h[0]=b,h[1]=c,h[2]=f,h},copy:function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b},set:function(b,c,f,h){return b[0]=c,b[1]=f,b[2]=h,b},add:function(b,
c,f){return b[0]=c[0]+f[0],b[1]=c[1]+f[1],b[2]=c[2]+f[2],b},subtract:function(b,c,f){return b[0]=c[0]-f[0],b[1]=c[1]-f[1],b[2]=c[2]-f[2],b}};e.sub=e.subtract;e.multiply=function(b,c,f){return b[0]=c[0]*f[0],b[1]=c[1]*f[1],b[2]=c[2]*f[2],b};e.mul=e.multiply;e.divide=function(b,c,f){return b[0]=c[0]/f[0],b[1]=c[1]/f[1],b[2]=c[2]/f[2],b};e.div=e.divide;e.min=function(b,c,f){return b[0]=Math.min(c[0],f[0]),b[1]=Math.min(c[1],f[1]),b[2]=Math.min(c[2],f[2]),b};e.max=function(b,c,f){return b[0]=Math.max(c[0],
f[0]),b[1]=Math.max(c[1],f[1]),b[2]=Math.max(c[2],f[2]),b};e.scale=function(b,c,f){return b[0]=c[0]*f,b[1]=c[1]*f,b[2]=c[2]*f,b};e.scaleAndAdd=function(b,c,f,h){return b[0]=c[0]+f[0]*h,b[1]=c[1]+f[1]*h,b[2]=c[2]+f[2]*h,b};e.distance=function(b,c){var f=c[0]-b[0],h=c[1]-b[1];b=c[2]-b[2];return Math.sqrt(f*f+h*h+b*b)};e.dist=e.distance;e.squaredDistance=function(b,c){var f=c[0]-b[0],h=c[1]-b[1];b=c[2]-b[2];return f*f+h*h+b*b};e.sqrDist=e.squaredDistance;e.length=function(b){var c=b[0],f=b[1];b=b[2];
return Math.sqrt(c*c+f*f+b*b)};e.len=e.length;e.squaredLength=function(b){var c=b[0],f=b[1];b=b[2];return c*c+f*f+b*b};e.sqrLen=e.squaredLength;e.negate=function(b,c){return b[0]=-c[0],b[1]=-c[1],b[2]=-c[2],b};e.inverse=function(b,c){return b[0]=1/c[0],b[1]=1/c[1],b[2]=1/c[2],b};e.normalize=function(b,c){var f=c[0],h=c[1],l=c[2];f=f*f+h*h+l*l;return 0<f&&(f=1/Math.sqrt(f),b[0]=c[0]*f,b[1]=c[1]*f,b[2]=c[2]*f),b};e.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]};e.cross=function(b,c,f){var h=
c[0],l=c[1];c=c[2];var p=f[0],k=f[1];f=f[2];return b[0]=l*f-c*k,b[1]=c*p-h*f,b[2]=h*k-l*p,b};e.lerp=function(b,c,f,h){var l=c[0],p=c[1];c=c[2];return b[0]=l+h*(f[0]-l),b[1]=p+h*(f[1]-p),b[2]=c+h*(f[2]-c),b};e.hermite=function(b,c,f,h,l,p){var k=p*p,t=k*(2*p-3)+1,u=k*(p-2)+p,v=k*(p-1);p=k*(3-2*p);return b[0]=c[0]*t+f[0]*u+h[0]*v+l[0]*p,b[1]=c[1]*t+f[1]*u+h[1]*v+l[1]*p,b[2]=c[2]*t+f[2]*u+h[2]*v+l[2]*p,b};e.bezier=function(b,c,f,h,l,p){var k=1-p,t=k*k,u=p*p,v=t*k;t*=3*p;k*=3*u;p*=u;return b[0]=c[0]*
v+f[0]*t+h[0]*k+l[0]*p,b[1]=c[1]*v+f[1]*t+h[1]*k+l[1]*p,b[2]=c[2]*v+f[2]*t+h[2]*k+l[2]*p,b};e.random=function(b,c){c=c||1;var f=2*m.RANDOM()*Math.PI,h=2*m.RANDOM()-1,l=Math.sqrt(1-h*h)*c;return b[0]=Math.cos(f)*l,b[1]=Math.sin(f)*l,b[2]=h*c,b};e.transformMat4=function(b,c,f){var h=c[0],l=c[1];c=c[2];var p=f[3]*h+f[7]*l+f[11]*c+f[15];return p=p||1,b[0]=(f[0]*h+f[4]*l+f[8]*c+f[12])/p,b[1]=(f[1]*h+f[5]*l+f[9]*c+f[13])/p,b[2]=(f[2]*h+f[6]*l+f[10]*c+f[14])/p,b};e.transformMat3=function(b,c,f){var h=c[0],
l=c[1];c=c[2];return b[0]=h*f[0]+l*f[3]+c*f[6],b[1]=h*f[1]+l*f[4]+c*f[7],b[2]=h*f[2]+l*f[5]+c*f[8],b};e.transformQuat=function(b,c,f){var h=c[0],l=c[1],p=c[2];c=f[0];var k=f[1],t=f[2];f=f[3];var u=f*h+k*p-t*l,v=f*l+t*h-c*p,w=f*p+c*l-k*h;h=-c*h-k*l-t*p;return b[0]=u*f+h*-c+v*-t-w*-k,b[1]=v*f+h*-k+w*-c-u*-t,b[2]=w*f+h*-t+u*-k-v*-c,b};e.rotateX=function(b,c,f,h){var l=[],p=[];return l[0]=c[0]-f[0],l[1]=c[1]-f[1],l[2]=c[2]-f[2],p[0]=l[0],p[1]=l[1]*Math.cos(h)-l[2]*Math.sin(h),p[2]=l[1]*Math.sin(h)+l[2]*
Math.cos(h),b[0]=p[0]+f[0],b[1]=p[1]+f[1],b[2]=p[2]+f[2],b};e.rotateY=function(b,c,f,h){var l=[],p=[];return l[0]=c[0]-f[0],l[1]=c[1]-f[1],l[2]=c[2]-f[2],p[0]=l[2]*Math.sin(h)+l[0]*Math.cos(h),p[1]=l[1],p[2]=l[2]*Math.cos(h)-l[0]*Math.sin(h),b[0]=p[0]+f[0],b[1]=p[1]+f[1],b[2]=p[2]+f[2],b};e.rotateZ=function(b,c,f,h){var l=[],p=[];return l[0]=c[0]-f[0],l[1]=c[1]-f[1],l[2]=c[2]-f[2],p[0]=l[0]*Math.cos(h)-l[1]*Math.sin(h),p[1]=l[0]*Math.sin(h)+l[1]*Math.cos(h),p[2]=l[2],b[0]=p[0]+f[0],b[1]=p[1]+f[1],
b[2]=p[2]+f[2],b};e.forEach=function(){var b=e.create();return function(c,f,h,l,p,k){f||=3;h||=0;for(l=l?Math.min(l*f+h,c.length):c.length;l>h;h+=f)b[0]=c[h],b[1]=c[h+1],b[2]=c[h+2],p(b,b,k),c[h]=b[0],c[h+1]=b[1],c[h+2]=b[2];return c}}();e.angle=function(b,c){b=e.fromValues(b[0],b[1],b[2]);c=e.fromValues(c[0],c[1],c[2]);e.normalize(b,b);e.normalize(c,c);c=e.dot(b,c);return 1<c?0:Math.acos(c)};e.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};a.exports=e},function(a,d,g){var m=g(1),e={create:function(){var b=
new m.ARRAY_TYPE(4);return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b},clone:function(b){var c=new m.ARRAY_TYPE(4);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c},fromValues:function(b,c,f,h){var l=new m.ARRAY_TYPE(4);return l[0]=b,l[1]=c,l[2]=f,l[3]=h,l},copy:function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b},set:function(b,c,f,h,l){return b[0]=c,b[1]=f,b[2]=h,b[3]=l,b},add:function(b,c,f){return b[0]=c[0]+f[0],b[1]=c[1]+f[1],b[2]=c[2]+f[2],b[3]=c[3]+f[3],b},subtract:function(b,c,f){return b[0]=
c[0]-f[0],b[1]=c[1]-f[1],b[2]=c[2]-f[2],b[3]=c[3]-f[3],b}};e.sub=e.subtract;e.multiply=function(b,c,f){return b[0]=c[0]*f[0],b[1]=c[1]*f[1],b[2]=c[2]*f[2],b[3]=c[3]*f[3],b};e.mul=e.multiply;e.divide=function(b,c,f){return b[0]=c[0]/f[0],b[1]=c[1]/f[1],b[2]=c[2]/f[2],b[3]=c[3]/f[3],b};e.div=e.divide;e.min=function(b,c,f){return b[0]=Math.min(c[0],f[0]),b[1]=Math.min(c[1],f[1]),b[2]=Math.min(c[2],f[2]),b[3]=Math.min(c[3],f[3]),b};e.max=function(b,c,f){return b[0]=Math.max(c[0],f[0]),b[1]=Math.max(c[1],
f[1]),b[2]=Math.max(c[2],f[2]),b[3]=Math.max(c[3],f[3]),b};e.scale=function(b,c,f){return b[0]=c[0]*f,b[1]=c[1]*f,b[2]=c[2]*f,b[3]=c[3]*f,b};e.scaleAndAdd=function(b,c,f,h){return b[0]=c[0]+f[0]*h,b[1]=c[1]+f[1]*h,b[2]=c[2]+f[2]*h,b[3]=c[3]+f[3]*h,b};e.distance=function(b,c){var f=c[0]-b[0],h=c[1]-b[1],l=c[2]-b[2];b=c[3]-b[3];return Math.sqrt(f*f+h*h+l*l+b*b)};e.dist=e.distance;e.squaredDistance=function(b,c){var f=c[0]-b[0],h=c[1]-b[1],l=c[2]-b[2];b=c[3]-b[3];return f*f+h*h+l*l+b*b};e.sqrDist=e.squaredDistance;
e.length=function(b){var c=b[0],f=b[1],h=b[2];b=b[3];return Math.sqrt(c*c+f*f+h*h+b*b)};e.len=e.length;e.squaredLength=function(b){var c=b[0],f=b[1],h=b[2];b=b[3];return c*c+f*f+h*h+b*b};e.sqrLen=e.squaredLength;e.negate=function(b,c){return b[0]=-c[0],b[1]=-c[1],b[2]=-c[2],b[3]=-c[3],b};e.inverse=function(b,c){return b[0]=1/c[0],b[1]=1/c[1],b[2]=1/c[2],b[3]=1/c[3],b};e.normalize=function(b,c){var f=c[0],h=c[1],l=c[2];c=c[3];var p=f*f+h*h+l*l+c*c;return 0<p&&(p=1/Math.sqrt(p),b[0]=f*p,b[1]=h*p,b[2]=
l*p,b[3]=c*p),b};e.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]};e.lerp=function(b,c,f,h){var l=c[0],p=c[1],k=c[2];c=c[3];return b[0]=l+h*(f[0]-l),b[1]=p+h*(f[1]-p),b[2]=k+h*(f[2]-k),b[3]=c+h*(f[3]-c),b};e.random=function(b,c){return c=c||1,b[0]=m.RANDOM(),b[1]=m.RANDOM(),b[2]=m.RANDOM(),b[3]=m.RANDOM(),e.normalize(b,b),e.scale(b,b,c),b};e.transformMat4=function(b,c,f){var h=c[0],l=c[1],p=c[2];c=c[3];return b[0]=f[0]*h+f[4]*l+f[8]*p+f[12]*c,b[1]=f[1]*h+f[5]*l+f[9]*p+f[13]*c,b[2]=
f[2]*h+f[6]*l+f[10]*p+f[14]*c,b[3]=f[3]*h+f[7]*l+f[11]*p+f[15]*c,b};e.transformQuat=function(b,c,f){var h=c[0],l=c[1],p=c[2],k=f[0],t=f[1],u=f[2];f=f[3];var v=f*h+t*p-u*l,w=f*l+u*h-k*p,z=f*p+k*l-t*h;h=-k*h-t*l-u*p;return b[0]=v*f+h*-k+w*-u-z*-t,b[1]=w*f+h*-t+z*-k-v*-u,b[2]=z*f+h*-u+v*-t-w*-k,b[3]=c[3],b};e.forEach=function(){var b=e.create();return function(c,f,h,l,p,k){f||=4;h||=0;for(l=l?Math.min(l*f+h,c.length):c.length;l>h;h+=f)b[0]=c[h],b[1]=c[h+1],b[2]=c[h+2],b[3]=c[h+3],p(b,b,k),c[h]=b[0],
c[h+1]=b[1],c[h+2]=b[2],c[h+3]=b[3];return c}}();e.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};a.exports=e},function(a,d,g){var m=g(1),e={create:function(){var b=new m.ARRAY_TYPE(2);return b[0]=0,b[1]=0,b},clone:function(b){var c=new m.ARRAY_TYPE(2);return c[0]=b[0],c[1]=b[1],c},fromValues:function(b,c){var f=new m.ARRAY_TYPE(2);return f[0]=b,f[1]=c,f},copy:function(b,c){return b[0]=c[0],b[1]=c[1],b},set:function(b,c,f){return b[0]=c,b[1]=f,b},add:function(b,c,f){return b[0]=
c[0]+f[0],b[1]=c[1]+f[1],b},subtract:function(b,c,f){return b[0]=c[0]-f[0],b[1]=c[1]-f[1],b}};e.sub=e.subtract;e.multiply=function(b,c,f){return b[0]=c[0]*f[0],b[1]=c[1]*f[1],b};e.mul=e.multiply;e.divide=function(b,c,f){return b[0]=c[0]/f[0],b[1]=c[1]/f[1],b};e.div=e.divide;e.min=function(b,c,f){return b[0]=Math.min(c[0],f[0]),b[1]=Math.min(c[1],f[1]),b};e.max=function(b,c,f){return b[0]=Math.max(c[0],f[0]),b[1]=Math.max(c[1],f[1]),b};e.scale=function(b,c,f){return b[0]=c[0]*f,b[1]=c[1]*f,b};e.scaleAndAdd=
function(b,c,f,h){return b[0]=c[0]+f[0]*h,b[1]=c[1]+f[1]*h,b};e.distance=function(b,c){var f=c[0]-b[0];b=c[1]-b[1];return Math.sqrt(f*f+b*b)};e.dist=e.distance;e.squaredDistance=function(b,c){var f=c[0]-b[0];b=c[1]-b[1];return f*f+b*b};e.sqrDist=e.squaredDistance;e.length=function(b){var c=b[0];b=b[1];return Math.sqrt(c*c+b*b)};e.len=e.length;e.squaredLength=function(b){var c=b[0];b=b[1];return c*c+b*b};e.sqrLen=e.squaredLength;e.negate=function(b,c){return b[0]=-c[0],b[1]=-c[1],b};e.inverse=function(b,
c){return b[0]=1/c[0],b[1]=1/c[1],b};e.normalize=function(b,c){var f=c[0],h=c[1];f=f*f+h*h;return 0<f&&(f=1/Math.sqrt(f),b[0]=c[0]*f,b[1]=c[1]*f),b};e.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]};e.cross=function(b,c,f){c=c[0]*f[1]-c[1]*f[0];return b[0]=b[1]=0,b[2]=c,b};e.lerp=function(b,c,f,h){var l=c[0];c=c[1];return b[0]=l+h*(f[0]-l),b[1]=c+h*(f[1]-c),b};e.random=function(b,c){c=c||1;var f=2*m.RANDOM()*Math.PI;return b[0]=Math.cos(f)*c,b[1]=Math.sin(f)*c,b};e.transformMat2=function(b,c,f){var h=
c[0];c=c[1];return b[0]=f[0]*h+f[2]*c,b[1]=f[1]*h+f[3]*c,b};e.transformMat2d=function(b,c,f){var h=c[0];c=c[1];return b[0]=f[0]*h+f[2]*c+f[4],b[1]=f[1]*h+f[3]*c+f[5],b};e.transformMat3=function(b,c,f){var h=c[0];c=c[1];return b[0]=f[0]*h+f[3]*c+f[6],b[1]=f[1]*h+f[4]*c+f[7],b};e.transformMat4=function(b,c,f){var h=c[0];c=c[1];return b[0]=f[0]*h+f[4]*c+f[12],b[1]=f[1]*h+f[5]*c+f[13],b};e.forEach=function(){var b=e.create();return function(c,f,h,l,p,k){f||=2;h||=0;for(l=l?Math.min(l*f+h,c.length):c.length;l>
h;h+=f)b[0]=c[h],b[1]=c[h+1],p(b,b,k),c[h]=b[0],c[h+1]=b[1];return c}}();e.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};a.exports=e}])});var JSON_OMM_VALUES="gpomm",JSON_NAMES="names",OMM_OBJECT_ID=0,OMM_NORAD_CAT_ID=1,OMM_EPOCH=2,OMM_MEAN_MOTION=3,OMM_ECCENTRICITY=4,OMM_INCLINATION=5,OMM_RA_OF_ASC_NODE=6,OMM_ARG_OF_PERICENTER=7,OMM_MEAN_ANOMALY=8,OMM_REV_AT_EPOCH=9,OMM_BSTAR=10,OMM_MEAN_MOTION_DOT=11,OMM_MEAN_MOTION_DDOT=12,OMM_OBJECT_TYPE=13,OMM_RCS_SIZE=14,OMM_COUNTRY_CODE=15,OMM_LAUNCH_DATE=16,OMM_SITE=17,OMM_DECAY_DATE=18,OMM_OPERATIONAL_STATUS=19,OMM_OPERATIONAL_STATUS_OPERATIONAL="+",OMM_OPERATIONAL_STATUS_NONOPERATIONAL="-",
OMM_OPERATIONAL_STATUS_PARTIALLY_OPERATIONAL="P",OMM_OPERATIONAL_STATUS_BACKUP_STANDBY="B",OMM_OPERATIONAL_STATUS_SPARE="S",OMM_OPERATIONAL_STATUS_EXTENDED_MISSION="X",OMM_OPERATIONAL_STATUS_DECAYED="D",OMM_OPERATIONAL_STATUS_UNKNOWN="?",OMM_OBJECT_TYPE_PAYLOAD="PAY",OMM_OBJECT_TYPE_PAYLOAD_ALT="PAYLOAD",OMM_OBJECT_TYPE_ROCKET_BODY="R/B",OMM_OBJECT_TYPE_ROCKET_BODY_ALT="ROCKET BODY",OMM_OBJECT_TYPE_OTHER_DEBRIS="DEB",OMM_OBJECT_TYPE_OTHER_DEBRIS_ALT="DEBRIS",OMM_OBJECT_TYPE_UNKNOWN="UNK",OMM_OBJECT_TYPE_UNKNOWN_ALT=
"UNKNOWN",OMM_OBJECT_TYPE_TBA="TBA",RobinsonMapStructs=[[0,1,0],[5,.9986,.062],[10,.9954,.124],[15,.99,.186],[20,.9822,.248],[25,.973,.31],[30,.96,.372],[35,.9427,.434],[40,.9216,.4958],[45,.8962,.5571],[50,.8679,.6176],[55,.835,.6769],[60,.7986,.7346],[65,.7597,.7903],[70,.7186,.8435],[75,.6732,.8936],[80,.6213,.9394],[85,.5722,.9761],[90,.5322,1]],projections="projectionPerspective projectionCylindrical projectionRobinson projectionElliptical projectionSinusoidal projectionRadar projectionTextual".split(" "),
symbols="shapeNone shapeCircle shapeSquare shapeTriangle shapeInvertedTriangle shapeCross shapePlus shapeDiamond shapeAsterisk shapeLeftTriangle shapeRightTriangle shapePoint".split(" "),headersSatellite=[{html:"<div style='white-space: nowrap;'><input type='checkbox' class='tableSelect' id='selectAllNone'><label for='selectAllNone'>Display</label></div>",title:"Display"},{html:"Name"},{html:"NORAD Id/Catalog number"},{html:"International designator"},{html:"Launch date"},{html:"Launch site"},{html:"Owner/ Source"},
{html:"Decay date"}],headersDefault="Name,Country,State,County,Longitude,Latitude,Elevation (&#x339E;)".split(","),headersProjection=[{title:"Name",id:"Name",sample:"MMMMMMMMMMMM",sortable:!0},{title:"NORAD Id/Catalog number",id:"Id",sample:"88888XX",sortable:!0},{title:"Longitude",id:"Longitude",sample:"888D88M W",sortable:!1},{title:"Latitude",id:"Latitude",sample:"88D88M N",sortable:!1},{title:"Altitude (&#x339E;)",id:"Altitude",sample:"88888",sortable:!1},{title:"Azimuth (&deg;)",id:"Azimuth",
sample:"888.88",sortable:!1},{title:"Elevation (&deg;)",id:"Elevation",sample:"-88.88",sortable:!1},{title:"Range (&#x339E;)",id:"Range",sample:"88888",sortable:!1},{title:"Range Rate (&#x339E;/s)",id:"RangeRate",sample:"-8888.88",sortable:!1},{title:"Eclipse",id:"Eclipse",sample:"Penumbral",sortable:!1}],COLUMNS=Object.freeze({CHECK:0,NAME:1,NORAD:2,INTERNATIONAL_DESIGNATOR:3,LAUNCH_DATE:4,LAUNCH_SITE:5,OWNER:6,DECAY_DATE:7}),WEBSITE_NSSDC="https://nssdc.gsfc.nasa.gov/nmc/spacecraftDisplay.do?id=",
KEY_ENTER=13,KEY_INFO=105,KEY_DELETE=46,MAX_REPORT_LEVEL_SATELLITE=4,MAX_REPORT_LEVEL_OBSERVER=1,DEFAULT_SPHERICAL_VIEW_ANGLE=33,MAX_SPHERICAL_VIEW_ALTITUDE_KM=175E3,MIN_SPHERICAL_VIEW_ALTITUDE_KM=250,MAX_NUM_SATELLITES=500,reportLevelSatellite=MAX_REPORT_LEVEL_SATELLITE,reportLevelObserver=MAX_REPORT_LEVEL_OBSERVER,oReqSatellites=new XMLHttpRequest,oReqCategories=new XMLHttpRequest,oReqStellarData=new XMLHttpRequest,jsonSatellites=[],jsonCategories=[],jsonStellarData=[],satellitesToDisplay=[],bDisplayEarth=
!0,bDisplaySky=!1,bShowFindSatellite=!1,bShowSelectObserver=!1,bShowSelectProjection=!1,bShowInformation=!1,bShowSettings=!1,bShowTextual=!1,bShowSatelliteSettings=!1,bShowObserverSettings=!1,sortSatelliteColumn=[COLUMNS.NAME,COLUMNS.NORAD],sortTextualColumn=[COLUMNS.NAME,COLUMNS.NORAD],scrollLeft=-1,offsetSeconds=0,timeout,interval,paused=!1,initialSatelliteID="25544",objectReport,objectCenter,buttonLeft=22,buttonSpacing=60,projection=projections[0],mouseDown=!1,posX=0,posY=0,gScale=0,updatePeriodMS=
5E3,timer=0,solarPosition=[],observerMap,observerMarker,divLabelContainerNew;var SGP4={wgs72old:0,wgs72:1,wgs84:2,deg2rad:Math.PI/180,twopi:2*Math.PI,x2o3:2/3,dpper:function(a,d,g,m,e,b,c,f,h,l,p,k,t,u,v,w,z,y,D,G,K,C,R,E,x,I,r,B,W,S,X,V,Q,ba,U,da,ia,ha,ja,Y){Q=V+1.19459E-5*G;"y"==ba&&(Q=V);V=Q+.0335*Math.sin(Q);var aa=Math.sin(V);Q=.5*aa*aa-.25;V=-.5*aa*Math.cos(V);f=f*Q+h*V;v=v*Q+w*V;z=z*Q+y*V+D*aa;l=l*Q+p*V+k*aa;t=t*Q+u*V;Q=X+1.5835218E-4*G;"y"==ba&&(Q=X);V=Q+.1098*Math.sin(Q);aa=Math.sin(V);Q=.5*aa*aa-.25;V=-.5*aa*Math.cos(V);"n"==ba&&(b=v+(I*Q+r*V)-b,c=z+(B*Q+W*V+S*aa)-
c,m=l+(K*Q+C*V+R*aa)-m,e=t+(E*Q+x*V)-e,da+=b,U+=f+(d*Q+a*V)-g,E=Math.sin(da),d=Math.cos(da),.2<=da?(e/=E,ha+=m-d*e,ia+=e,ja+=c):(x=Math.sin(ia),g=Math.cos(ia),a=E*x+(e*g+b*d*x),g=E*g+(-e*x+b*d*g),ia%=SGP4.twopi,0>ia&&"a"==Y&&(ia+=SGP4.twopi),e=c+m-b*ia*E,ha=ja+ha+d*ia+e,e=ia,ia=Math.atan2(a,g),0>ia&&"a"==Y&&(ia+=SGP4.twopi),Math.abs(e-ia)>Math.PI&&(ia=ia<e?ia+SGP4.twopi:ia-SGP4.twopi),ja+=c,ha=ha-ja-d*ia));return{ep:U,inclp:da,nodep:ia,argpp:ha,mp:ja}},dscom:function(a,d,g,m,e,b,c){var f;var h=Math.sin(b);
var l=Math.cos(b);var p=Math.sin(g);var k=Math.cos(g);var t=Math.sin(e);var u=Math.cos(e);var v=d*d;var w=1-v;var z=Math.sqrt(w);var y=a+18261.5+m/1440;var D=(4.523602-9.2422029E-4*y)%SGP4.twopi;var G=Math.sin(D);var K=Math.cos(D);var C=.91375164-.03568096*K;var R=Math.sqrt(1-C*C);var E=.089683511*G/R;var x=Math.sqrt(1-E*E);var I=5.8351514+.001944368*y;var r=.39785416*G/R;r=Math.atan2(r,x*K+.91744867*E*G);r=I+r-D;var B=Math.cos(r);var W=Math.sin(r);var S=.1945905;var X=-.98088458;var V=.91744867;
var Q=.39785416;var ba=l;var U=h;var da=2.9864797E-6;var ia=1/c;for(f=1;2>=f;f++){var ha=S*ba+X*V*U;var ja=-X*ba+S*V*U;var Y=-S*U+X*V*ba;var aa=X*Q;var ea=X*U+S*V*ba;var P=S*Q;var M=u*Y+t*aa;var H=u*ea+t*P;var qa=-t*Y+u*aa;var fa=-t*ea+u*P;var ma=ha*k+M*p;var ca=ja*k+H*p;var q=-ha*p+M*k;var L=-ja*p+H*k;var N=qa*p;var n=fa*p;var A=qa*k;var F=fa*k;var O=12*ma*ma-3*q*q;var J=24*ma*ca-6*q*L;var Z=12*ca*ca-3*L*L;var T=3*(ha*ha+M*M)+O*v;var la=6*(ha*ja+M*H)+J*v;var oa=3*(ja*ja+H*H)+Z*v;var ka=-6*ha*qa+
v*(-24*ma*A-6*q*N);var sa=-6*(ha*fa+ja*qa)+v*(-24*(ca*A+ma*F)-6*(q*n+L*N));var na=-6*ja*fa+v*(-24*ca*F-6*L*n);var ta=6*M*qa+v*(24*ma*N-6*q*A);var va=6*(H*qa+M*fa)+v*(24*(ca*N+ma*n)-6*(L*A+q*F));var xa=6*H*fa+v*(24*ca*n-6*L*F);T=T+T+w*O;la=la+la+w*J;oa=oa+oa+w*Z;var pa=da*ia;var ra=-.5*pa/z;var ua=pa*z;var wa=-15*d*ua;var za=ma*q+ca*L;var Ca=ca*q+ma*L;var Da=ca*L-ma*q;if(1==f){var Ea=wa;var ya=ra;var Aa=pa;var Ba=ua;var Ta=za;var Fa=Ca;var Ga=Da;var Ha=T;var Ia=la;var Ja=oa;var Ka=ka;var La=sa;var Ma=
na;var Na=ta;var Oa=va;var Pa=xa;var Qa=O;var Ra=J;var Sa=Z;S=B;X=W;V=C;Q=R;ba=x*l+E*h;U=h*x-l*E;da=4.7968065E-7}}var Ua=(4.7199672+.2299715*y-I)%SGP4.twopi;var Va=(6.2565837+.017201977*y)%SGP4.twopi;var Wa=2*Ea*Fa;var Xa=2*Ea*Ga;var Ya=2*ya*La;var Za=2*ya*(Ma-Ka);var $a=-2*Aa*Ia;var ab=-2*Aa*(Ja-Ha);var bb=-2*Aa*(-21-9*v)*.01675;var cb=2*Ba*Ra;var db=2*Ba*(Sa-Qa);var eb=-.3015*Ba;var fb=-2*ya*Oa;var gb=-2*ya*(Pa-Na);var hb=2*wa*Ca;var ib=2*wa*Da;var jb=2*ra*sa;var kb=2*ra*(na-ka);var lb=-2*pa*la;
var mb=-2*pa*(oa-T);var nb=-2*pa*(-21-9*v)*.0549;var ob=2*ua*J;return{snodm:h,cnodm:l,sinim:t,cosim:u,sinomm:p,cosomm:k,day:y,e3:ib,ee2:hb,em:d,emsq:v,gam:I,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:z,se2:Wa,se3:Xa,sgh2:cb,sgh3:db,sgh4:eb,sh2:fb,sh3:gb,si2:Ya,si3:Za,sl2:$a,sl3:ab,sl4:bb,s1:wa,s2:ra,s3:pa,s4:ua,s5:za,s6:Ca,s7:Da,ss1:Ea,ss2:ya,ss3:Aa,ss4:Ba,ss5:Ta,ss6:Fa,ss7:Ga,sz1:Ha,sz2:Ia,sz3:Ja,sz11:Ka,sz12:La,sz13:Ma,sz21:Na,sz22:Oa,sz23:Pa,sz31:Qa,sz32:Ra,sz33:Sa,xgh2:ob,xgh3:2*ua*(Z-O),xgh4:-.9882*
ua,xh2:-2*ra*va,xh3:-2*ra*(xa-ta),xi2:jb,xi3:kb,xl2:lb,xl3:mb,xl4:nb,nm:c,z1:T,z2:la,z3:oa,z11:ka,z12:sa,z13:na,z21:ta,z22:va,z23:xa,z31:O,z32:J,z33:Z,zmol:Ua,zmos:Va}},dsinit:function(a,d,g,m,e,b,c,f,h,l,p,k,t,u,v,w,z,y,D,G,K,C,R,E,x,I,r,B,W,S,X,V,Q,ba,U,da,ia,ha,ja,Y,aa,ea,P,M,H,qa,fa,ma,ca,q,L,N,n,A,F,O,J,Z,T,la,oa,ka,sa,na,ta,va,xa,pa,ra,ua,wa){var za=a.xke;a=0;.0052359877>fa&&.0034906585<fa&&(a=1);.00826<=fa&&.00924>=fa&&.5<=P&&(a=2);sa=-1.19459E-5*k*(G+K);if(.052359877>H||H>Math.PI-.052359877)sa=
0;0!=l&&(sa/=l);la=1.19459E-5*p*v+1.5835218E-4*e*h;oa=1.19459E-5*k*(y+D)+1.5835218E-4*b*(U+da);ka=-1.19459E-5*t*(w+z-14-6*g)-1.5835218E-4*c*(Q+ba-14-6*g);e=-1.5835218E-4*b*(ia+ha);if(.052359877>H||H>Math.PI-.052359877)e=0;na=1.19459E-5*u*(C+R-6)-d*sa+1.5835218E-4*f*(ja+Y-6);0!=l&&(na-=d/l*e,sa+=e/l);f=(I+.0043752690880113*x)%SGP4.twopi;P+=la*E;0!=a&&(ca=Math.pow(fa/za,SGP4.x2o3),2==a&&(T=d*d,ua=P,P=aa,aa=g,g=ea,q=P*g,.65>=P?(L=3.616-13.247*P+16.29*g,N=-19.302+117.39*P-228.419*g+156.591*q,n=-18.9068+
109.7927*P-214.6334*g+146.5816*q,A=-41.122+242.694*P-471.094*g+313.953*q,F=-146.407+841.88*P-1629.014*g+1083.435*q,O=-532.114+3017.977*P-5740.032*g+3708.276*q):(L=-72.099+331.819*P-508.738*g+266.724*q,N=-346.844+1582.851*P-2415.925*g+1246.113*q,n=-342.585+1554.908*P-2366.899*g+1215.972*q,A=-1052.797+4758.686*P-7193.992*g+3651.957*q,F=-3581.69+16178.11*P-24462.77*g+12422.52*q,O=.715<P?-5149.66+29936.92*P-54087.36*g+31324.56*q:1464.74-4664.75*P+3763.64*g),.7>P?(ea=-919.2277+4988.61*P-9064.77*g+5542.21*
q,Z=-822.71072+4568.6173*P-8491.4146*g+5337.524*q,J=-853.666+4690.25*P-8624.77*g+5341.4*q):(ea=-37995.78+161616.52*P-229838.2*g+109377.94*q,Z=-51752.104+218913.95*P-309468.16*g+146349.42*q,J=-40023.88+170470.89*P-242699.48*g+115605.82*q),ra=l*l,wa=.75*(1+2*d+T),pa=3*fa*fa*ca*ca,g=1.7891679E-6*pa,q=g*wa*(-.306-.44*(P-.64)),L*=1.5*g*ra,pa*=ca,g=3.7393792E-7*pa,N*=1.875*g*l*(1-2*d-3*T),n*=-1.875*g*l*(1+2*d-3*T),pa*=ca,g=1.47273906E-8*pa,A*=35*g*ra*wa,F*=39.375*g*ra*ra,pa*=ca,g=1.1428639E-7*pa,O*=9.84375*
g*l*(ra*(1-2*d-5*T)+.33333333*(-2+4*d+6*T)),J*=g*l*(4.92187512*ra*(-2-4*d+10*T)+6.56250012*(1+2*d-3*T)),g=4.3531606E-9*pa,Z*=29.53125*g*l*(2-8*d+T*(-12+8*d+10*T)),T=29.53125*g*l*(-2-8*d+T*(12+8*d-10*T))*ea,ra=(r+S+S-f-f)%SGP4.twopi,pa=B+ka+2*(X+sa-.0043752690880113)-W,P=ua,g=aa),1==a&&(X=1+d,ta=3*fa*fa*ca*ca,va=1.5*ta*(1+d)*(1+d)*(1+g*(-2.5+.8125*g))*1.7891679E-6,xa=5.625*ta*X*X*X*(1+g*(-6+6.60937*g))*2.2123015E-7*ca,ta=ta*(.9375*l*l*(1+3*d)-.75*(1+d))*(1+2*g)*2.1460748E-6*ca,ra=(r+S+m-f)%SGP4.twopi,
pa=B+V-.0043752690880113+ka+na+sa-W),ua=ra,wa=W,ca=0,fa=W+0);return{em:P,argpm:M+na*E,inclm:H+oa*E,mm:qa+ka*E,nm:fa,nodem:ma+sa*E,irez:a,atime:ca,d2201:q,d2211:L,d3210:N,d3222:n,d4410:A,d4422:F,d5220:O,d5232:J,d5421:Z,d5433:T,dedt:la,didt:oa,dmdt:ka,dndt:0,dnodt:sa,domdt:na,del1:ta,del2:va,del3:xa,xfact:pa,xlamo:ra,xli:ua,xni:wa}},dspace:function(a,d,g,m,e,b,c,f,h,l,p,k,t,u,v,w,z,y,D,G,K,C,R,E,x,I,r,B,W,S,X,V,Q,ba,U,da){var ia,ha=0,ja=ia=0;var Y=0;R=(E+.0043752690880113*R)%SGP4.twopi;S+=D*C;U+=y*
C;Q+=z*C;z=0;if(0!=a){if(0==B||0>=C*B||Math.abs(C)<Math.abs(B))B=0,ba=r,V=I;da=0<C?720:-720;for(I=381;381==I;)2!=a?(ja=t*Math.sin(V-.13130908)+u*Math.sin(2*(V-2.8843198))+v*Math.sin(3*(V-.37448087)),ha=ba+x,ia=t*Math.cos(V-.13130908)+2*u*Math.cos(2*(V-2.8843198))+3*v*Math.cos(3*(V-.37448087))):(Q=G+K*B,I=Q+Q,ia=V+V,ja=d*Math.sin(I+V-5.7686396)+g*Math.sin(V-5.7686396)+m*Math.sin(Q+V-.95240898)+e*Math.sin(-Q+V-.95240898)+b*Math.sin(I+ia-1.8014998)+c*Math.sin(ia-1.8014998)+f*Math.sin(Q+V-1.050833)+h*
Math.sin(-Q+V-1.050833)+l*Math.sin(Q+ia-4.4108898)+p*Math.sin(-Q+ia-4.4108898),ha=ba+x,ia=d*Math.cos(I+V-5.7686396)+g*Math.cos(V-5.7686396)+m*Math.cos(Q+V-.95240898)+e*Math.cos(-Q+V-.95240898)+f*Math.cos(Q+V-1.050833)+h*Math.cos(-Q+V-1.050833)+2*(b*Math.cos(I+ia-1.8014998)+c*Math.cos(ia-1.8014998)+l*Math.cos(Q+ia-4.4108898)+p*Math.cos(-Q+ia-4.4108898))),ia*=ha,720<=Math.abs(C-B)?I=381:(z=C-B,I=0),381==I&&(V=V+ha*da+259200*ja,ba=ba+ja*da+259200*ia,B+=da);da=ba+ja*z+ia*z*z*.5;d=V+ha*z+ja*z*z*.5;Q=1!=
a?d-2*U+2*R:d-U-S+R;Y=da-r;da=r+Y}return{atime:B,em:W+k*C,argpm:S,inclm:X+w*C,xli:V,mm:Q,xni:ba,nodem:U,dndt:Y,nm:da}},initl:function(a,d,g,m,e,b,c,f){c=d.xke;var h=d.j2;var l=g*g;var p=1-l;var k=Math.sqrt(p);d=Math.cos(e);a=d*d;var t=Math.pow(c/b,SGP4.x2o3);h=.75*h*(3*a-1)/(k*p);var u=h/(t*t);t*=1-u*u-u*(1/3+134*u*u/81);b/=1+h/(t*t);t=Math.pow(c/b,SGP4.x2o3);var v=Math.sin(e);c=t*p;u=1-5*a;h=-u-a-a;e=1/t;var w=c*c;g=t*(1-g);c="n";if("a"==f){f=m-7305;m=Math.floor(f+1E-8);var z=.017202791694070362+
SGP4.twopi;m=(1.7321343856509375+.017202791694070362*m+z*(f-m)+f*f*5.075514194322695E-15)%SGP4.twopi;0>m&&(m+=SGP4.twopi)}else m=SGP4.gstime(m+2433281.5);return{no:b,method:c,ainv:e,ao:t,con41:h,con42:u,cosio:d,cosio2:a,eccsq:l,omeosq:p,posq:w,rp:g,rteosq:k,sinio:v,gsto:m}},sgp4init:function(a,d,g,m,e,b,c,f,h,l,p,k){k.isimp=0;k.method="n";k.aycof=0;k.con41=0;k.cc1=0;k.cc4=0;k.cc5=0;k.d2=0;k.d3=0;k.d4=0;k.delmo=0;k.eta=0;k.argpdot=0;k.omgcof=0;k.sinmao=0;k.t=0;k.t2cof=0;k.t3cof=0;k.t4cof=0;k.t5cof=
0;k.x1mth2=0;k.x7thm1=0;k.mdot=0;k.nodedot=0;k.xlcof=0;k.xmcof=0;k.nodecf=0;k.irez=0;k.d2201=0;k.d2211=0;k.d3210=0;k.d3222=0;k.d4410=0;k.d4422=0;k.d5220=0;k.d5232=0;k.d5421=0;k.d5433=0;k.dedt=0;k.del1=0;k.del2=0;k.del3=0;k.didt=0;k.dmdt=0;k.dnodt=0;k.domdt=0;k.e3=0;k.ee2=0;k.peo=0;k.pgho=0;k.pho=0;k.pinco=0;k.plo=0;k.se2=0;k.se3=0;k.sgh2=0;k.sgh3=0;k.sgh4=0;k.sh2=0;k.sh3=0;k.si2=0;k.si3=0;k.sl2=0;k.sl3=0;k.sl4=0;k.gsto=0;k.xfact=0;k.xgh2=0;k.xgh3=0;k.xgh4=0;k.xh2=0;k.xh3=0;k.xi2=0;k.xi3=0;k.xl2=0;
k.xl3=0;k.xl4=0;k.xlamo=0;k.zmol=0;k.zmos=0;k.atime=0;k.xli=0;k.xni=0;k.bstar=e;k.ecco=b;k.argpo=c;k.inclo=f;k.mo=h;k.no=l;k.nodeo=p;k.operationmode=d;a=SGP4.getgravconst(a);b=a.radiusearthkm;var t=a.j2;c=a.j4;f=a.j3oj2;d=78/b+1;e=42/b;var u=e*e*e*e;k.init="y";k.t=0;var v=SGP4.initl(g,a,k.ecco,m,k.inclo,k.no,k.method,k.operationmode);k.no=v.no;k.method=v.method;g=v.ao;k.con41=v.con41;var w=v.con42;l=v.cosio;h=v.cosio2;e=v.eccsq;var z=v.omeosq;var y=v.posq;var D=v.rp;var G=v.rteosq;p=v.sinio;k.gsto=
v.gsto;k.error=0;if(0<=z||0<=k.no){k.isimp=0;D<220/b+1&&(k.isimp=1);D=(D-1)*b;156>D&&(d=D-78,98>D&&(d=20),u=(120-d)/b,u*=u*u*u,d=d/b+1);v=1/y;b=1/(g-d);k.eta=g*k.ecco*b;var K=k.eta*k.eta;y=k.ecco*k.eta;var C=Math.abs(1-K);u*=Math.pow(b,4);var R=u/Math.pow(C,3.5);D=R*k.no*(g*(1+1.5*K+y*(4+K))+.375*t*b/C*k.con41*(8+3*K*(8+K)));k.cc1=k.bstar*D;D=0;1E-4<k.ecco&&(D=-2*u*b*f*k.no*p/k.ecco);k.x1mth2=1-h;k.cc4=2*k.no*R*g*z*(k.eta*(2+.5*K)+k.ecco*(.5+2*K)-t*b/(g*C)*(-3*k.con41*(1-2*y+K*(1.5-.5*y))+.75*k.x1mth2*
(2*K-y*(1+K))*Math.cos(2*k.argpo)));k.cc5=2*R*g*z*(1+2.75*(K+y)+y*K);K=h*h;C=1.5*t*v*k.no;t=.5*C*t*v;c=-.46875*c*v*v*k.no;k.mdot=k.no+.5*C*G*k.con41+.0625*t*G*(13-78*h+137*K);k.argpdot=-.5*C*w+.0625*t*(7-114*h+395*K)+c*(3-36*h+49*K);w=-C*l;k.nodedot=w+(.5*t*(4-19*h)+2*c*(3-7*h))*l;c=k.argpdot+k.nodedot;k.omgcof=k.bstar*D*Math.cos(k.argpo);k.xmcof=0;1E-4<k.ecco&&(k.xmcof=-SGP4.x2o3*u*k.bstar/y);k.nodecf=3.5*z*w*k.cc1;k.t2cof=1.5*k.cc1;k.xlcof=1.5E-12<Math.abs(l+1)?-.25*f*p*(3+5*l)/(1+l):-.25*f*p*(3+
5*l)/1.5E-12;k.aycof=-.5*f*p;f=1+k.eta*Math.cos(k.mo);k.delmo=f*f*f;k.sinmao=Math.sin(k.mo);k.x7thm1=7*h-1;if(225<=2*Math.PI/k.no){k.method="d";k.isimp=1;f=k.inclo;var E=SGP4.dscom(m,k.ecco,k.argpo,0,k.inclo,k.nodeo,k.no);h=E.sinim;m=E.cosim;k.e3=E.e3;k.ee2=E.ee2;l=E.em;p=E.emsq;k.peo=E.peo;k.pgho=E.pgho;k.pho=E.pho;k.pinco=E.pinco;k.plo=E.plo;k.se2=E.se2;k.se3=E.se3;k.sgh2=E.sgh2;k.sgh3=E.sgh3;k.sgh4=E.sgh4;k.sh2=E.sh2;k.sh3=E.sh3;k.si2=E.si2;k.si3=E.si3;k.sl2=E.sl2;k.sl3=E.sl3;k.sl4=E.sl4;w=E.s1;
G=E.s2;t=E.s3;y=E.s4;u=E.s5;D=E.ss1;v=E.ss2;K=E.ss3;C=E.ss4;R=E.ss5;var x=E.sz1;var I=E.sz3;var r=E.sz11;var B=E.sz13;var W=E.sz21;var S=E.sz23;var X=E.sz31;var V=E.sz33;k.xgh2=E.xgh2;k.xgh3=E.xgh3;k.xgh4=E.xgh4;k.xh2=E.xh2;k.xh3=E.xh3;k.xi2=E.xi2;k.xi3=E.xi3;k.xl2=E.xl2;k.xl3=E.xl3;k.xl4=E.xl4;z=E.nm;var Q=E.z1;var ba=E.z3;var U=E.z11;var da=E.z13;var ia=E.z21;var ha=E.z23;var ja=E.z31;var Y=E.z33;k.zmol=E.zmol;k.zmos=E.zmos;E=SGP4.dpper(k.e3,k.ee2,k.peo,k.pgho,k.pho,k.pinco,k.plo,k.se2,k.se3,k.sgh2,
k.sgh3,k.sgh4,k.sh2,k.sh3,k.si2,k.si3,k.sl2,k.sl3,k.sl4,k.t,k.xgh2,k.xgh3,k.xgh4,k.xh2,k.xh3,k.xi2,k.xi3,k.xl2,k.xl3,k.xl4,k.zmol,k.zmos,f,k.init,k.ecco,k.inclo,k.nodeo,k.argpo,k.mo,k.operationmode);k.ecco=E.ep;k.inclo=E.inclp;k.nodeo=E.nodep;k.argpo=E.argpp;k.mo=E.mp;e=SGP4.dsinit(a,m,p,k.argpo,w,G,t,y,u,h,D,v,K,C,R,x,I,r,B,W,S,X,V,k.t,0,k.gsto,k.mo,k.mdot,k.no,k.nodeo,k.nodedot,c,Q,ba,U,da,ia,ha,ja,Y,k.ecco,e,l,0,f,0,z,0,k.atime,k.d2201,k.d2211,k.d3210,k.d3222,k.d4410,k.d4422,k.d5220,k.d5232,k.d5421,
k.d5433,k.dedt,k.didt,k.dmdt,k.dnodt,k.domdt,k.del1,k.del2,k.del3,k.xfact,k.xlamo,k.xli,k.xni);k.irez=e.irez;k.atime=e.atime;k.d2201=e.d2201;k.d2211=e.d2211;k.d3210=e.d3210;k.d3222=e.d3222;k.d4410=e.d4410;k.d4422=e.d4422;k.d5220=e.d5220;k.d5232=e.d5232;k.d5421=e.d5421;k.d5433=e.d5433;k.dedt=e.dedt;k.didt=e.didt;k.dmdt=e.dmdt;k.dnodt=e.dnodt;k.domdt=e.domdt;k.del1=e.del1;k.del2=e.del2;k.del3=e.del3;k.xfact=e.xfact;k.xlamo=e.xlamo;k.xli=e.xli;k.xni=e.xni}1!=k.isimp&&(e=k.cc1*k.cc1,k.d2=4*g*b*e,c=k.d2*
b*k.cc1/3,k.d3=(17*g+d)*c,k.d4=.5*c*g*b*(221*g+31*d)*k.cc1,k.t3cof=k.d2+2*e,k.t4cof=.25*(3*k.d3+k.cc1*(12*k.d2+10*e)),k.t5cof=.2*(3*k.d4+12*k.cc1*k.d3+6*k.d2*k.d2+15*e*(2*k.d2+e)))}SGP4.sgp4(k,0,a);k.init="n";return!0},sgp4:function(a,d,g){var m;var e=m=0;"number"===typeof g&&(g=SGP4.getgravconst(g));var b=g.radiusearthkm;var c=g.xke;var f=g.j2;var h=g.j3oj2;g=b*c/60;a.t=d;a.error=0;a.error_message=null;var l=a.mo+a.mdot*a.t;var p=a.argpo+a.argpdot*a.t;var k=a.nodeo+a.nodedot*a.t;var t=p;var u=l;
d=a.t*a.t;var v=k+a.nodecf*d;var w=1-a.cc1*a.t;k=a.bstar*a.cc4*a.t;var z=a.t2cof*d;if(1!=a.isimp){u=a.omgcof*a.t;t=1+a.eta*Math.cos(l);t=a.xmcof*(t*t*t-a.delmo);var y=u+t;u=l+y;t=p-y;y=d*a.t;p=y*a.t;w=w-a.d2*d-a.d3*y-a.d4*p;k+=a.bstar*a.cc5*(Math.sin(u)-a.sinmao);z=z+a.t3cof*y+p*(a.t4cof+a.t*a.t5cof)}d=a.no;l=a.ecco;y=a.inclo;"d"==a.method&&(p=a.t,d=SGP4.dspace(a.irez,a.d2201,a.d2211,a.d3210,a.d3222,a.d4410,a.d4422,a.d5220,a.d5232,a.d5421,a.d5433,a.dedt,a.del1,a.del2,a.del3,a.didt,a.dmdt,a.dnodt,
a.domdt,a.argpo,a.argpdot,a.t,p,a.gsto,a.xfact,a.xlamo,a.no,a.atime,l,t,y,a.xli,u,a.xni,v,d),a.atime=d.atime,l=d.em,t=d.argpm,y=d.inclm,a.xli=d.xli,u=d.mm,a.xni=d.xni,v=d.nodem,d=d.nm);if(0>=d)return a.error_message="mean motion "+d+" is less than zero",a.error=2,[!1,!1];w*=Math.pow(c/d,SGP4.x2o3)*w;d=c/Math.pow(w,1.5);l-=k;if(1<=l||-.001>l)return a.error_message="mean eccentricity "+l+" not within range 0.0 <= e < 1.0",a.error=1,[!1,!1];1E-6>l&&(l=1E-6);u+=a.no*z;k=u+t+v;v%=SGP4.twopi;t%=SGP4.twopi;
k%=SGP4.twopi;u=(k-t-v)%SGP4.twopi;var D=Math.sin(y);p=Math.cos(y);z=l;k=y;l=t;var G=u;u=D;t=p;if("d"==a.method&&(y=SGP4.dpper(a.e3,a.ee2,a.peo,a.pgho,a.pho,a.pinco,a.plo,a.se2,a.se3,a.sgh2,a.sgh3,a.sgh4,a.sh2,a.sh3,a.si2,a.si3,a.sl2,a.sl3,a.sl4,a.t,a.xgh2,a.xgh3,a.xgh4,a.xh2,a.xh3,a.xi2,a.xi3,a.xl2,a.xl3,a.xl4,a.zmol,a.zmos,a.inclo,"n",z,k,v,l,G,a.operationmode),z=y.ep,k=y.inclp,v=y.nodep,l=y.argpp,G=y.mp,0>k&&(k=-k,v+=Math.PI,l-=Math.PI),0>z||1<z))return a.error_message="perturbed eccentricity "+
z+" not within range 0.0 <= e <= 1.0",a.error=3,[!1,!1];"d"==a.method&&(u=Math.sin(k),t=Math.cos(k),a.aycof=-.5*h*u,a.xlcof=1.5E-12<Math.abs(t+1)?-.25*h*u*(3+5*t)/(1+t):-.25*h*u*(3+5*t)/1.5E-12);p=z*Math.cos(l);y=1/(w*(1-z*z));D=z*Math.sin(l)+y*a.aycof;h=z=(G+l+v+y*a.xlcof*p-v)%SGP4.twopi;y=9999.9;for(l=1;1E-12<=Math.abs(y)&&10>=l;)m=Math.sin(h),e=Math.cos(h),y=1-e*p-m*D,y=(z-D*e+p*m-h)/y,.95<=Math.abs(y)&&(y=0<y?.95:-.95),h+=y,l+=1;y=p*m-D*e;G=p*p+D*D;var K=w*(1-G);if(0>K)return a.error_message=
"semilatus rectum "+K+" is less than zero",a.error=4,[!1,!1];l=w*(1-(p*e+D*m));z=Math.sqrt(w)*y/l;h=Math.sqrt(K)/l;G=Math.sqrt(1-G);y/=1+G;m=w/l*(m-D-p*y);w=w/l*(e-p+D*y);e=Math.atan2(m,w);w=(w+w)*m;m=1-2*m*m;y=1/K;p=.5*f*y;y*=p;"d"==a.method&&(f=t*t,a.con41=3*f-1,a.x1mth2=1-f,a.x7thm1=7*f-1);f=l*(1-1.5*y*G*a.con41)+.5*p*a.x1mth2*m;e-=.25*y*a.x7thm1*w;v+=1.5*y*t*w;u=k+1.5*y*t*u*m;k=z-d*p*a.x1mth2*w/c;c=h+d*p*(a.x1mth2*m+1.5*a.con41)/c;d=Math.sin(e);e=Math.cos(e);m=Math.sin(v);v=Math.cos(v);w=Math.sin(u);
t=Math.cos(u);u=-m*t;z=v*t;t=u*d+v*e;h=z*d+m*e;y=w*d;b={x:f*t*b,y:f*h*b,z:f*y*b};g={x:(k*t+c*(u*e-v*d))*g,y:(k*h+c*(z*e-m*d))*g,z:(k*y+c*w*e)*g};return 1>f?(a.error_message="mrt "+f+" is less than 1.0 indicating the satellite has decayed",a.error=6,[!1,!1]):{position:b,velocity:g}},gstime:function(a){a=(a-2451545)/36525;a=(-6.2E-6*a*a*a+.093104*a*a+3.164400184812866E9*a+67310.54841)*SGP4.deg2rad/240%SGP4.twopi;0>a&&(a+=SGP4.twopi);return a},getgravconst:function(a){switch(a){case SGP4.wgs72old:var d=
398600.79964;var g=6378.135;var m=.0743669161;var e=1/m;var b=.001082616;var c=-2.53881E-6;var f=-1.65597E-6;var h=c/b;break;case SGP4.wgs72:d=398600.8;g=6378.135;m=60/Math.sqrt(g*g*g/d);e=1/m;b=.001082616;c=-2.53881E-6;f=-1.65597E-6;h=c/b;break;case SGP4.wgs84:d=398600.5,g=6378.137,m=60/Math.sqrt(g*g*g/d),e=1/m,b=.00108262998905,c=-2.53215306E-6,f=-1.61098761E-6,h=c/b}return{tumin:e,mu:d,radiusearthkm:g,xke:m,j2:b,j3:c,j4:f,j3oj2:h}},twoline2rv:function(a,d,g){var m=Math.PI/180,e=1440/(2*Math.PI),
b=g.tumin,c={error:0};c.whichconst=g;c.satnum=a.substring(2,7);c.epochyr=parseInt(a.substring(18,20),10);c.epochdays=parseFloat(a.substring(20,32));c.ndot=parseFloat(a.substring(33,43));c.nddot=parseFloat("0."+a.substring(44,50))*Math.pow(10,parseInt(a.substring(50,52),10));c.bstar=parseFloat(a.substring(53,54)+"."+a.substring(54,59))*Math.pow(10,parseInt(a.substring(59,61),10));c.inclo=parseFloat(d.substring(8,16));c.nodeo=parseFloat(d.substring(17,25));c.ecco=parseFloat("0."+d.substring(26,33));
c.argpo=parseFloat(d.substring(34,42));c.mo=parseFloat(d.substring(43,51));c.no=parseFloat(d.substring(52,63));c.no/=e;c.a=Math.pow(c.no*b,-2/3);c.ndot/=1440*e;c.nddot/=2073600*e;c.inclo*=m;c.nodeo*=m;c.argpo*=m;c.mo*=m;c.alta=c.a*(1+c.ecco)-1;c.altp=c.a*(1-c.ecco)-1;a=57>c.epochyr?c.epochyr+100:c.epochyr;c.jdsatepoch=c.epochdays-1+2415020.5+365*a+Math.floor((a-1)/4);return c},omm2rv:function(a,d){var g=Math.PI/180,m=1440/(2*Math.PI),e=d.tumin,b={},c=new Date(a[OMM_EPOCH]+"Z");b.error=0;b.whichconst=
d;b.satnum=a[OMM_NORAD_CAT_ID];b.epochyr=c.getUTCFullYear()-1900;b.epochdays=(c-new Date(Date.UTC(c.getUTCFullYear(),0,0)))/864E5;b.ndot=parseFloat(a[OMM_MEAN_MOTION_DOT]);b.nddot=parseFloat(a[OMM_MEAN_MOTION_DDOT]);b.bstar=parseFloat(a[OMM_BSTAR]);b.inclo=parseFloat(a[OMM_INCLINATION]);b.nodeo=parseFloat(a[OMM_RA_OF_ASC_NODE]);b.ecco=parseFloat(a[OMM_ECCENTRICITY]);b.argpo=parseFloat(a[OMM_ARG_OF_PERICENTER]);b.mo=parseFloat(a[OMM_MEAN_ANOMALY]);b.no=parseFloat(a[OMM_MEAN_MOTION]);b.no/=m;b.a=Math.pow(b.no*
e,-2/3);b.ndot/=1440*m;b.nddot/=2073600*m;b.inclo*=g;b.nodeo*=g;b.argpo*=g;b.mo*=g;b.alta=b.a*(1+b.ecco)-1;b.altp=b.a*(1-b.ecco)-1;b.jdsatepoch=b.epochdays-1+2415020.5+365*b.epochyr+Math.floor((b.epochyr-1)/4);return b}};var SHOW_WAIT_SATELLITE_COUNT_WHEN_SORTING=500,SIZE_OF_FLOAT=4,DELTA_PI=1E-15,DELTA_LATITUDE_RADIANS=1E-9,ASTRONOMICAL_UNIT_KM=1.495978707E8,SOLAR_RADIUS_KM=695700,EARTH_FLATTENING_INVERSE=298.257223563,EARTH_SEMI_MAJOR_AXIS_KM=6378.137,EARTH_SEMI_MINOR_AXIS_KM=EARTH_SEMI_MAJOR_AXIS_KM*(1-1/EARTH_FLATTENING_INVERSE),EARTH_AXIS_RATIO=EARTH_SEMI_MINOR_AXIS_KM/EARTH_SEMI_MAJOR_AXIS_KM,EARTH_ELLIPTICITY_SQUARED=1/EARTH_FLATTENING_INVERSE*(2-1/EARTH_FLATTENING_INVERSE),MIN_SPHERICAL_VIEW_ALTITUDE=250/
EARTH_SEMI_MAJOR_AXIS_KM,OE=Math.acos(EARTH_AXIS_RATIO),SIN_OE=Math.sin(OE),LONGITUDE_ANGULAR_STEP_SIZE_DEGREES=1,LATITUDE_ANGULAR_STEP_SIZE_DEGREES=1,MIN_SPHERICAL_VIEW_ANGLE=1,MAX_SPHERICAL_VIEW_ANGLE=100,SYMBOL_LINE_WIDTH=.2,DEFAULT_FONT_SIZE=8,SIZE_SCALE_FACTOR=400,SYMBOL_SIZE_SCALE=2.5,DEFAULT_SYMBOL_SIZE=9,FOOTPRINTS_ARRAY_NUM_SATELLITES=1024,FOOTPRINTS_ARRAY_NUM_ENTRIES=8,CONVERT_ANGLE_TO_BYTE_ARRAY_VALUE=672946987,TEXTURE_DAY=0,TEXTURE_NIGHT=1,TEXTURE_MASK=2,TEXTURE_BOUNDARIES=3,TEXTURE_FOOTPRINT=
4,TEXTURE_SKY=5,gl,canvas,lineNumSteps=6,endCapNumSteps=12,angleNumSteps=120,translateMatrix=mat4.create(),scaleMatrix=mat4.create(),modelViewMatrix=mat4.create(),skyModelViewMatrix=mat4.create(),perspectiveMatrix=mat4.create(),globeRotationMatrix=mat4.create(),symbolBuffers={},skyVertexPositionBufferPerspective,skyVertexIndexBufferPerspective,skyVertexTextureCoordBufferPerspective,globeVertexPositionBufferPerspective,globeVertexIndexBufferPerspective,globeVertexTextureCoordBufferPerspective,globeVertexIndexBufferProjection,
globeVertexTextureCoordBufferProjection,globeTextureDay,globeTextureNight,globeTextureMask,globeTextureBoundaries,globeTextureFootprints,skyTexture,imageTextureSky,imageTextureDay,imageTextureNight,imageTextureMask,imageTextureBoundaries,shaderProgramSymbol,shaderProgramXY,shaderProgramRADec,shaderProgramStars,shaderProgramSkyPerspective,shaderProgramGlobePerspective,shaderProgramGlobeCylindrical,shaderProgramGlobeElliptical,shaderProgramGlobeSinusoidal,shaderProgramGlobeRobinson,shaderProgramGlobes=
[shaderProgramGlobePerspective,shaderProgramGlobeCylindrical,shaderProgramGlobeElliptical,shaderProgramGlobeSinusoidal,shaderProgramGlobeRobinson],shaderProgramTrackPerspective,shaderProgramTrackGroundPerspective,shaderProgramTrackCylindrical,shaderProgramTrackElliptical,shaderProgramTrackSinusoidal,shaderProgramTrackRobinson,shaderProgramTrackRadar,canvasWidth=600,canvasHeight=600,lastMouseX=null,lastMouseY=null,angleGrazingEarthRadians=0,satellites={},wgsModel=SGP4.wgs72,footprintData,selectedObserver=
null,selectedSatellite=null,selectedSPICEBody=null,footprintTextureDefined=!1,near,far,eventLast,timeZoneUTC=!1,refractionCorrection=!0,angleViewing=30,distanceScale=(EARTH_SEMI_MAJOR_AXIS_KM+1E4)/EARTH_SEMI_MAJOR_AXIS_KM,bFillLand=!1,bFillSeas=!1,colorLand=[1,0,0],colorSeas=[0,1,0],alphaLand=.4,alphaSeas=.4,colorDay=[1,.5,.5],colorNight=[0,0,0],alphaLongitudeLatitudeGrid=.2,colorLongitudeLatitudeGrid=[0,1,0],bDisplayLongitudeLatitudeGrid=!0,bUseSatelliteImage=!0,bDisplayTerminator=!0,bDisplayDayNight=
!0,bDisplayBoundaries=!0,bDisplayBoundariesCoastlines=!1,bDisplayBoundariesInternal=!1,alphaFootprint=.3,alphaTerminator=.4,alphaBoundaries=.4,colorTerminator=[0,0,1],colorBoundaries=[1,1,1],colorBackground=[0,0,0],symbolSizeObserverOffset=0,symbolSizeSatelliteOffset=0,symbolSizeObserver=5,symbolSizeSatellite=5,fontSize=6,fontSizeBase=0,fontFamily="arial, helvetica, sans-serif",fontStyle="normal",fontWeight="normal",mouseLongitude=null,mouseLatitude=null,centralPosition={longitudeRadians:0,latitudeRadians:0,
altitudeMeters:3E7},observer={};observer[JSON_NAMES]=[];observer[JSON_NAMES][0]="";observer.title="";observer.isObserver=!0;observer.tracking={};observer.tracking.longitude=0;observer.tracking.latitude=0;observer.tracking.altitude=0;observer.element="observer";observer.elementShape="observerShape";observer.labelRect={};observer.labelRect.width=0;observer.labelRect.height=0;observer.labelRect.cachedName="";observer.pos=toCartesianECEF(0,0,0);observer.setting={};observer.setting.label=!0;
observer.setting.color=makeColor("#ffffff",1);observer.setting.fillBackground=!0;observer.setting.colorBackground=makeColor("#000000",1);observer.setting.symbol=1;var satelliteDefaultSettings={symbol:2,label:!0};satelliteDefaultSettings.color=makeColor("#ff0000",1);satelliteDefaultSettings.fillBackground=!0;satelliteDefaultSettings.colorBackground=makeColor("#00ff00",1);satelliteDefaultSettings.trackForward=.5;satelliteDefaultSettings.trackBackward=.5;satelliteDefaultSettings.trackUnits="orbits";
satelliteDefaultSettings.trackStyle="aerial";satelliteDefaultSettings.footprintOutline=!0;satelliteDefaultSettings.footprintShade=!0;satelliteDefaultSettings.footprintAngles="0";satelliteDefaultSettings.footprintArray=[];satelliteDefaultSettings.footprintAlpha=.4;var dateBase=new Date,datePrevious,dateNow=new Date,jdNow=julianDate(dateNow),hWnd=null;
function initShaderSymbol(){var a=getShader(gl,"shader-fs-symbol"),d=getShader(gl,"shader-vs-symbol");shaderProgramSymbol=gl.createProgram();gl.attachShader(shaderProgramSymbol,d);gl.attachShader(shaderProgramSymbol,a);gl.linkProgram(shaderProgramSymbol);gl.getProgramParameter(shaderProgramSymbol,gl.LINK_STATUS)&&(shaderProgramSymbol.vertexPositionAttribute=gl.getAttribLocation(shaderProgramSymbol,"aVertexPosition"),shaderProgramSymbol.color=gl.getUniformLocation(shaderProgramSymbol,"uColor"),shaderProgramSymbol.translateMatrixUniform=
gl.getUniformLocation(shaderProgramSymbol,"uTranslateMatrix"),shaderProgramSymbol.scaleMatrixUniform=gl.getUniformLocation(shaderProgramSymbol,"uScaleMatrix"))}
function initShaderXY(){var a=getShader(gl,"shader-fs-basic"),d=getShader(gl,"shader-vs-xy");shaderProgramXY=gl.createProgram();gl.attachShader(shaderProgramXY,d);gl.attachShader(shaderProgramXY,a);gl.linkProgram(shaderProgramXY);gl.getProgramParameter(shaderProgramXY,gl.LINK_STATUS)&&(shaderProgramXY.vertexPositionAttribute=gl.getAttribLocation(shaderProgramXY,"aVertexPosition"),shaderProgramXY.scaleX=gl.getUniformLocation(shaderProgramXY,"uScaleX"),shaderProgramXY.scaleY=gl.getUniformLocation(shaderProgramXY,
"uScaleY"),shaderProgramXY.color=gl.getUniformLocation(shaderProgramXY,"uColor"))}
function initShaderRADec(){var a=getShader(gl,"shader-fs-radec"),d=getShader(gl,"shader-vs-radec");shaderProgramRADec=gl.createProgram();gl.attachShader(shaderProgramRADec,d);gl.attachShader(shaderProgramRADec,a);gl.linkProgram(shaderProgramRADec);gl.getProgramParameter(shaderProgramRADec,gl.LINK_STATUS)&&(shaderProgramRADec.vertexPositionAttribute=gl.getAttribLocation(shaderProgramRADec,"aVertexPosition"),shaderProgramRADec.scaleX=gl.getUniformLocation(shaderProgramRADec,"uScaleX"),shaderProgramRADec.scaleY=
gl.getUniformLocation(shaderProgramRADec,"uScaleY"),shaderProgramRADec.thetaG=gl.getUniformLocation(shaderProgramRADec,"thetaG"),shaderProgramRADec.longitude=gl.getUniformLocation(shaderProgramRADec,"longitude"),shaderProgramRADec.latitude=gl.getUniformLocation(shaderProgramRADec,"latitude"),shaderProgramRADec.color=gl.getUniformLocation(shaderProgramRADec,"uColor"))}
function initShaderStars(){var a=getShader(gl,"shader-fs-stars"),d=getShader(gl,"shader-vs-stars");shaderProgramStars=gl.createProgram();gl.attachShader(shaderProgramStars,d);gl.attachShader(shaderProgramStars,a);gl.linkProgram(shaderProgramStars);gl.getProgramParameter(shaderProgramStars,gl.LINK_STATUS)&&(shaderProgramStars.vertexPositionAttribute=gl.getAttribLocation(shaderProgramStars,"aVertexPositionMagnitude"),shaderProgramStars.limitingMagnitude=gl.getUniformLocation(shaderProgramStars,"limitingMagnitude"),
shaderProgramStars.scaleX=gl.getUniformLocation(shaderProgramStars,"uScaleX"),shaderProgramStars.scaleY=gl.getUniformLocation(shaderProgramStars,"uScaleY"),shaderProgramStars.thetaG=gl.getUniformLocation(shaderProgramStars,"thetaG"),shaderProgramStars.longitude=gl.getUniformLocation(shaderProgramStars,"longitude"),shaderProgramStars.latitude=gl.getUniformLocation(shaderProgramStars,"latitude"),shaderProgramStars.colorGradients=gl.getUniformLocation(shaderProgramStars,"colorGradients"),shaderProgramStars.colorConstants=
gl.getUniformLocation(shaderProgramStars,"colorConstants"))}function message(a,d,g){var m;if(m=document.getElementById("notification"))m.innerHTML=a,m.style.color=d,m.style.backgroundColor=g,m.style.visibility="visible";setTimeout(function(){m.innerHTML="";m.style.visibility="hidden"},5E3)}function messageOK(){message("","Green","White")}function messageInfo(a){message(a,"Green","White")}function messageWarning(a){message(a,"Black","DarkOrange")}function messageError(a){message(a,"Black","Red")}
function makeColor(a,d){if("#"===a.slice(0,1)&&7===a.length){var g=parseInt(a.slice(1,3),16)/255;var m=parseInt(a.slice(3,5),16)/255;a=parseInt(a.slice(5,7),16)/255}else a=m=g=1;return[g,m,a,d]}function makeHTMLColor(a){return"#"+("0"+Math.round(255*a[0]).toString(16)).slice(-2)+("0"+Math.round(255*a[1]).toString(16)).slice(-2)+("0"+Math.round(255*a[2]).toString(16)).slice(-2)}
function makeRGBAColor(a,d){return"rgba("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+","+d+")"}function checkArrayValue(a,d,g){if(g)var m=d;else if(void 0!==a&&void 0!==d&&d.length===a.length){g=d.length;for(var e=0;e<g&&d[e]===a[e];e++);e===d.length&&(m=d)}return m}function checkValue(a,d,g){if(g||d===a)var m=d;return m}
function initTextureSub(a){gl.useProgram(a);gl.uniform1i(a.samplerUniformFootprints,TEXTURE_FOOTPRINT);gl.uniform1i(a.numSatellites,FOOTPRINTS_ARRAY_NUM_SATELLITES)}
function initTexture(){skyTexture=gl.createTexture();globeTextureDay=gl.createTexture();globeTextureNight=gl.createTexture();globeTextureMask=gl.createTexture();globeTextureBoundaries=gl.createTexture();globeTextureFootprints=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,globeTextureFootprints);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,
gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!1);gl.bindTexture(gl.TEXTURE_2D,null);initTextureSub(shaderProgramGlobePerspective);initTextureSub(shaderProgramGlobeCylindrical);initTextureSub(shaderProgramGlobeElliptical);initTextureSub(shaderProgramGlobeSinusoidal);initTextureSub(shaderProgramGlobeRobinson)}
function createSymbolBuffer(a,d,g){symbolBuffers[d]=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,symbolBuffers[d]);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);symbolBuffers[d].itemSize=2;symbolBuffers[d].numItems=a.length/symbolBuffers[d].itemSize;symbolBuffers[d].style=g}function initBuffers(){initSkyBuffersPerspective();initGlobeBuffersPerspective();initGlobeBuffersProjection();initGlobeBuffersRadar();initSymbolBuffers()}
function initSymbolBuffers(){var a=[],d=0;createSymbolBuffer(a,d++,gl.LINE_STRIP);for(var g=0;360>=g;g+=15)a.push((1-SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;for(g=45;405>=g;g+=90)a.push((1-Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-Math.sqrt(2)*
SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;for(g=90;450>=g;g+=120)a.push((1-2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));
createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;for(g=270;630>=g;g+=120)a.push((1-2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;a.push(0,0);for(g=45;405>=g;g+=90)a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g-
90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g-90))),a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g+90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+90))),a.push(Math.sqrt(2)*SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g+45)),Math.sqrt(2)*SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+45)));createSymbolBuffer(a,d++,gl.TRIANGLE_FAN);
a.length=0;a.push(0,0);for(g=0;360>=g;g+=90)a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g-90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g-90))),a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g+90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+90))),a.push(Math.sqrt(2)*SYMBOL_LINE_WIDTH*
Math.cos(glMatrix.toRadian(g+45)),Math.sqrt(2)*SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+45)));createSymbolBuffer(a,d++,gl.TRIANGLE_FAN);for(g=a.length=0;360>=g;g+=90)a.push((1-Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+Math.sqrt(2)*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=
0;a.push(0,0);for(g=0;360>=g;g+=45)a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g-90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g-90))),a.push((1+SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g+90)),(1+SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))+SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+90))),a.push(2.5*SYMBOL_LINE_WIDTH*Math.cos(glMatrix.toRadian(g+
22.5)),2.5*SYMBOL_LINE_WIDTH*Math.sin(glMatrix.toRadian(g+22.5)));createSymbolBuffer(a,d++,gl.TRIANGLE_FAN);for(g=a.length=0;360>=g;g+=120)a.push((1-2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;for(g=180;540>=g;g+=120)a.push((1-2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),
(1-2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;a.push(-2*SYMBOL_LINE_WIDTH,2*SYMBOL_LINE_WIDTH);a.push(-2*SYMBOL_LINE_WIDTH,-2*SYMBOL_LINE_WIDTH);a.push(2*SYMBOL_LINE_WIDTH,2*SYMBOL_LINE_WIDTH);a.push(2*SYMBOL_LINE_WIDTH,-2*SYMBOL_LINE_WIDTH);createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP);a.length=0;for(g=-30;210>=g;g+=120)a.push((1-
2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1-2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g))),a.push((1+2*SYMBOL_LINE_WIDTH)*Math.cos(glMatrix.toRadian(g)),(1+2*SYMBOL_LINE_WIDTH)*Math.sin(glMatrix.toRadian(g)));createSymbolBuffer(a,d++,gl.TRIANGLE_STRIP)}
function getShader(a,d){d=document.getElementById(d);var g=null;if(d){for(var m="",e=d.firstChild;e;)3===e.nodeType&&(m=m.concat(e.textContent)),e=e.nextSibling;"x-shader/x-fragment"===d.type?g=a.createShader(a.FRAGMENT_SHADER):"x-shader/x-vertex"===d.type&&(g=a.createShader(a.VERTEX_SHADER));g&&(a.shaderSource(g,m),a.compileShader(g),a.getShaderParameter(g,a.COMPILE_STATUS)||(g=null))}return g}
function azElFromPos(a,d){var g={};a=vec3.fromValues(-a[0]+d.pos[0],a[2]-d.pos[2],a[1]-d.pos[1]);vec3.rotateZ(a,a,[0,0,0],-d.tracking.longitude);vec3.rotateY(a,a,[0,0,0],Math.PI/2+d.tracking.latitude);g.xyLengthSquared=a[0]*a[0]+a[1]*a[1];g.zLengthSquared=a[2]*a[2];g.el=-Math.atan2(a[2],Math.sqrt(g.xyLengthSquared));g.az=0<g.xyLengthSquared?Math.atan2(a[1],a[0]):0;return g}
function satelliteAzElDegrees(a,d){a=azElFromPos(a.tracking.pos,d);a.az=(180/Math.PI*a.az+360)%360;a.el*=180/Math.PI;return a}
function satelliteRangeAndRangeRate(a,d){var g={},m=vec3.fromValues(-a.tracking.pos[0]+d.pos[0],a.tracking.pos[2]-d.pos[2],a.tracking.pos[1]-d.pos[1]);g.range=EARTH_SEMI_MAJOR_AXIS_KM*vec3.length(m);m=satellitePosition(a,1440*(jdNow-a.tracking.satrec.jdsatepoch)-.01/60);a=satellitePosition(a,1440*(jdNow-a.tracking.satrec.jdsatepoch)+.01/60);m=vec3.length(vec3.fromValues(-m[0]+d.pos[0],m[2]-d.pos[2],m[1]-d.pos[1]));d=vec3.length(vec3.fromValues(-a[0]+d.pos[0],a[2]-d.pos[2],a[1]-d.pos[1]));g.rangeRate=
EARTH_SEMI_MAJOR_AXIS_KM*(d-m)/.02;return g}
function longLatToXY(a,d){var g=0,m=0;if("projectionCylindrical"===projection)g=(a-centralPosition.longitudeRadians+5*Math.PI)%(2*Math.PI)/Math.PI-1,m=2*d/Math.PI;else if("projectionRobinson"===projection){m=180*d/Math.PI;var e=Math.floor(Math.abs(m/ROBINSON_ANGLE_STEP_DEGREES));e>=RobinsonMapStructs.length-2&&(e=RobinsonMapStructs.length-2);g=((Math.abs(m)-RobinsonMapStructs[e+0][0])*RobinsonMapStructs[e+1][1]+(RobinsonMapStructs[e+1][0]-Math.abs(m))*RobinsonMapStructs[e+0][1])/(RobinsonMapStructs[e+
1][0]-RobinsonMapStructs[e+0][0]);g*=((a-centralPosition.longitudeRadians)/Math.PI+5)%2-1;m=((Math.abs(m)-RobinsonMapStructs[e+0][0])*RobinsonMapStructs[e+1][2]+(RobinsonMapStructs[e+1][0]-Math.abs(m))*RobinsonMapStructs[e+0][2])/(RobinsonMapStructs[e+1][0]-RobinsonMapStructs[e+0][0]);0>d&&(m*=-1)}else if("projectionSinusoidal"===projection)g=((a-centralPosition.longitudeRadians+5*Math.PI)%(2*Math.PI)/Math.PI-1)*Math.cos(d),m=2*d/Math.PI;else if("projectionElliptical"===projection){a=(a-centralPosition.longitudeRadians+
3*Math.PI)%(2*Math.PI)/Math.PI-1;d=2*d/Math.PI;m=2*Math.asin(d);if(m<Math.PI-5E-5&&m>-Math.PI+5E-5){for(e=0;500>e&&!(g=m,m-=(m+Math.sin(m)-Math.PI*Math.sin(.5*d*Math.PI))/(1+Math.cos(m)),1E-4>Math.abs(m-g));e++);m/=2;d=Math.cos(m)}else m/=2,d=5E-5;g=a*d;m=Math.sin(m)}return{x:g,y:m}}
function satellitePosition(a,d){var g=SGP4.sgp4(a.tracking.satrec,d,wgsModel),m=null;try{m=vec3.fromValues(-g.position.x/EARTH_SEMI_MAJOR_AXIS_KM,g.position.z/EARTH_SEMI_MAJOR_AXIS_KM,g.position.y/EARTH_SEMI_MAJOR_AXIS_KM),vec3.rotateY(m,m,[0,0,0],-ThetaGRadians(a.tracking.satrec.jdsatepoch+d/1440))}catch(e){}return m}
function eclipseState(a){var d;var g=new Date(dateNow.getFullYear(),0,0);var m="None";g=ASTRONOMICAL_UNIT_KM*(1-.0167086*Math.cos(glMatrix.toRadian(360/365.256363*(Math.floor((dateNow-g)/864E5)-4))));if(d=toCartesianECEF(solarPosition.longitude,solarPosition.latitude,g)){var e,b=[];g=EARTH_SEMI_MAJOR_AXIS_KM*Math.sqrt(a.tracking.pos[0]*a.tracking.pos[0]+a.tracking.pos[1]*a.tracking.pos[1]+a.tracking.pos[2]*a.tracking.pos[2]);for(e=0;3>e;e++)b[e]=EARTH_SEMI_MAJOR_AXIS_KM*(d[e]-a.tracking.pos[e]);var c=
Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);d=Math.asin(EARTH_SEMI_MAJOR_AXIS_KM/g);e=Math.asin(SOLAR_RADIUS_KM/c);a=Math.acos(-EARTH_SEMI_MAJOR_AXIS_KM*(a.tracking.pos[0]*b[0]+a.tracking.pos[1]*b[1]+a.tracking.pos[2]*b[2])/(g*c));d>e&&a<d-e&&(m="Umbral");a>Math.abs(d-e)&&a<d+e&&(m="Penumbral")}return m}function toCartesian(a,d){var g=Math.cos(d);return vec3.fromValues(-g*Math.cos(a),Math.sin(d),g*Math.sin(a))}
function toCartesianECEF(a,d,g){var m=Math.sin(d),e=EARTH_SEMI_MAJOR_AXIS_KM/Math.sqrt(1-m*SIN_OE*m*SIN_OE);d=(e+g)*Math.cos(d);return vec3.fromValues(-d*Math.cos(a)/EARTH_SEMI_MAJOR_AXIS_KM,(EARTH_AXIS_RATIO*EARTH_AXIS_RATIO*e+g)*m/EARTH_SEMI_MAJOR_AXIS_KM,d*Math.sin(a)/EARTH_SEMI_MAJOR_AXIS_KM)}
function fromCartesianECEF(a,d){var g=Math.sqrt(d[0]*d[0]+d[2]*d[2]);if(0<g){var m=0;a.latitude=Math.atan(d[1]/(g*(1-EARTH_ELLIPTICITY_SQUARED)));do{var e=a.latitude;var b=Math.sin(a.latitude);var c=Math.cos(a.latitude);var f=1*EARTH_ELLIPTICITY_SQUARED/Math.sqrt(1-b*b*EARTH_ELLIPTICITY_SQUARED);b=d[1]+f*b*b*b;c=g-f*c*c*c;a.latitude=Math.atan(b/c);m++}while(Math.abs(e-a.latitude)>DELTA_LATITUDE_RADIANS&&10>m);a.longitude=Math.atan2(d[2],-d[0]);a.altitude=g/Math.cos(a.latitude)-1/Math.sqrt(1-EARTH_ELLIPTICITY_SQUARED*
Math.sin(a.latitude)*Math.sin(a.latitude))}else a.longitude=0,a.latitude=Math.atan2(d[1],0),a.altitude=d[1]/Math.sin(a.latitude)-EARTH_SEMI_MINOR_AXIS_KM/EARTH_SEMI_MAJOR_AXIS_KM}
function longitudeToString(a,d,g){a%=360;-180>a&&(a+=360);180<a&&(a-=360);if(d){var m=Math.round(Math.abs(3600*a));var e="00"+m%60;var b="00"+Math.floor(m/60%60);m="   "+Math.floor(m/3600)}else m=Math.round(Math.abs(60*a)),b="00"+m%60,m="   "+Math.floor(m/60);b=m.substr(m.length-3)+"&deg;"+b.substr(b.length-2)+"&prime;";d&&(b+=e.substr(e.length-2)+"&Prime;");b=0<=a?b+" E":b+" W";return b=g?b.replace(/\s/g,"&nbsp;"):b.trim()}
function latitudeToString(a,d,g){var m="",e=0;if(90>=a||-90<=a){if(d){var b=Math.round(Math.abs(3600*a));e="00"+b%60;m="00"+Math.floor(b/60%60);b="  "+Math.floor(b/3600)}else b=Math.round(Math.abs(60*a)),m="00"+Math.floor(b%60),b="  "+Math.floor(b/60);m=b.substr(b.length-2)+"&deg;"+m.substr(m.length-2)+"&prime;";d&&(m+=e.substr(e.length-2)+"&Prime;");m=0<=a?m+" N":m+" S"}return m=g?m.replace(/\s/g,"&nbsp;"):m.trim()}
function azimuthToString(a,d){a="   "+a.toFixed(2);a=a.substr(a.length-6);return a=d?a.replace(/\s/g,"&nbsp;"):a.trim()}function elevationToString(a,d){a="   "+a.toFixed(2);a=a.substr(a.length-6);return a=d?a.replace(/\s/g,"&nbsp;"):a.trim()}function altitudeObserverToString(a){return parseFloat(a).toFixed(0).toString()+"m"}function altitudeSatelliteToString(a){return a.toFixed(1).toString()+" &#x339E;"}
function rangeToString(a,d){a=a.toFixed(1);var g="     "+a;g=g.substr(g.length-Math.max(7,a.length));return g=d?g.replace(/\s/g,"&nbsp;"):g.trim()}function rangeRateToString(a,d){a=a.toFixed(2);var g="     "+a;g=g.substr(g.length-Math.max(5,a.length));return g=d?g.replace(/\s/g,"&nbsp;"):g.trim()}function updateTextureArray(a,d,g,m){m=Math.floor(CONVERT_ANGLE_TO_BYTE_ARRAY_VALUE*m);d=4*(d*FOOTPRINTS_ARRAY_NUM_ENTRIES+g);a[d+0]=255&m>>24;a[d+1]=255&m>>16;a[d+2]=255&m>>8;a[d+3]=255&m>>0}
function refractionCorrectionRadians(a){var d=0;0>a&&(a=0);a<=glMatrix.toRadian(89.89)&&(d=1013.25/1010*(283/273)*glMatrix.toRadian(1.02/(60*Math.tan(a+10.3/(a+5.11)))));return d}function getAngularDistanceRadians(a,d){var g=0;refractionCorrection&&(d-=refractionCorrectionRadians(d));0<a&&(g=Math.acos(Math.cos(d)/(1+a))-d);return g}
function julianDate(a){var d=a.getUTCFullYear(),g=a.getUTCMonth()+1,m=a.getUTCDate(),e=a.getUTCHours(),b=Math.ceil((g-14)/12);e+=a.getUTCMinutes()/60+a.getUTCSeconds()/3600+a.getUTCMilliseconds()/36E5;return m-32075+Math.floor(1461*(d+4800+b)/4)+Math.floor(367*(g-2-12*b)/12)-3*Math.floor(Math.floor((d+4900+b)/100)/4)+(e/24-.5)}
function updateSatellites(a){var d=0;satellitesToDisplay.forEach(function(g){var m=jsonSatellites["S"+g];if(m){var e=!0;a||(e=updateSatellite(m,g));e&&m!=objectReport&&satellitesToDisplay.length<MAX_NUM_SATELLITES&&(updateSatelliteFootprint(m,d),d++)}});objectReport&&!objectReport.isObserver&&(updateSatelliteFootprint(objectReport,d),d++);"projectionPerspective"===projection?(gl.useProgram(shaderProgramGlobePerspective),gl.uniform1i(shaderProgramGlobePerspective.numSatellites,d)):"projectionCylindrical"===
projection?(gl.useProgram(shaderProgramGlobeCylindrical),gl.uniform1i(shaderProgramGlobeCylindrical.numSatellites,d)):"projectionRobinson"===projection?(gl.useProgram(shaderProgramGlobeRobinson),gl.uniform1i(shaderProgramGlobeRobinson.numSatellites,d)):"projectionElliptical"===projection?(gl.useProgram(shaderProgramGlobeElliptical),gl.uniform1i(shaderProgramGlobeElliptical.numSatellites,d)):"projectionSinusoidal"===projection&&(gl.useProgram(shaderProgramGlobeSinusoidal),gl.uniform1i(shaderProgramGlobeSinusoidal.numSatellites,
d));gl.bindTexture(gl.TEXTURE_2D,globeTextureFootprints);try{gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,FOOTPRINTS_ARRAY_NUM_ENTRIES,FOOTPRINTS_ARRAY_NUM_SATELLITES,0,gl.RGBA,gl.UNSIGNED_BYTE,footprintData),footprintTextureDefined=!0}catch(g){messageError(g.message)}gl.bindTexture(gl.TEXTURE_2D,null)}
function calculateSymbolSize(){symbolSizeObserver=Math.round(DEFAULT_SYMBOL_SIZE+symbolSizeObserverOffset*SYMBOL_SIZE_SCALE+gl.drawingBufferWidth/SIZE_SCALE_FACTOR);symbolSizeSatellite=Math.round(DEFAULT_SYMBOL_SIZE+symbolSizeSatelliteOffset*SYMBOL_SIZE_SCALE+gl.drawingBufferWidth/SIZE_SCALE_FACTOR);1>symbolSizeObserver&&(symbolSizeObserver=1);1>symbolSizeSatellite&&(symbolSizeSatellite=1)}
function calculateFontSize(){fontSize=Math.round(fontSizeBase+DEFAULT_FONT_SIZE+gl.drawingBufferWidth/SIZE_SCALE_FACTOR);6>fontSize&&(fontSize=6)}function handleMouseLeave(a){eventLast=null}function init(){}function addDisplayedSatellite(a){if(-1===satellitesToDisplay.indexOf(a)){var d;if(d=jsonSatellites["S"+a])if(initializeSatellite(d,a))satellitesToDisplay.push(a);else try{delete d.tracking}catch(g){}}}function selectSatellite(a){selectedObserver=null;selectedSatellite=a}
function getColorContrast(a){var d="#ffffff";var g=.299*a[0];g+=.587*a[1];g+=.114*a[2];.5<g&&(d="#000000");return d}
function sortTableHeader(a,d,g){if(d&&d.firstChild&&d.firstChild.firstChild){d=d.firstChild.firstChild.childNodes;var m;for(m=0;m<d.length;m++)if(a.target===d[m]){if(Math.abs(g[0])===m)g[0]=-g[0];else{for(a=0;a<g.length;a++)if(Math.abs(g[a])===m){g.splice(a,1);break}g.unshift(m)}for(a=0;a<d.length;a++)m=a===Math.abs(g[0])?0>g[0]||Object.is(g[0],-0)?"url('Sort/Up.png')":"url('Sort/Down.png')":"url('Sort/UpDownGray.png')",d[a].style.backgroundImage!==m&&(d[a].style.backgroundImage=m);break}}}
function getCellValue(a){return a.firstElementChild&&"checkbox"===a.firstElementChild.type?a.firstElementChild.checked?1:0:a.innerText}
function sortTable(a,d,g){var m=document.getElementById(a);if(m){var e=document.createElement("tbody"),b;d.sort(function(c,f){for(b=0;b<g.length;b++){var h=g[b],l=Math.abs(h),p=getCellValue(c.childNodes[l]),k=getCellValue(f.childNodes[l]);0===l&&(h=Object.is(h,-0)?-1:1);if(p>k)return h;if(p<k)return-h}return 0});e.setAttribute("id",a);for(b=0;b<d.length;b++)e.appendChild(d[b]);m.parentNode.replaceChild(e,m);e.addEventListener("keypress",interactedWithSatelliteEntry);e.addEventListener("click",interactedWithSatelliteEntry)}}
function sortFilledTable(a,d){var g=document.getElementById(a);g&&setTimeout(function(){var m=Array.prototype.slice.call(g.childNodes,0);sortTable(a,m,d)},0)}function setColumnWidths(a,d){d=document.getElementById(d);a=document.getElementById(a);if(d&&a)try{var g=d.firstElementChild.firstElementChild.childNodes,m=a.firstElementChild.firstElementChild.childNodes,e=g.length;for(a=0;a<e;a++)m[a].style.width=g[a].getBoundingClientRect().width+"px"}catch(b){}}
function setObserverPositionInShaders(){gl.useProgram(shaderProgramTrackRadar);gl.uniform3f(shaderProgramTrackRadar.observerLongLatAlt,observer.tracking.longitude,observer.tracking.latitude,observer.tracking.altitude/1E3);gl.useProgram(shaderProgramRADec);gl.uniform1f(shaderProgramRADec.longitude,observer.tracking.longitude);gl.uniform1f(shaderProgramRADec.latitude,observer.tracking.latitude);gl.useProgram(shaderProgramStars);gl.uniform1f(shaderProgramStars.longitude,observer.tracking.longitude);
gl.uniform1f(shaderProgramStars.latitude,observer.tracking.latitude)}
function updateObserverPosition(){observer.tracking.longitude%=2*Math.PI;observer.tracking.longitude>Math.PI?observer.tracking.longitude-=2*Math.PI:observer.tracking.longitude<-Math.PI&&(observer.tracking.longitude+=2*Math.PI);observer.tracking.latitude=Math.max(observer.tracking.latitude,-Math.PI/2);observer.tracking.latitude=Math.min(observer.tracking.latitude,Math.PI/2);observer.pos=toCartesianECEF(observer.tracking.longitude,observer.tracking.latitude,observer.tracking.altitude);if(0<observer.title.length)observer[JSON_NAMES][0]=
observer.title,document.getElementById("radarCenter").innerHTML=observer.title;else{var a,d=longitudeToString(180*observer.tracking.longitude/Math.PI,!1,!0)+"&nbsp;&nbsp;"+latitudeToString(180*observer.tracking.latitude/Math.PI,!1,!0);observer[JSON_NAMES][0]=d;if(a=document.getElementById("radarCenter"))a.innerHTML=d}setObserverPositionInShaders();updateObserverReportedPosition()}
function setObserverPosition(a,d,g){observer.tracking.longitude=glMatrix.toRadian(a);observer.tracking.latitude=glMatrix.toRadian(d);observer.tracking.altitude=0;updateObserverPosition()}function setPosition(a){setObserverPosition(a.coords.longitude,a.coords.latitude,0)};function ThetaGRadians(a){var d=(a+.5)%1;a=(a-d-2451545)/36525;d=(24110.54841+a*(8640184.812866+a*(.093104-6.2E-6*a))+86636.555366976*d)%86400;0>d&&(d+=86400);return 2*Math.PI*d/86400}
function subSolarPoint(a){var d=(a-2415020)/36525;var g=358.475844+35999.04975*d%360;g=3600*(279.696678+36000.768925*d%360)+((6910.1-17.2*d)*Math.sin(g*Math.PI/180)+72.3*Math.sin(2*g*Math.PI/180));var m=(259.183275-1934.142008*d%360)*Math.PI/180;g=g-20.5-17.2*Math.sin(m);d=(23.452294-.0130125*d+9.2*Math.cos(m)/3600)*Math.PI/180;g=g/3600*Math.PI/180;return{latitude:Math.asin(Math.sin(g)*Math.sin(d)),longitude:Math.atan2(Math.sin(g)*Math.cos(d),Math.cos(g))-ThetaGRadians(a)}};window.addEventListener("load",loaded);window.addEventListener("resize",resized);function showingConfigurationDisplay(){return bShowFindSatellite||bShowSelectProjection||bShowSelectObserver||bShowInformation||bShowSettings}function cancelFullScreen(a){var d=a.cancelFullScreen||a.webkitCancelFullScreen||a.mozCancelFullScreen||a.exitFullscreen;d&&d.call(a)}function requestFullScreen(a){var d=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;d&&d.call(a)}
function toggleFull(){document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen?cancelFullScreen(document):requestFullScreen(document.body)}
function updateElement(a,d,g){a=document.getElementById(a);d=document.getElementById(d);g?(d&&(d.style.backgroundColor="#007f00"),a&&"block"!==a.style.display&&Object.assign(a.style,{display:"block",pointerEvents:"auto"})):(d&&(d.style.backgroundColor="#000000"),a&&"none"!==a.style.display&&Object.assign(a.style,{display:"none",pointerEvents:"none"}))}
function showElements(){updateElement("itemFindSatellite","buttonSatellite",bShowFindSatellite);updateElement("itemSelectObserver","buttonObserver",bShowSelectObserver);updateElement("itemSelectProjection","buttonProjection",bShowSelectProjection);updateElement("itemInformation","buttonInformation",bShowInformation);updateElement("itemSettings","buttonSettings",bShowSettings);bShowFindSatellite||bShowSelectObserver||bShowSelectProjection||bShowInformation||bShowSettings?document.getElementById("buttonContainer").style.zIndex=
"820":document.getElementById("buttonContainer").style.zIndex="780";handleTimeAndConfiguartionDisplay();var a=document.getElementById(observer.element);"projectionRadar"===projection?(a&&(a.style.display="none"),document.getElementById("radarText").style.display="block"):(a&&(a.style.display="block"),document.getElementById("radarText").style.display="none");"projectionTextual"===projection?(document.getElementById("divTableTextualOuter").style.visibility="visible",document.getElementById("container").style.visibility=
"hidden",document.getElementById("labelContainer").style.display="none",document.getElementById("lonandlat").style.display="none",document.getElementById("position").style.display="none"):(document.getElementById("divTableTextualOuter").style.visibility="hidden",document.getElementById("container").style.visibility="visible",document.getElementById("labelContainer").style.display="block",document.getElementById("lonandlat").style.display="block",document.getElementById("position").style.display="block");
bShowSettings&&("projectionRadar"===projection?(document.getElementById("settingsVisual").style.display="none",document.getElementById("settingsRadar").style.display="block",document.getElementById("settingsTextual").style.display="none"):"projectionTextual"===projection?(document.getElementById("settingsVisual").style.display="none",document.getElementById("settingsRadar").style.display="none",document.getElementById("settingsTextual").style.display="block"):(document.getElementById("settingsVisual").style.display=
"block",document.getElementById("settingsRadar").style.display="none",document.getElementById("settingsTextual").style.display="none","projectionPerspective"===projection?(document.getElementById("displaySkyBackgroundSwitch").style.visibility="visible",document.getElementById("displaySkyBackground").innerHTML="Display sky image"):(document.getElementById("displaySkyBackgroundSwitch").style.visibility="hidden",document.getElementById("displaySkyBackground").innerHTML="Background color")));bShowFindSatellite||
(bShowSatelliteSettings=!1,document.getElementById("divSatelliteSettings").style.visibility="hidden");bShowSelectObserver||(bShowObserverSettings=!1,document.getElementById("divObserverSettings").style.visibility="hidden");showingConfigurationDisplay()?(document.getElementById("frameouter").style.zIndex="800",document.getElementById("buttonScreenClose").style.display="block"):(document.getElementById("frameouter").style.zIndex="500",document.getElementById("buttonScreenClose").style.display="none");
bShowSelectObserver&&setTimeout(function(){var d=observerMap.getCenter();google.maps.event.trigger(observerMap,"resize");observerMap.setCenter(d)},100)}function resetVisible(){bShowSettings=bShowInformation=bShowSelectProjection=bShowSelectObserver=bShowFindSatellite=!1}
function pressedButton(a){a.target&&("buttonEllipsis"===a.target.id?hideShowButtons():"buttonSatellite"===a.target.id?findSatellite():"buttonObserver"===a.target.id?selectObserver():"buttonProjection"===a.target.id?selectProjection():"buttonFullscreen"===a.target.id?toggleFull():"buttonRefresh"===a.target.id?reload():"buttonInformation"===a.target.id?showInformation():"buttonSettings"===a.target.id&&showSettings())}function pressedCloseButton(a){resetVisible();showElements()}
function hideShowButtons(){var a=document.getElementById("buttonsInternal"),d=document.getElementById("dateandtimespan");null!=a&&null!=d&&("hidden"==a.style.visibility?(d.style.visibility="hidden",a.style.visibility="visible"):(a.style.visibility="hidden",d.style.visibility="visible"))}function findSatellite(){var a=!bShowFindSatellite;resetVisible();bShowFindSatellite=a;showElements();bShowFindSatellite&&resizedInternal()}
function selectObserver(){var a=!bShowSelectObserver;resetVisible();bShowSelectObserver=a;showElements();bShowSelectObserver&&resizedInternal()}function selectProjection(){var a=!bShowSelectProjection;resetVisible();bShowSelectProjection=a;showElements()}function showInformation(){var a=!bShowInformation;resetVisible();bShowInformation=a;showElements()}function showSettings(){var a=!bShowSettings;resetVisible();bShowSettings=a;showElements()}
function setDefaultSatelliteSettings(){var a=getSatelliteSettings();void 0!=a.color&&(satelliteDefaultSettings.color=makeColor(a.color,1));void 0!=a.label&&(satelliteDefaultSettings.label=a.label);void 0!=a.fillBackground&&(satelliteDefaultSettings.fillBackground=a.fillBackground);void 0!=a.colorBackground&&(satelliteDefaultSettings.colorBackground=makeColor(a.colorBackground,1));void 0!=a.symbol&&(satelliteDefaultSettings.symbol=a.symbol);void 0!=a.footprintAlpha&&(satelliteDefaultSettings.footprintAlpha=
a.footprintAlpha);void 0!=a.footprintShade&&(satelliteDefaultSettings.footprintShade=a.footprintShade);void 0!=a.footprintOutline&&(satelliteDefaultSettings.footprintOutline=a.footprintOutline);void 0!=a.footprintAngles&&(satelliteDefaultSettings.footprintAngles=a.footprintAngles);void 0!=a.trackUnits&&(satelliteDefaultSettings.trackUnits=a.trackUnits);void 0!=a.trackForward&&(satelliteDefaultSettings.trackForward=a.trackForward);void 0!=a.trackBackward&&(satelliteDefaultSettings.trackBackward=a.trackBackward);
void 0!=a.trackStyle&&(satelliteDefaultSettings.trackStyle=a.trackStyle)}function applyAndHideSatelliteSettings(){bShowSatelliteSettings=!1;setSelectedSatelliteSettings();document.getElementById("divSatelliteSettings").style.visibility="hidden";updateScene(!1)}function resetSatelliteSettings(){fillSatelliteSettings(satelliteDefaultSettings)}
function showSatelliteSettings(){(bShowSatelliteSettings=!bShowSatelliteSettings)?(document.getElementById("divSatelliteSettings").style.visibility="visible",fillSelectedSatelliteSettings()):document.getElementById("divSatelliteSettings").style.visibility="hidden"}function applyAndHideObserverSettings(){bShowObserverSettings=!1;setObserverSettings();document.getElementById("divObserverSettings").style.visibility="hidden";redrawScene()}function resetObserverSettings(){fillObserverSettings()}
function showObserverSettings(){(bShowObserverSettings=!bShowObserverSettings)?(document.getElementById("divObserverSettings").style.visibility="visible",fillObserverSettings()):document.getElementById("divObserverSettings").style.visibility="hidden"}function removeDisplayedSatellite(a){var d=satellitesToDisplay.indexOf(a);return 0<=d?(satellitesToDisplay.splice(d,1),deleteSatellite(a),!0):!1}
function removeDisplayedSatelliteAndUncheck(a){if(removeDisplayedSatellite(a)&&(a=document.getElementById(a))&&(a=a.firstChild)){var d=a.firstChild;a.className="unselected";d&&(d.checked=!1,setSelectedSatellitesAllNone())}}function satellitesUpdateProgress(a){var d=document.getElementById("progress");d&&(a.lengthComputable?d.value=a.loaded/a.total*100:(a=d.value+5,100<a&&(a=0),d.value=a))}function satellitesTransferFailed(a){document.getElementById("loading").style.visibility="hidden"}
function satellitesTransferCanceled(a){document.getElementById("loading").style.visibility="hidden"}
function satellitesTransferComplete(a){var d=document.getElementById("progress");null!=d&&(d.value=100);loadCategories();d=new Uint8Array(a.currentTarget.response);d=pako.inflate(d,{to:"string"});if(void 0===jsonSatellites||0===jsonSatellites.length)try{jsonSatellites=JSON.parse(d)}catch(f){console.log(f)}else try{var g;var m=JSON.parse(d);for(g in m){var e=m[g];if(jsonSatellites.hasOwnProperty(g)){var b=jsonSatellites[g];e.hasOwnProperty(JSON_OMM_VALUES)&&(b[JSON_OMM_VALUES]=e[JSON_OMM_VALUES]);
if(e.hasOwnProperty(JSON_OMM_VALUES))b[JSON_OMM_VALUES]=e[JSON_OMM_VALUES],b.tracking.satrec&&initializeSatellite(b,g);else{var c=g.substr(1,g.length-1);removeDisplayedSatellite(c);b.hasOwnProperty(JSON_OMM_VALUES)&&delete b[JSON_OMM_VALUES]}}else jsonSatellites[g]=m[g]}}catch(f){}a.currentTarget.responseText=null}function categoriesUpdateProgress(a){var d=document.getElementById("progress");null!=d&&(a.lengthComputable?d.value=a.loaded/a.total*100:(a=d.value+5,100<a&&(a=0),d.value=a))}
function categoriesTransferFailed(a){document.getElementById("loading").style.visibility="hidden"}function categoriesTransferCanceled(a){document.getElementById("loading").style.visibility="hidden"}
function categoriesTransferComplete(a){var d=document.getElementById("buttonContainer"),g=document.getElementById("progress"),m=document.getElementById("loading");null!=g&&(g.value=100);try{jsonCategories=JSON.parse(a.currentTarget.responseText)}catch(e){}setInitialParameters();a.currentTarget.responseText=null;fillSatelliteCategories();null!=g&&(g.value=100);null!=m&&(m.style.visibility="hidden");null!=d&&(d.style.opacity=.25);updateTime()}
function loadCategories(){oReqCategories.addEventListener("progress",categoriesUpdateProgress);oReqCategories.addEventListener("load",categoriesTransferComplete);oReqCategories.addEventListener("error",categoriesTransferFailed);oReqCategories.addEventListener("abort",categoriesTransferCanceled);oReqCategories.open("GET","Celestrak/categories.txt");oReqCategories.send()}function stellarDataUpdateProgress(a){}function stellarDataTransferFailed(a){}function stellarDataTransferCanceled(a){}
function stellarDataTransferComplete(a){a=new Uint8Array(a.currentTarget.response);a=pako.inflate(a,{to:"string"});jsonStellarData=JSON.parse(a);initConstellationBuffers()}
function loadStellarData(){oReqStellarData.addEventListener("progress",stellarDataUpdateProgress);oReqStellarData.addEventListener("load",stellarDataTransferComplete);oReqStellarData.addEventListener("error",stellarDataTransferFailed);oReqStellarData.addEventListener("abort",stellarDataTransferCanceled);oReqStellarData.open("GET","stellar-data.txt.gz");oReqStellarData.responseType="arraybuffer";oReqStellarData.send()}
function setInitialParameters(){for(var a=window.location.search.substring(1).split("&"),d=a.length,g=0;g<d;g++){var m=a[g].split("=");if(2==m.length){var e=m[0].trim().toUpperCase();if("DISPLAY"===e){m=m[1].split(",");e=m.length;for(var b=0;b<e;b++){var c=m[b].trim();addDisplayedSatellite(c)}}else"PROJECTION"===e?(m=m[1].trim().toLowerCase(),"perspective"===m?projection="projectionPerspective":"cylindrical"===m?projection="projectionCylindrical":"robinson"===m?projection="projectionRobinson":"elliptical"===
m?projection="projectionElliptical":"sinusoidal"===m?projection="projectionSinusoidal":"radar"===m?projection="projectionRadar":"textual"===m&&(projection="projectionTextual"),switchedProjection(),showElements()):"OBSERVER"===e?(e=m[1].split(","),2==e.length&&(m=parseFloat(e[0]),e=parseFloat(e[1]),-360<=m&&360>=m&&-90<=e&&90>=e&&(observer.tracking.longitude=glMatrix.toRadian(m),observer.tracking.latitude=glMatrix.toRadian(e)),updateObserverPosition())):"UTC"===e&&!0===!!m[1]&&(timeZoneUTC=!0,document.getElementById("timeZoneUTC").checked=
!0)}}0===satellitesToDisplay.length&&jsonSatellites.hasOwnProperty("S"+initialSatelliteID)&&addDisplayedSatellite(initialSatelliteID);loadSatelliteDisplayed(null)}function switchedProjection(){for(var a,d=projections.length,g=0;g<d;g++)if(a=document.getElementById(projections[g]))a.style.backgroundColor=projections[g]===projection?"#007f00":"#000000"}
function projectionSwitch(a){"projection"===a.target.parentNode.id.slice(0,10)&&(projection=a.target.parentNode.id,switchedProjection(),redrawScene())}
function applyShaderSettingsCenter(){var a=(centralPosition.longitudeRadians+2*Math.PI)/(2*Math.PI)%1;gl.useProgram(shaderProgramGlobeCylindrical);gl.uniform1f(shaderProgramGlobeCylindrical.centralLongitude,a);gl.useProgram(shaderProgramTrackCylindrical);gl.uniform1f(shaderProgramTrackCylindrical.centralLongitude,a);gl.useProgram(shaderProgramGlobeElliptical);gl.uniform1f(shaderProgramGlobeElliptical.centralLongitude,a);gl.useProgram(shaderProgramTrackElliptical);gl.uniform1f(shaderProgramTrackElliptical.centralLongitude,
a);gl.useProgram(shaderProgramGlobeSinusoidal);gl.uniform1f(shaderProgramGlobeSinusoidal.centralLongitude,a);gl.useProgram(shaderProgramTrackSinusoidal);gl.uniform1f(shaderProgramTrackSinusoidal.centralLongitude,a);gl.useProgram(shaderProgramGlobeRobinson);gl.uniform1f(shaderProgramGlobeRobinson.centralLongitude,a);gl.useProgram(shaderProgramTrackRobinson);gl.uniform1f(shaderProgramTrackRobinson.centralLongitude,a)}
function enterSatellite(a){if(a.target!==a.currentTarget){var d=a.target;if("satellite"===d.className)d=d.id.replace("SATELLITE_",""),objectReport=jsonSatellites["S"+d],updateObjectReport();else if("satelliteHoverShape"===d.className)d=d.id.replace("SATELLITE_SHAPE_",""),objectReport=jsonSatellites["S"+d],updateObjectReport();else if("observer"===d.className||"observerHoverShape"===d.className)objectReport=observer,updateObjectReport()}a.stopPropagation()}
function updateScene(a){updateSatellites(a);redrawScene()}
function redrawScene(){var a=null,d=!0;"projectionPerspective"===projection?a=shaderProgramGlobePerspective:"projectionCylindrical"===projection?a=shaderProgramGlobeCylindrical:"projectionElliptical"===projection?a=shaderProgramGlobeElliptical:"projectionSinusoidal"===projection?a=shaderProgramGlobeSinusoidal:"projectionRobinson"===projection?a=shaderProgramGlobeRobinson:"projectionRadar"!==projection&&(d=!1);if(a){var g=satellitesToDisplay.length;gl.useProgram(a);gl.uniform1f(a.solarLongitude,solarPosition.longitude);
gl.uniform1f(a.solarLatitude,solarPosition.latitude);g>=MAX_NUM_SATELLITES&&(g=0,objectReport&&(objectReport.isObserver||(g=1)));gl.uniform1i(a.numSatellites,g)}applySkyPerspectiveRotation();!objectCenter||centralPosition.longitudeRadians===objectCenter.tracking.longitude&&centralPosition.latitudeRadians===objectCenter.tracking.latitude||(centralPosition.longitudeRadians=objectCenter.tracking.longitude,centralPosition.latitudeRadians=objectCenter.tracking.latitude,applyShaderSettingsCenter(),applyPerspectiveRotation(),
updateReportedPosition(posX,posY));gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);mat4.identity(scaleMatrix);"projectionPerspective"===projection?(bDisplayEarth&&drawGlobePerspective(),bDisplaySky&&drawSkyPerspective()):"projectionCylindrical"===projection&&bDisplayEarth?drawGlobeCylindrical():"projectionRobinson"===projection&&bDisplayEarth?drawGlobeRobinson():"projectionElliptical"===projection&&bDisplayEarth?drawGlobeElliptical():"projectionSinusoidal"===projection&&bDisplayEarth?drawGlobeSinusoidal():
"projectionRadar"===projection?drawGlobeRadar():"projectionTextual"===projection&&drawTextual();d&&(divLabelContainerNew=document.createElement("div"))&&(divLabelContainerNew.id="labelContainer");objectReport&&objectReport.isObserver?(drawSatellites(),drawObserver()):(drawObserver(),drawSatellites());d?(document.getElementById("background").replaceChild(divLabelContainerNew,document.getElementById("labelContainer")),divLabelContainerNew.addEventListener("mouseenter",enterSatellite,!0)):"projectionTextual"===
projection&&setColumnWidths("tableHeadTextual","tableBodyTextual");updateObjectReport();gl.disable(gl.BLEND)}
function loadSatellites(){var a=document.getElementById("progress"),d=document.getElementById("loading");null!=a&&(document.getElementById("progress").value=0);null!=d&&(d.style.visibility="visible");oReqSatellites.addEventListener("progress",satellitesUpdateProgress);oReqSatellites.addEventListener("load",satellitesTransferComplete);oReqSatellites.addEventListener("error",satellitesTransferFailed);oReqSatellites.addEventListener("abort",satellitesTransferCanceled);oReqSatellites.open("GET","Celestrak/satellites.txt.gz");
oReqSatellites.responseType="arraybuffer";oReqSatellites.send()}function reload(){loadSatellites()}
function updateCentralPosition(a){var d=(EARTH_SEMI_MAJOR_AXIS_KM+centralPosition.altitudeMeters/1E3)/EARTH_SEMI_MAJOR_AXIS_KM;a&&(objectCenter=null);centralPosition.latitudeRadians=Math.max(centralPosition.latitudeRadians,-Math.PI/2);centralPosition.latitudeRadians=Math.min(centralPosition.latitudeRadians,Math.PI/2);centralPosition.longitudeRadians%=2*Math.PI;centralPosition.longitudeRadians<=-Math.PI?centralPosition.longitudeRadians+=2*Math.PI:centralPosition.longitudeRadians>Math.PI&&(centralPosition.longitudeRadians-=
2*Math.PI);distanceScale=d;angleGrazingEarthRadians=Math.asin(1/distanceScale);applyShaderSettingsCenter();applySkyPerspectiveRotation();applyPerspectiveRotation();updateReportedPosition(posX,posY);redrawScene()}function getDistance(a){return Math.sqrt((a.touches[0].clientX-a.touches[1].clientX)*(a.touches[0].clientX-a.touches[1].clientX)+(a.touches[0].clientY-a.touches[1].clientY)*(a.touches[0].clientY-a.touches[1].clientY))}
function handleTouchStart(a){1==a.touches.length?(posX=a.touches[0].clientX,posY=a.touches[0].clientY):2==a.touches.length&&(gScale=getDistance(a));mouseDown=!0}
function handleTouchMove(a){if(showingConfigurationDisplay())return!1;if(1==a.touches.length)if(!0===mouseDown&&null!=posX&&null!=posY){if(posX!=a.touches[0].clientX||posY!=a.touches[0].clientY)centralPosition.longitudeRadians+=glMatrix.toRadian((posX-a.touches[0].clientX)/2),centralPosition.latitudeRadians+=glMatrix.toRadian((a.touches[0].clientY-posY)/2),posX=a.touches[0].clientX,posY=a.touches[0].clientY,updateCentralPosition(!0)}else posX=a.touches[0].clientX,posY=a.touches[0].clientY,updateReportedPosition(posX,
posY);else if(2==a.touches.length&&"projectionPerspective"==projection){var d=getDistance(a);centralPosition.altitudeMeters-=.01*(d-gScale)*centralPosition.altitudeMeters;centralPosition.altitudeMeters>1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM?centralPosition.altitudeMeters=1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM:centralPosition.altitudeMeters<1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM&&(centralPosition.altitudeMeters=1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM);gScale=d;calculateLineWidthPerspective();posY=posX=null;updateCentralPosition(!1)}eventLast=
a}function handleMouseMove(a){if(showingConfigurationDisplay())return!1;if(!0===mouseDown&&null!=posX&&null!=posY){if(posX!=a.clientX||posY!=a.clientY)centralPosition.longitudeRadians+=glMatrix.toRadian((posX-a.clientX)/2),centralPosition.latitudeRadians+=glMatrix.toRadian((a.clientY-posY)/2),posX=a.clientX,posY=a.clientY,updateCentralPosition(!0)}else posX=a.clientX,posY=a.clientY,updateReportedPosition(posX,posY);eventLast=a}
function handleMouseUp(a){updateReportedPosition(a.clientX,a.clientY);mouseDown=!1}function handleMouseDown(a){posX=a.clientX;posY=a.clientY;mouseDown=!0}
function handleMouseWheel(a){if(showingConfigurationDisplay()||"projectionPerspective"!=projection)return!1;centralPosition.altitudeMeters-=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail))*centralPosition.altitudeMeters*.1;centralPosition.altitudeMeters>1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM?centralPosition.altitudeMeters=1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM:centralPosition.altitudeMeters<1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM&&(centralPosition.altitudeMeters=1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM);calculateLineWidthPerspective();
updateCentralPosition(!1)}function cancelInterval(){timeout&&clearTimeout(timeout);interval&&clearInterval(interval)}function createInterval(a){cancelInterval();offsetSeconds+=a;updateTime();timeout=setTimeout(function(){interval=setInterval(function(){offsetSeconds+=a;updateTime()},50)},500)}
function addInterval(a){a.target&&("subtractDay"===a.target.id?createInterval(-86400):"addDay"===a.target.id?createInterval(86400):"subtractHour"===a.target.id?createInterval(-3600):"addHour"===a.target.id?createInterval(3600):"subtractMinute"===a.target.id?createInterval(-60):"addMinute"===a.target.id&&createInterval(60))}
function play(){var a;paused=!paused;if(a=document.getElementById("dateandtimeplay"))paused?(a.src="Time/Play128.png",a.classList.add("dateandtimebuttonhighlighted")):(a.src="Time/Pause128.png",a.classList.remove("dateandtimebuttonhighlighted"),updateTime())}function zero(){offsetSeconds=0;updateTime()}
function handleKeyDown(a){if(!showingConfigurationDisplay())if(a.shiftKey&&a.altKey)if("Add"===a.key||"+"===a.key)offsetSeconds+=1,updateTime();else{if("Subtract"===a.key||"-"===a.key)--offsetSeconds,updateTime()}else if(a.shiftKey)if("ArrowUp"===a.key||"Up"===a.key)centralPosition.altitudeMeters-=.1*centralPosition.altitudeMeters,centralPosition.altitudeMeters>1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM?centralPosition.altitudeMeters=1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM:centralPosition.altitudeMeters<1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM&&
(centralPosition.altitudeMeters=1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM),updateCentralPosition(!1);else if("ArrowDown"===a.key||"Down"===a.key)centralPosition.altitudeMeters+=.1*centralPosition.altitudeMeters,centralPosition.altitudeMeters>1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM?centralPosition.altitudeMeters=1E3*MAX_SPHERICAL_VIEW_ALTITUDE_KM:centralPosition.altitudeMeters<1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM&&(centralPosition.altitudeMeters=1E3*MIN_SPHERICAL_VIEW_ALTITUDE_KM),updateCentralPosition(!1);else if("Add"===
a.key||"+"===a.key)offsetSeconds+=3600,updateTime();else{if("Subtract"===a.key||"-"===a.key)offsetSeconds-=3600,updateTime()}else if(a.altKey)if("Add"===a.key||"+"===a.key)offsetSeconds+=86400,updateTime();else{if("Subtract"===a.key||"-"===a.key)offsetSeconds-=86400,updateTime()}else if(a.ctrlKey)if("ArrowLeft"===a.key||"Left"===a.key)observer.tracking.longitude-=glMatrix.toRadian(1),updateObserverPosition(),redrawScene(),updateObjectReport();else if("ArrowRight"===a.key||"Right"===a.key)observer.tracking.longitude+=
glMatrix.toRadian(1),updateObserverPosition(),redrawScene(),updateObjectReport();else if("ArrowUp"===a.key||"Up"===a.key)observer.tracking.latitude+=glMatrix.toRadian(1),updateObserverPosition(),redrawScene(),updateObjectReport();else{if("ArrowDown"===a.key||"Down"===a.key)observer.tracking.latitude-=glMatrix.toRadian(1),updateObserverPosition(),redrawScene(),updateObjectReport()}else"ArrowLeft"===a.key||"Left"===a.key?(centralPosition.longitudeRadians+=glMatrix.toRadian(1),updateCentralPosition(!0)):
"ArrowRight"===a.key||"Right"===a.key?(centralPosition.longitudeRadians-=glMatrix.toRadian(1),updateCentralPosition(!0)):"ArrowUp"===a.key||"Up"===a.key?(centralPosition.latitudeRadians-=glMatrix.toRadian(1),updateCentralPosition(!0)):"ArrowDown"===a.key||"Down"===a.key?(centralPosition.latitudeRadians+=glMatrix.toRadian(1),updateCentralPosition(!0)):"Delete"===a.key||"Del"===a.key||"d"===a.key||"x"===a.key?deleteObjectReport():"Add"===a.key||"+"===a.key?(offsetSeconds+=60,updateTime()):"Subtract"===
a.key||"-"===a.key?(offsetSeconds-=60,updateTime()):"c"===a.key?centerObjectReport():"e"===a.key?editObjectReport():"i"===a.key?objectReport&&objectReport.hasOwnProperty(JSON_OMM_VALUES)&&window.open(WEBSITE_NSSDC+objectReport[JSON_OMM_VALUES][OMM_OBJECT_ID]):"o"===a.key?mouseLongitude&&mouseLatitude&&(setObserverPosition(mouseLongitude,mouseLatitude,0),redrawScene(),updateObjectReport()):"z"===a.key&&(offsetSeconds=0,updateTime())}
function changeSettingInteger(a,d){gl.useProgram(shaderProgramGlobePerspective);gl.uniform1i(shaderProgramGlobePerspective[a],d);gl.useProgram(shaderProgramGlobeCylindrical);gl.uniform1i(shaderProgramGlobeCylindrical[a],d);gl.useProgram(shaderProgramGlobeElliptical);gl.uniform1i(shaderProgramGlobeElliptical[a],d);gl.useProgram(shaderProgramGlobeSinusoidal);gl.uniform1i(shaderProgramGlobeSinusoidal[a],d);gl.useProgram(shaderProgramGlobeRobinson);gl.uniform1i(shaderProgramGlobeRobinson[a],d)}
function changeSettingColor(a,d){gl.useProgram(shaderProgramGlobePerspective);gl.uniform4f(shaderProgramGlobePerspective[a],d[0],d[1],d[2],d[3]);gl.useProgram(shaderProgramGlobeCylindrical);gl.uniform4f(shaderProgramGlobeCylindrical[a],d[0],d[1],d[2],d[3]);gl.useProgram(shaderProgramGlobeElliptical);gl.uniform4f(shaderProgramGlobeElliptical[a],d[0],d[1],d[2],d[3]);gl.useProgram(shaderProgramGlobeSinusoidal);gl.uniform4f(shaderProgramGlobeSinusoidal[a],d[0],d[1],d[2],d[3]);gl.useProgram(shaderProgramGlobeRobinson);
gl.uniform4f(shaderProgramGlobeRobinson[a],d[0],d[1],d[2],d[3])}function changeSettingBackgroundColorRadar(){var a=document.getElementById("colorBackgroundRadar"),d=document.getElementById("colorBackground"),g=makeColor(a.value,1);a.style.backgroundColor=a.value;d.value=d.value;d.style.backgroundColor=a.value;gl.clearColor(g[0],g[1],g[2],1);redrawScene()}
function changeSettingBackgroundColor(){var a=document.getElementById("colorBackgroundRadar"),d=document.getElementById("colorBackground"),g=makeColor(d.value,1);d.style.backgroundColor=d.value;a.value=d.value;a.style.backgroundColor=d.value;gl.clearColor(g[0],g[1],g[2],1);redrawScene()}function changeSettingDisplaySky(){bDisplaySky=document.getElementById("displayBackground").checked;redrawScene()}
function changeSettingDisplayEarth(){bDisplayEarth=document.getElementById("displayEarth").checked;redrawScene()}function changeSettingDisplayImage(){var a=document.getElementById("displayImage").checked;changeSettingInteger("bUseSatelliteImage",a);redrawScene()}function changeSettingDisplayDayNight(){var a=document.getElementById("displayDayNight").checked;changeSettingInteger("bDisplayDayNight",a);redrawScene()}
function changeSettingColorDay(){var a=makeColor(document.getElementById("colorDay").value,1);document.getElementById("colorDay").style.backgroundColor=document.getElementById("colorDay").value;changeSettingColor("colorDay",a);redrawScene()}function changeSettingColorNight(){var a=makeColor(document.getElementById("colorNight").value,1);document.getElementById("colorNight").style.backgroundColor=document.getElementById("colorNight").value;changeSettingColor("colorNight",a);redrawScene()}
function changeSettingDisplayTerminator(){var a=document.getElementById("displayTerminator").checked;changeSettingInteger("bDisplayTerminator",a);redrawScene()}function changeSettingColorTerminator(){var a=makeColor(document.getElementById("colorTerminator").value,document.getElementById("alphaTerminator").value);document.getElementById("colorTerminator").style.backgroundColor=document.getElementById("colorTerminator").value;changeSettingColor("colorTerminator",a);redrawScene()}
function changeSettingDisplayLatLongGrid(){var a=document.getElementById("displayLatLongGrid").checked;changeSettingInteger("bDisplayLongitudeLatitudeGrid",a);redrawScene()}
function changeSettingColorLatLongGrid(){var a=makeColor(document.getElementById("colorLatLongGrid").value,document.getElementById("alphaLatLongGrid").value);document.getElementById("colorLatLongGrid").style.backgroundColor=document.getElementById("colorLatLongGrid").value;changeSettingColor("colorLongitudeLatitudeGrid",a);redrawScene()}function changeSettingDisplayBoundaries(){var a=document.getElementById("displayBoundaries").checked;changeSettingInteger("bDisplayBoundaries",a);redrawScene()}
function changeSettingDisplayBoundariesCoastline(){var a=document.getElementById("displayBoundariesCoastline").checked;changeSettingInteger("bDisplayBoundariesCoastlines",a);redrawScene()}function changeSettingDisplayBoundariesInternal(){var a=document.getElementById("displayBoundariesInternal").checked;changeSettingInteger("bDisplayBoundariesInternal",a);redrawScene()}
function changeSettingColorBoundaries(){var a=makeColor(document.getElementById("colorBoundaries").value,document.getElementById("alphaBoundaries").value);document.getElementById("colorBoundaries").style.backgroundColor=document.getElementById("colorBoundaries").value;changeSettingColor("colorBoundaries",a);redrawScene()}function changeSettingDisplayLand(){var a=document.getElementById("displayFillLand").checked;changeSettingInteger("bFillLand",a);redrawScene()}
function changeSettingColorLand(){var a=makeColor(document.getElementById("colorLand").value,document.getElementById("alphaFillLand").value);document.getElementById("colorLand").style.backgroundColor=document.getElementById("colorLand").value;changeSettingColor("colorLand",a);redrawScene()}function changeSettingDisplaySeas(){var a=document.getElementById("displayFillSeas").checked;changeSettingInteger("bFillSeas",a);redrawScene()}
function changeSettingColorSeas(){var a=makeColor(document.getElementById("colorSeas").value,document.getElementById("alphaFillSeas").value);document.getElementById("colorSeas").style.backgroundColor=document.getElementById("colorSeas").value;changeSettingColor("colorSeas",a);redrawScene()}function changeSettingRadarDisplayStars(){radarDisplayStars=document.getElementById("displayStars").checked;redrawScene()}
function changeSettingRadarColorStarsValue(a){var d=[],g=[],m;gl.useProgram(shaderProgramStars);for(m=0;3>m;m++)d[m]=(a[m]-colorBackground[m])/(radarBrightestMagnitude-radarLimitingMagnitude),g[m]=a[m]-d[m]*radarBrightestMagnitude;gl.uniform3f(shaderProgramStars.colorGradients,d[0],d[1],d[2]);gl.uniform3f(shaderProgramStars.colorConstants,g[0],g[1],g[2]);redrawScene()}
function changeSettingRadarColorStars(){var a=makeColor(document.getElementById("colorStars").value,1);document.getElementById("colorStars").style.backgroundColor=document.getElementById("colorStars").value;changeSettingRadarColorStarsValue(a);redrawScene()}
function changeSettingRadarLimitingMagnitude(){radarLimitingMagnitude=document.getElementById("limitingMagnitude").value;gl.useProgram(shaderProgramStars);gl.uniform1f(shaderProgramStars.limitingMagnitude,radarLimitingMagnitude);redrawScene()}function changeSettingRadarDisplayConstellations(){bShowConstellationShapes=document.getElementById("displayConstellations").checked;redrawScene()}
function changeSettingRadarColorConstellations(){radarColorConstellationShapes=makeColor(document.getElementById("colorConstellations").value,1);document.getElementById("colorConstellations").style.backgroundColor=document.getElementById("colorConstellations").value;redrawScene()}function changeSettingRadarDisplayConstellationBoundaries(){bShowConstellationBoundaries=document.getElementById("includeConstellationBoundaries").checked;redrawScene()}
function changeSettingRadarColorConstellationBoundaries(){radarColorConstellationBoundaries=makeColor(document.getElementById("colorConstellationBoundaries").value,1);document.getElementById("colorConstellationBoundaries").style.backgroundColor=document.getElementById("colorConstellationBoundaries").value;redrawScene()}function changeSettingRadarDisplayConstellationNames(){bShowConstellationNames=document.getElementById("includeConstellationNames").checked;redrawScene()}
function changeSettingRadarColorConstellationNamesValue(a){var d=document.getElementById("constellationLabels");d&&(d.style.color=a);redrawScene()}function changeSettingRadarColorConstellationNames(){var a=document.getElementById("colorConstellationNames").value;document.getElementById("colorConstellationNames").style.backgroundColor=document.getElementById("colorConstellationNames").value;changeSettingRadarColorConstellationNamesValue(a);redrawScene()}
function changeSettingRadarDisplayAzElGrid(){var a=document.getElementById("radarLabels");radarDisplayAzElGrid=document.getElementById("displayAzElGrid").checked;a&&(a.style.visibility=radarDisplayAzElGrid?"visible":"hidden");redrawScene()}
function changeSettingRadarColorAzElGrid(){radarColorAzElGrid=makeColor(document.getElementById("colorAzElGrid").value,1);document.getElementById("colorAzElGrid").style.backgroundColor=document.getElementById("colorAzElGrid").value;gl.useProgram(shaderProgramXY);gl.uniform4f(shaderProgramXY.color,radarColorAzElGrid[0],radarColorAzElGrid[1],radarColorAzElGrid[2],1);Object.assign(document.getElementById("radarLabels").style,{color:makeHTMLColor(radarColorAzElGrid)});redrawScene()}
function changeSettingRadarDisplayRADecGrid(){radarDisplayRADecGrid=document.getElementById("displayRADecGrid").checked;redrawScene()}
function changeSettingRadarColorRADecGrid(){radarColorRADecGrid=makeColor(document.getElementById("colorRADecGrid").value,1);document.getElementById("colorRADecGrid").style.backgroundColor=document.getElementById("colorRADecGrid").value;gl.useProgram(shaderProgramRADec);gl.uniform4f(shaderProgramRADec.color,radarColorRADecGrid[0],radarColorRADecGrid[1],radarColorRADecGrid[2],.5);redrawScene()}
function changeSettingRadarDisplayCentralPosition(){var a=document.getElementById("radarCenter");a&&(radarShowCentralPosition=document.getElementById("displayCentralPosition").checked,a.style.visibility=radarShowCentralPosition?"visible":"hidden");redrawScene()}
function changeSettingRadarColorCentralPosition(){var a=document.getElementById("radarCenter");if(a){radarColorCentralPosition=makeColor(document.getElementById("colorCentralPosition").value,1);document.getElementById("colorCentralPosition").style.backgroundColor=document.getElementById("colorCentralPosition").value;var d=getColorContrast(radarColorCentralPosition);d="-1px -1px 5px "+d+", 1px -1px 5px "+d+", -1px 1px 5px "+d+", 1px 1px 5px "+d;a.style.color=document.getElementById("colorCentralPosition").value;
a.style.textShadow=d}redrawScene()}function changeTimeZoneUTC(){timeZoneUTC=document.getElementById("timeZoneUTC").checked;updateTimeDisplay(!0)}function changeRefractionCorrection(){refractionCorrection=document.getElementById("refractionCorrection").checked}
function expandReport(){objectReport&&(objectReport.isObserver?(reportLevelObserver++,reportLevelObserver>MAX_REPORT_LEVEL_OBSERVER&&(reportLevelObserver=0)):(reportLevelSatellite++,reportLevelSatellite>MAX_REPORT_LEVEL_SATELLITE&&(reportLevelSatellite=0)),updateObjectReport())}
function updateTimeDisplay(a){if(timeZoneUTC){if(null==datePrevious||a||datePrevious.getUTCFullYear()!=dateNow.getUTCFullYear())document.getElementById("dateandtimeyear").innerHTML=dateNow.getUTCFullYear();if(null==datePrevious||a||datePrevious.getUTCMonth()!=dateNow.getUTCMonth())document.getElementById("dateandtimemonth").innerHTML=(dateNow.getUTCMonth()+1).toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getUTCDate()!=dateNow.getUTCDate())document.getElementById("dateandtimeday").innerHTML=
dateNow.getUTCDate().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getUTCHours()!=dateNow.getUTCHours())document.getElementById("dateandtimehour").innerHTML=dateNow.getUTCHours().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getUTCMinutes()!=dateNow.getUTCMinutes())document.getElementById("dateandtimeminute").innerHTML=dateNow.getUTCMinutes().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getUTCSeconds()!=dateNow.getUTCSeconds())document.getElementById("dateandtimesecond").innerHTML=
dateNow.getUTCSeconds().toString().padStart(2,"0")}else{if(null==datePrevious||a||datePrevious.getFullYear()!=dateNow.getFullYear())document.getElementById("dateandtimeyear").innerHTML=dateNow.getFullYear();if(null==datePrevious||a||datePrevious.getMonth()!=dateNow.getMonth())document.getElementById("dateandtimemonth").innerHTML=(dateNow.getMonth()+1).toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getDate()!=dateNow.getDate())document.getElementById("dateandtimeday").innerHTML=
dateNow.getDate().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getHours()!=dateNow.getHours())document.getElementById("dateandtimehour").innerHTML=dateNow.getHours().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getMinutes()!=dateNow.getMinutes())document.getElementById("dateandtimeminute").innerHTML=dateNow.getMinutes().toString().padStart(2,"0");if(null==datePrevious||a||datePrevious.getSeconds()!=dateNow.getSeconds())document.getElementById("dateandtimesecond").innerHTML=
dateNow.getSeconds().toString().padStart(2,"0")}datePrevious=dateNow}function updateTime(){paused||(dateBase=new Date);dateNow=new Date(1*dateBase+1E3*offsetSeconds);jdNow=julianDate(dateNow);solarPosition=subSolarPoint(jdNow);updateScene(!1);updateTimeDisplay(!1)}function updateFromTimer(){paused||updateTime()}
function applyInitialUISettings(){document.getElementById("displayBackground").checked=bDisplaySky;document.getElementById("colorBackground").value=makeHTMLColor(colorBackground);document.getElementById("colorBackground").style.backgroundColor=makeHTMLColor(colorBackground);document.getElementById("displayEarth").checked=bDisplayEarth;document.getElementById("displayImage").checked=bUseSatelliteImage;document.getElementById("displayDayNight").checked=bDisplayDayNight;document.getElementById("colorDay").value=
makeHTMLColor(colorDay);document.getElementById("colorNight").value=makeHTMLColor(colorNight);document.getElementById("colorDay").style.backgroundColor=makeHTMLColor(colorDay);document.getElementById("colorNight").style.backgroundColor=makeHTMLColor(colorNight);document.getElementById("displayTerminator").checked=bDisplayTerminator;document.getElementById("colorTerminator").value=makeHTMLColor(colorTerminator);document.getElementById("colorTerminator").style.backgroundColor=makeHTMLColor(colorTerminator);
document.getElementById("alphaTerminator").value=alphaTerminator;document.getElementById("alphaTerminatorValue").value=alphaTerminator;document.getElementById("displayLatLongGrid").checked=bDisplayLongitudeLatitudeGrid;document.getElementById("colorLatLongGrid").value=makeHTMLColor(colorLongitudeLatitudeGrid);document.getElementById("colorLatLongGrid").style.backgroundColor=makeHTMLColor(colorLongitudeLatitudeGrid);document.getElementById("alphaLatLongGrid").value=alphaLongitudeLatitudeGrid;document.getElementById("alphaLatLongGridValue").value=
alphaLongitudeLatitudeGrid;document.getElementById("displayBoundaries").checked=bDisplayBoundaries;document.getElementById("colorBoundaries").value=makeHTMLColor(colorBoundaries);document.getElementById("colorBoundaries").style.backgroundColor=makeHTMLColor(colorBoundaries);document.getElementById("alphaBoundaries").value=alphaBoundaries;document.getElementById("alphaBoundariesValue").value=alphaBoundaries;document.getElementById("displayFillLand").checked=bFillLand;document.getElementById("colorLand").value=
makeHTMLColor(colorLand);document.getElementById("colorLand").style.backgroundColor=makeHTMLColor(colorLand);document.getElementById("alphaFillLand").value=alphaLand;document.getElementById("alphaFillLandValue").value=alphaLand;document.getElementById("displayFillSeas").checked=bFillSeas;document.getElementById("colorSeas").value=makeHTMLColor(colorSeas);document.getElementById("colorSeas").style.backgroundColor=makeHTMLColor(colorSeas);document.getElementById("alphaFillSeas").value=alphaSeas;document.getElementById("alphaFillSeasValue").value=
alphaSeas;document.getElementById("colorBackgroundRadar").value=makeHTMLColor(colorBackground);document.getElementById("colorBackgroundRadar").style.backgroundColor=makeHTMLColor(colorBackground);document.getElementById("displayStars").checked=radarDisplayStars;document.getElementById("colorStars").value=makeHTMLColor(radarColorStars);document.getElementById("colorStars").style.backgroundColor=makeHTMLColor(radarColorStars);document.getElementById("limitingMagnitude").value=radarLimitingMagnitude;
document.getElementById("limitingMagnitudeValue").value=radarLimitingMagnitude;document.getElementById("displayConstellations").checked=bShowConstellationShapes;document.getElementById("colorConstellations").value=makeHTMLColor(radarColorConstellationShapes);document.getElementById("colorConstellations").style.backgroundColor=makeHTMLColor(radarColorConstellationShapes);document.getElementById("includeConstellationBoundaries").checked=bShowConstellationBoundaries;document.getElementById("colorConstellationBoundaries").value=
makeHTMLColor(radarColorConstellationBoundaries);document.getElementById("colorConstellationBoundaries").style.backgroundColor=makeHTMLColor(radarColorConstellationBoundaries);document.getElementById("includeConstellationNames").checked=bShowConstellationNames;document.getElementById("colorConstellationNames").value=makeHTMLColor(radarColorConstellationNames);document.getElementById("colorConstellationNames").style.backgroundColor=makeHTMLColor(radarColorConstellationNames);document.getElementById("displayAzElGrid").checked=
radarDisplayAzElGrid;document.getElementById("colorAzElGrid").value=makeHTMLColor(radarColorAzElGrid);document.getElementById("colorAzElGrid").style.backgroundColor=makeHTMLColor(radarColorAzElGrid);document.getElementById("displayRADecGrid").checked=radarDisplayRADecGrid;document.getElementById("colorRADecGrid").value=makeHTMLColor(radarColorRADecGrid);document.getElementById("colorRADecGrid").style.backgroundColor=makeHTMLColor(radarColorRADecGrid);document.getElementById("displayCentralPosition").checked=
bShowConstellationShapes;document.getElementById("colorCentralPosition").value=makeHTMLColor(radarColorCentralPosition);document.getElementById("colorCentralPosition").style.backgroundColor=makeHTMLColor(radarColorCentralPosition)}
function applyShaderSettingsCommon(a){gl.useProgram(a);gl.uniform4f(a.colorSeas,colorSeas[0],colorSeas[1],colorSeas[2],alphaSeas);gl.uniform4f(a.colorLand,colorLand[0],colorLand[1],colorLand[2],alphaLand);gl.uniform1i(a.bUseSatelliteImage,bUseSatelliteImage);gl.uniform1i(a.bFillLand,bFillLand);gl.uniform1i(a.bFillSeas,bFillSeas);gl.uniform1i(a.bDisplayDayNight,bDisplayDayNight);gl.uniform4f(a.colorDay,colorDay[0],colorDay[1],colorDay[2],1);gl.uniform4f(a.colorNight,colorNight[0],colorNight[1],colorNight[2],
1);gl.uniform4f(a.colorLongitudeLatitudeGrid,colorLongitudeLatitudeGrid[0],colorLongitudeLatitudeGrid[1],colorLongitudeLatitudeGrid[2],alphaLongitudeLatitudeGrid);gl.uniform1i(a.bDisplayLongitudeLatitudeGrid,bDisplayLongitudeLatitudeGrid);gl.uniform4f(a.colorTerminator,colorTerminator[0],colorTerminator[1],colorTerminator[2],alphaTerminator);gl.uniform4f(a.colorBoundaries,colorBoundaries[0],colorBoundaries[1],colorBoundaries[2],alphaBoundaries);gl.uniform1i(a.bDisplayTerminator,bDisplayTerminator);
gl.uniform1i(a.bDisplayBoundaries,bDisplayBoundaries);gl.uniform1i(a.bDisplayBoundariesCoastlines,bDisplayBoundariesCoastlines);gl.uniform1i(a.bDisplayBoundariesInternal,bDisplayBoundariesInternal);gl.uniform1i(a.numSatellites,0)}
function applyShaderSettingsRadar(){changeSettingRadarColorStarsValue(radarColorStars);changeSettingRadarColorConstellationNamesValue(makeHTMLColor(radarColorConstellationNames));gl.useProgram(shaderProgramStars);gl.uniform1f(shaderProgramStars.limitingMagnitude,radarLimitingMagnitude);gl.useProgram(shaderProgramRADec);gl.uniform4f(shaderProgramRADec.color,radarColorRADecGrid[0],radarColorRADecGrid[1],radarColorRADecGrid[2],.5)}
function applyShaderSettings(){angleGrazingEarthRadians=Math.asin(1/distanceScale);gl.clearColor(colorBackground[0],colorBackground[1],colorBackground[2],1);applyShaderSettingsCommon(shaderProgramGlobePerspective);applyShaderSettingsCommon(shaderProgramGlobeCylindrical);applyShaderSettingsCommon(shaderProgramGlobeElliptical);applyShaderSettingsCommon(shaderProgramGlobeSinusoidal);applyShaderSettingsCommon(shaderProgramGlobeRobinson);applyShaderSettingsRadar()}
function initiateGoogleMap(){if(google){var a={lat:180*observer.tracking.latitude/Math.PI,lng:180*observer.tracking.longitude/Math.PI},d={center:new google.maps.LatLng(0,0),zoom:3,streetViewControl:!1,mapTypeControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE]}};observerMap=new google.maps.Map(document.getElementById("mapObserver"),d);document.getElementById("mapObserver").style.display="block";observerMarker=
new google.maps.Marker({position:a,map:observerMap});google.maps.event.addListener(observerMap,"click",function(g){updateMarkerPositionOnClick(g.latLng)});observerMap.setOptions({draggableCursor:"crosshair"})}}
function handleLoadedTexture(a,d,g,m,e){gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!0);gl.bindTexture(gl.TEXTURE_2D,a);try{gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,d)}catch(b){messageError(b.message)}gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D,null);gl.useProgram(g);gl.uniform1i(m,e);redrawScene()}function handleLoadedTextureSky(a){handleLoadedTexture(skyTexture,a,shaderProgramSkyPerspective,shaderProgramSkyPerspective.samplerUniformSky,TEXTURE_SKY)}
function handleLoadedTextureDay(a){handleLoadedTexture(globeTextureDay,a,shaderProgramGlobePerspective,shaderProgramGlobePerspective.samplerUniformDay,TEXTURE_DAY);handleLoadedTexture(globeTextureDay,a,shaderProgramGlobeCylindrical,shaderProgramGlobeCylindrical.samplerUniformDay,TEXTURE_DAY);handleLoadedTexture(globeTextureDay,a,shaderProgramGlobeElliptical,shaderProgramGlobeElliptical.samplerUniformDay,TEXTURE_DAY);handleLoadedTexture(globeTextureDay,a,shaderProgramGlobeSinusoidal,shaderProgramGlobeSinusoidal.samplerUniformDay,
TEXTURE_DAY);handleLoadedTexture(globeTextureDay,a,shaderProgramGlobeRobinson,shaderProgramGlobeRobinson.samplerUniformDay,TEXTURE_DAY)}
function handleLoadedTextureNight(a){handleLoadedTexture(globeTextureNight,a,shaderProgramGlobePerspective,shaderProgramGlobePerspective.samplerUniformNight,TEXTURE_NIGHT);handleLoadedTexture(globeTextureNight,a,shaderProgramGlobeCylindrical,shaderProgramGlobeCylindrical.samplerUniformNight,TEXTURE_NIGHT);handleLoadedTexture(globeTextureNight,a,shaderProgramGlobeElliptical,shaderProgramGlobeElliptical.samplerUniformNight,TEXTURE_NIGHT);handleLoadedTexture(globeTextureNight,a,shaderProgramGlobeSinusoidal,
shaderProgramGlobeSinusoidal.samplerUniformNight,TEXTURE_NIGHT);handleLoadedTexture(globeTextureNight,a,shaderProgramGlobeRobinson,shaderProgramGlobeRobinson.samplerUniformNight,TEXTURE_NIGHT)}
function handleLoadedTextureMask(a){handleLoadedTexture(globeTextureMask,a,shaderProgramGlobePerspective,shaderProgramGlobePerspective.samplerUniformMask,TEXTURE_MASK);handleLoadedTexture(globeTextureMask,a,shaderProgramGlobeCylindrical,shaderProgramGlobeCylindrical.samplerUniformMask,TEXTURE_MASK);handleLoadedTexture(globeTextureMask,a,shaderProgramGlobeElliptical,shaderProgramGlobeElliptical.samplerUniformMask,TEXTURE_MASK);handleLoadedTexture(globeTextureMask,a,shaderProgramGlobeSinusoidal,shaderProgramGlobeSinusoidal.samplerUniformMask,
TEXTURE_MASK);handleLoadedTexture(globeTextureMask,a,shaderProgramGlobeRobinson,shaderProgramGlobeRobinson.samplerUniformMask,TEXTURE_MASK)}
function handleLoadedTextureBoundaries(a){handleLoadedTexture(globeTextureBoundaries,a,shaderProgramGlobePerspective,shaderProgramGlobePerspective.samplerUniformBoundaries,TEXTURE_BOUNDARIES);handleLoadedTexture(globeTextureBoundaries,a,shaderProgramGlobeCylindrical,shaderProgramGlobeCylindrical.samplerUniformBoundaries,TEXTURE_BOUNDARIES);handleLoadedTexture(globeTextureBoundaries,a,shaderProgramGlobeElliptical,shaderProgramGlobeElliptical.samplerUniformBoundaries,TEXTURE_BOUNDARIES);handleLoadedTexture(globeTextureBoundaries,
a,shaderProgramGlobeSinusoidal,shaderProgramGlobeSinusoidal.samplerUniformBoundaries,TEXTURE_BOUNDARIES);handleLoadedTexture(globeTextureBoundaries,a,shaderProgramGlobeRobinson,shaderProgramGlobeRobinson.samplerUniformBoundaries,TEXTURE_BOUNDARIES)}
function initGL(a){try{a.setAttribute("width",window.innerWidth),a.setAttribute("height",window.innerHeight),(gl=a.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!1})||a.getContext("experimental-webgl",{antialias:!0,preserveDrawingBuffer:!1}))?(initShaders(),initBuffers(),initTexture(),initialize(),gl.enable(gl.CULL_FACE),gl.cullFace(gl.BACK),gl.frontFace(gl.CCW),gl.enable(gl.DEPTH_TEST),gl.lineWidth(1),perspective(),redrawScene()):messageError("Browser plugin unable to acquire WebGL context.")}catch(d){messageError("Browser plugin does not support WebGL. Check [HKEY_CURRENT_USER|HKEY_LOCAL_MACHINE]\\SOFTWARE\\Microsoft\\Internet Explorer\\MAIN\\FeatureControl\\FEATURE_BROWSER_EMULATION\\Tracker.exe=0x00002af8 + ["+
d.message+"]")}}function handleContextLost(a){a.preventDefault();timer&&clearInterval(timer)}function handleContextRestored(a){initGL(canvas)}
function loadUtilities(){canvas=document.getElementById("canvas");document.documentElement.style.overflow="hidden";document.body.scroll="no";footprintData=new Uint8Array(SIZE_OF_FLOAT*FOOTPRINTS_ARRAY_NUM_SATELLITES*FOOTPRINTS_ARRAY_NUM_ENTRIES);initGL(canvas);canvas.addEventListener("webglcontextlost",handleContextLost,!1);canvas.addEventListener("webglcontextlost",handleContextRestored,!1);document.addEventListener("mousemove",handleMouseMove);document.addEventListener("mouseleave",handleMouseLeave);
document.addEventListener("touchstart",handleTouchStart,!1);document.addEventListener("touchmove",handleTouchMove,!1);imageTextureSky=new Image;imageTextureSky.src="Images/Sky.jpg";imageTextureSky.onload=function(){handleLoadedTextureSky(imageTextureSky)};imageTextureDay=new Image;imageTextureDay.src="Images/EarthDay.jpg";imageTextureDay.onload=function(){handleLoadedTextureDay(imageTextureDay)};imageTextureNight=new Image;imageTextureNight.src="Images/EarthNight.jpg";imageTextureNight.onload=function(){handleLoadedTextureNight(imageTextureNight)};
imageTextureMask=new Image;imageTextureMask.src="Images/EarthMonochrome.bmp";imageTextureMask.onload=function(){handleLoadedTextureMask(imageTextureMask)};imageTextureBoundaries=new Image;imageTextureBoundaries.src="Images/boundaries_combined_4bit.png";imageTextureBoundaries.onload=function(){handleLoadedTextureBoundaries(imageTextureBoundaries)}}
function fillSearchForOptions(){var a=document.getElementById("searchSatelliteBy");if(a)for(var d=[COLUMNS.NAME,COLUMNS.NORAD,COLUMNS.INTERNATIONAL_DESIGNATOR],g=0;g<d.length;g++){var m=document.createElement("option");Object.assign(m,{value:headersSatellite[d[g]].html,innerHTML:headersSatellite[d[g]].html});d[g]===COLUMNS.NAME&&(m.selected=!0);a.appendChild(m)}}function prepareForPrint(){redrawScene()}function prepareForScreen(){}
function loaded(){window.hasOwnProperty("matchMedia")?(window.matchMedia("print").addListener(function(m){prepareForPrint()}),window.matchMedia("screen").addListener(function(m){prepareForScreen()})):window.hasOwnProperty("onbeforeprint")&&(window.onbeforeprint=function(){prepareForPrint()},window.onafterprint=function(){prepareForScreen()});addHeaderToHeadTableSatellites();addHeaderToHeadTableProjection();var a=document.getElementById("buttonContainer");null!=a&&a.addEventListener("click",pressedButton);
document.getElementById("buttonScreenClose").addEventListener("click",pressedCloseButton);a=document.getElementById("modifytime");var d=document.getElementById("dateandtimeplay"),g=document.getElementById("dateandtimezero");null!=a&&(a.addEventListener("mousedown",addInterval),a.addEventListener("mouseup",cancelInterval),a.addEventListener("mouseleave",cancelInterval));null!=d&&d.addEventListener("click",play);null!=g&&g.addEventListener("click",zero);document.getElementById("satelliteSettings").addEventListener("click",
showSatelliteSettings);document.getElementById("resetSatelliteSettings").addEventListener("click",resetSatelliteSettings);document.getElementById("doneSatelliteSettings").addEventListener("click",applyAndHideSatelliteSettings);document.getElementById("setDefaultSatelliteSettings").addEventListener("click",setDefaultSatelliteSettings);document.getElementById("selectAllNone").addEventListener("click",selectAllNone);document.getElementById("divSatellitesBody").addEventListener("scroll",scrollSatellitesBody);
document.getElementById("searchSatelliteFor").addEventListener("keypress",searchForSatellites);document.getElementById("satelliteLabel").addEventListener("change",changeSatelliteLabel);document.getElementById("satelliteLabelBackground").addEventListener("change",changeSatelliteBackgroundFill);document.getElementById("satelliteShade").addEventListener("change",changeSatelliteFootprintShade);document.getElementById("satelliteOutline").addEventListener("change",changeSatelliteFootprintOutline);document.getElementById("satelliteTrackUnits").addEventListener("change",
changeSatelliteTrackUnits);document.getElementById("satelliteTrackStyle").addEventListener("change",changeSatelliteTrackStyle);document.getElementById("colorSatellite").addEventListener("input",changeSatelliteColor);document.getElementById("colorSatelliteLabelBackground").addEventListener("input",changeSatelliteBackgroundColor);document.getElementById("satelliteFootprintAlpha").addEventListener("input",changeSatelliteFootprintAlpha);document.getElementById("satelliteOutlineAngles").addEventListener("input",
changeSatelliteFootprintAngles);document.getElementById("satelliteTrackForwardCount").addEventListener("input",changeSatelliteTrackForwardCount);document.getElementById("satelliteTrackBackwardCount").addEventListener("input",changeSatelliteTrackBackwardCount);document.getElementById("satelliteGroupSymbol").addEventListener("click",setSatelliteSymbolEvent);document.getElementById("observerSettings").addEventListener("click",showObserverSettings);document.getElementById("resetObserverSettings").addEventListener("click",
resetObserverSettings);document.getElementById("doneObserverSettings").addEventListener("click",applyAndHideObserverSettings);document.getElementById("resetObserverPositionSettings").addEventListener("click",resetObserverPositionSettings);document.getElementById("applyObserverPositionSettings").addEventListener("click",applyObserverPositionSettings);document.getElementById("useDeviceLocation").addEventListener("click",useDeviceLocation);document.getElementById("colorObserver").addEventListener("input",
changeObserverColor);document.getElementById("colorObserverLabelBackground").addEventListener("input",changeObserverBackgroundColor);document.getElementById("observerGroupSymbol").addEventListener("click",setObserverSymbolEvent);document.getElementById("displayBackground").addEventListener("change",changeSettingDisplaySky);document.getElementById("colorBackground").addEventListener("change",changeSettingBackgroundColor);document.getElementById("displayEarth").addEventListener("change",changeSettingDisplayEarth);
document.getElementById("displayImage").addEventListener("change",changeSettingDisplayImage);document.getElementById("displayDayNight").addEventListener("change",changeSettingDisplayDayNight);document.getElementById("colorDay").addEventListener("change",changeSettingColorDay);document.getElementById("colorNight").addEventListener("change",changeSettingColorNight);document.getElementById("displayTerminator").addEventListener("change",changeSettingDisplayTerminator);document.getElementById("colorTerminator").addEventListener("change",
changeSettingColorTerminator);document.getElementById("alphaTerminator").addEventListener("change",changeSettingColorTerminator);document.getElementById("displayLatLongGrid").addEventListener("change",changeSettingDisplayLatLongGrid);document.getElementById("colorLatLongGrid").addEventListener("change",changeSettingColorLatLongGrid);document.getElementById("alphaLatLongGrid").addEventListener("change",changeSettingColorLatLongGrid);document.getElementById("displayBoundaries").addEventListener("change",
changeSettingDisplayBoundaries);document.getElementById("colorBoundaries").addEventListener("change",changeSettingColorBoundaries);document.getElementById("alphaBoundaries").addEventListener("change",changeSettingColorBoundaries);document.getElementById("displayBoundariesCoastline").addEventListener("change",changeSettingDisplayBoundariesCoastline);document.getElementById("displayBoundariesInternal").addEventListener("change",changeSettingDisplayBoundariesInternal);document.getElementById("displayFillLand").addEventListener("change",
changeSettingDisplayLand);document.getElementById("colorLand").addEventListener("change",changeSettingColorLand);document.getElementById("alphaFillLand").addEventListener("change",changeSettingColorLand);document.getElementById("displayFillSeas").addEventListener("change",changeSettingDisplaySeas);document.getElementById("colorSeas").addEventListener("change",changeSettingColorSeas);document.getElementById("alphaFillSeas").addEventListener("change",changeSettingColorSeas);document.getElementById("colorBackgroundRadar").addEventListener("change",
changeSettingBackgroundColorRadar);document.getElementById("displayStars").addEventListener("change",changeSettingRadarDisplayStars);document.getElementById("colorStars").addEventListener("change",changeSettingRadarColorStars);document.getElementById("limitingMagnitude").addEventListener("change",changeSettingRadarLimitingMagnitude);document.getElementById("displayConstellations").addEventListener("change",changeSettingRadarDisplayConstellations);document.getElementById("colorConstellations").addEventListener("change",
changeSettingRadarColorConstellations);document.getElementById("includeConstellationBoundaries").addEventListener("change",changeSettingRadarDisplayConstellationBoundaries);document.getElementById("colorConstellationBoundaries").addEventListener("change",changeSettingRadarColorConstellationBoundaries);document.getElementById("includeConstellationNames").addEventListener("change",changeSettingRadarDisplayConstellationNames);document.getElementById("colorConstellationNames").addEventListener("change",
changeSettingRadarColorConstellationNames);document.getElementById("displayAzElGrid").addEventListener("change",changeSettingRadarDisplayAzElGrid);document.getElementById("colorAzElGrid").addEventListener("change",changeSettingRadarColorAzElGrid);document.getElementById("displayRADecGrid").addEventListener("change",changeSettingRadarDisplayRADecGrid);document.getElementById("colorRADecGrid").addEventListener("change",changeSettingRadarColorRADecGrid);document.getElementById("displayCentralPosition").addEventListener("change",
changeSettingRadarDisplayCentralPosition);document.getElementById("colorCentralPosition").addEventListener("change",changeSettingRadarColorCentralPosition);document.getElementById("timeZoneUTC").addEventListener("change",changeTimeZoneUTC);document.getElementById("refractionCorrection").addEventListener("change",changeRefractionCorrection);document.getElementById("alphaTerminator").addEventListener("input",function(){document.getElementById("alphaTerminatorValue").value=document.getElementById("alphaTerminator").value});
document.getElementById("alphaLatLongGrid").addEventListener("input",function(){document.getElementById("alphaLatLongGridValue").value=document.getElementById("alphaLatLongGrid").value});document.getElementById("alphaBoundaries").addEventListener("input",function(){document.getElementById("alphaBoundariesValue").value=document.getElementById("alphaBoundaries").value});document.getElementById("alphaFillLand").addEventListener("input",function(){document.getElementById("alphaFillLandValue").value=document.getElementById("alphaFillLand").value});
document.getElementById("alphaFillSeas").addEventListener("input",function(){document.getElementById("alphaFillSeasValue").value=document.getElementById("alphaFillSeas").value});document.getElementById("limitingMagnitude").addEventListener("input",function(){document.getElementById("limitingMagnitudeValue").value=document.getElementById("limitingMagnitude").value});document.addEventListener("webkitfullscreenchange",fullScreenToggled);document.addEventListener("mozfullscreenchange",fullScreenToggled);
document.addEventListener("fullscreenchange",fullScreenToggled);document.getElementById("itemSelectProjection").addEventListener("click",projectionSwitch);document.addEventListener("mousedown",handleMouseDown);document.addEventListener("pointerdown",handleMouseDown);document.addEventListener("mouseup",handleMouseUp);document.addEventListener("pointerup",handleMouseUp);document.addEventListener("mousewheel",handleMouseWheel,{passive:!0});document.addEventListener("keydown",handleKeyDown);switchedProjection();
fillSearchForOptions();setTimeout(function(){loadSatellites()},0);setTimeout(function(){loadStellarData()},0);loadUtilities();applyInitialUISettings();setObserverPosition(0,0,0);initializeRadarLabels();changeSettingRadarColorCentralPosition();applyShaderSettings();updateCentralPosition(!1);setObserverPositionInShaders();initiateGoogleMap();resized();updateFromTimer();timer=setInterval(updateFromTimer,updatePeriodMS)}
function setTextualViewTableHeight(){var a=document.getElementById("divTableTextualOuter");if(a&&"none"!=a.style.display){var d=document.getElementById("tableHeadTextual");if(d){var g=document.getElementById("divTableBodyTextual");if(g){var m=document.getElementById("divTableTextual");if(m){var e=a.getBoundingClientRect().height;a=window.getComputedStyle(a);e-=parseInt(a.paddingTop,10);e-=parseInt(a.paddingBottom,10);e-=2*parseInt(window.getComputedStyle(m).getPropertyValue("border-width"),10);e-=
d.getBoundingClientRect().height;g.style.height=e+"px"}}}}}function alignTimeButton(a,d){a=document.getElementById(a);null!=a&&(d=document.getElementById(d),null!=d&&(a=a.getBoundingClientRect(),d.style.left=a.left-a.width/4+1+"px",d.style.width=a.width+a.width/2-2+"px"))}
function resizedSatelliteSelection(){var a=document.getElementById("categorySatellites"),d=document.getElementById("tableHeadSatellites"),g=document.getElementById("divSatellitesBody"),m=document.getElementById("frameleft"),e=document.getElementById("frameright"),b=document.getElementById("frametable"),c=document.getElementById("results");m=m.getBoundingClientRect().bottom;m-=a.getBoundingClientRect().top;m-=parseInt(window.getComputedStyle(a).marginBottom,10);a.style.height=m+"px";m=e.getBoundingClientRect().bottom-
c.getBoundingClientRect().bottom;b.style.height=m+"px";m=b.getBoundingClientRect().bottom-d.getBoundingClientRect().bottom;window.getComputedStyle(b).borderBottom&&(m-=parseInt(window.getComputedStyle(b).borderBottom,10));g.style.height=m+"px"}
function resizedObserverMap(){if(observerMap){var a=document.getElementById("itemSelectObserver"),d=observerMap.getCenter(),g=document.getElementById("mapObserver"),m=a.clientHeight;m-=parseInt(window.getComputedStyle(a).getPropertyValue("padding-top"),10);m-=parseInt(window.getComputedStyle(a).getPropertyValue("padding-bottom"),10);m+=document.getElementById("itemSelectObserverInner").getBoundingClientRect().top;m-=g.getBoundingClientRect().top;200>m&&(m=200);g.style.height=Math.floor(m)+"px";setTimeout(function(){observerMap.setCenter(d)},
5)}}
function resizedCommon(){var a=1,d=1;setColumnWidths("tableHeadSatellites","tableBodySatellites");setColumnWidths("tableHeadTextual","tableBodyTextual");resizedSatelliteSelection();resizedSatelliteSelection();resizedObserverMap();setTextualViewTableHeight();canvas&&(canvas.clientWidth>canvas.clientHeight?(a=canvas.clientHeight/canvas.clientWidth,Object.assign(document.getElementById("radarLabels").style,{width:(2*canvas.clientHeight).toString()+"px",height:(2*canvas.clientHeight).toString()+"px",top:(-canvas.clientHeight/
2).toString()+"px",left:(canvas.clientWidth/2-canvas.clientHeight).toString()+"px"})):(d=canvas.clientWidth/canvas.clientHeight,Object.assign(document.getElementById("radarLabels").style,{width:(2*canvas.clientWidth).toString()+"px",height:(2*canvas.clientWidth).toString()+"px",top:(canvas.clientHeight/2-canvas.clientWidth).toString()+"px",left:(-canvas.clientWidth/2).toString()+"px"})));gl.useProgram(shaderProgramRADec);gl.uniform1f(shaderProgramRADec.scaleX,a);gl.uniform1f(shaderProgramRADec.scaleY,
d);gl.useProgram(shaderProgramStars);gl.uniform1f(shaderProgramStars.scaleX,a);gl.uniform1f(shaderProgramStars.scaleY,d);gl.useProgram(shaderProgramTrackRadar);gl.uniform1f(shaderProgramTrackRadar.scaleX,a);gl.uniform1f(shaderProgramTrackRadar.scaleY,d);calculateFontSize();calculateSymbolSize();alignTimeButton("dateandtimeday","subtractDay");alignTimeButton("dateandtimehour","subtractHour");alignTimeButton("dateandtimeminute","subtractMinute");alignTimeButton("dateandtimeday","addDay");alignTimeButton("dateandtimehour",
"addHour");alignTimeButton("dateandtimeminute","addMinute");perspective();redrawScene()}function resized(){resizedCommon();handleTimeAndConfiguartionDisplay()}function resizedInternal(){resizedCommon()}
function handleButtonVisibility(){var a=document.getElementById("buttonsInternal").style;if(showingConfigurationDisplay())a.visibility="visible",document.getElementById("dateandtimespan").style.visibility="hidden",document.getElementById("buttonEllipsis").style.display="inline-block";else if(""==a.visibility||"visible"==a.visibility)a.visibility="hidden",document.getElementById("dateandtimespan").style.visibility="visible",document.getElementById("buttonEllipsis").style.display="inline-block"}
function handleTimeAndConfiguartionDisplay(){var a=document.getElementById("buttonsInternal"),d=document.getElementById("dateandtimeyear").getBoundingClientRect().left,g=a.getBoundingClientRect().right+a.style.marginLeft;g>d?(document.getElementById("dateandtimebuttoncontainer").style.left=d+"px",handleButtonVisibility()):g>d-document.getElementById("dateandtimebuttoncontainer").getBoundingClientRect().width?(g>document.getElementById("dateandtimebuttoncontainer").getBoundingClientRect().left&&(document.getElementById("dateandtimebuttoncontainer").style.left=
g+"px",handleButtonVisibility()),document.getElementById("dateandtimespan").style.visibility="visible"):(document.getElementById("dateandtimebuttoncontainer").style.left=d-parseInt(window.getComputedStyle(document.getElementById("dateandtimebuttoncontainer")).width,10)+"px",document.getElementById("dateandtimespan").style.visibility="visible",document.getElementById("buttonEllipsis").style.display="none","hidden"==a.style.visibility&&(a.style.visibility="visible",a.style.display="block"))}
function changeObserverColor(){document.getElementById("colorObserver").style.backgroundColor=document.getElementById("colorObserver").value}function changeObserverBackgroundColor(){document.getElementById("colorObserverLabelBackground").style.backgroundColor=document.getElementById("colorObserverLabelBackground").value}
function initShaderGlobeCommon(a){a.vertexPositionAttribute=gl.getAttribLocation(a,"aVertexPosition");a.textureCoordAttribute=gl.getAttribLocation(a,"aTextureCoord");a.samplerUniformDay=gl.getUniformLocation(a,"uSamplerDay");a.samplerUniformNight=gl.getUniformLocation(a,"uSamplerNight");a.samplerUniformMask=gl.getUniformLocation(a,"uSamplerMask");a.samplerUniformBoundaries=gl.getUniformLocation(a,"uSamplerBoundaries");a.samplerUniformFootprints=gl.getUniformLocation(a,"uSamplerFootprints");a.solarLongitude=
gl.getUniformLocation(a,"uSolarLongitude");a.solarLatitude=gl.getUniformLocation(a,"uSolarLatitude");a.lineWidth=gl.getUniformLocation(a,"uLineWidth");a.numSatellites=gl.getUniformLocation(a,"uNumSatellites");a.colorSeas=gl.getUniformLocation(a,"uColorSeas");a.colorLand=gl.getUniformLocation(a,"uColorLand");a.colorLongitudeLatitudeGrid=gl.getUniformLocation(a,"uColorLongitudeLatitudeGrid");a.colorTerminator=gl.getUniformLocation(a,"uColorTerminator");a.colorBoundaries=gl.getUniformLocation(a,"uColorBoundaries");
a.bUseSatelliteImage=gl.getUniformLocation(a,"bUseSatelliteImage");a.bFillLand=gl.getUniformLocation(a,"bFillLand");a.bFillSeas=gl.getUniformLocation(a,"bFillSeas");a.colorDay=gl.getUniformLocation(a,"uColorDay");a.colorNight=gl.getUniformLocation(a,"uColorNight");a.bDisplayDayNight=gl.getUniformLocation(a,"bDisplayDayNight");a.bDisplayLongitudeLatitudeGrid=gl.getUniformLocation(a,"bDisplayLongitudeLatitudeGrid");a.bDisplayTerminator=gl.getUniformLocation(a,"bDisplayTerminator");a.bDisplayBoundaries=
gl.getUniformLocation(a,"bDisplayBoundaries");a.bDisplayBoundariesCoastlines=gl.getUniformLocation(a,"bDisplayBoundariesCoastlines");a.bDisplayBoundariesInternal=gl.getUniformLocation(a,"bDisplayBoundariesInternal")}
function initShaderProjection(a,d,g){a&&(d=getShader(gl,d),g=getShader(gl,g),gl.attachShader(a,g),gl.attachShader(a,d),gl.linkProgram(a),gl.getProgramParameter(a,gl.LINK_STATUS)&&(initShaderGlobeCommon(a),a.centralLongitude=gl.getUniformLocation(a,"uCentralLongitude"),a.lineWidthS=gl.getUniformLocation(a,"uLineWidthS"),a.lineWidthT=gl.getUniformLocation(a,"uLineWidthT")))}
function initShaderSky(){if(shaderProgramSkyPerspective=gl.createProgram()){var a=getShader(gl,"shader-fs-sky-perspective"),d=getShader(gl,"shader-vs-sky-perspective");gl.attachShader(shaderProgramSkyPerspective,d);gl.attachShader(shaderProgramSkyPerspective,a);gl.linkProgram(shaderProgramSkyPerspective);gl.getProgramParameter(shaderProgramSkyPerspective,gl.LINK_STATUS)&&(shaderProgramSkyPerspective.vertexPositionAttribute=gl.getAttribLocation(shaderProgramSkyPerspective,"aVertexPosition"),shaderProgramSkyPerspective.textureCoordAttribute=
gl.getAttribLocation(shaderProgramSkyPerspective,"aTextureCoord"),shaderProgramSkyPerspective.samplerUniformSky=gl.getUniformLocation(shaderProgramSkyPerspective,"uSamplerSky"),shaderProgramSkyPerspective.perspectiveMatrixUniform=gl.getUniformLocation(shaderProgramSkyPerspective,"uPerspectiveMatrix"),shaderProgramSkyPerspective.modelViewMatrixUniform=gl.getUniformLocation(shaderProgramSkyPerspective,"uModelViewMatrix"))}}
function initShaderGlobe(){if(shaderProgramGlobePerspective=gl.createProgram()){var a=getShader(gl,"shader-fs-globe-perspective"),d=getShader(gl,"shader-vs-globe-perspective");gl.attachShader(shaderProgramGlobePerspective,d);gl.attachShader(shaderProgramGlobePerspective,a);gl.linkProgram(shaderProgramGlobePerspective);gl.getProgramParameter(shaderProgramGlobePerspective,gl.LINK_STATUS)&&(initShaderGlobeCommon(shaderProgramGlobePerspective),shaderProgramGlobePerspective.perspectiveMatrixUniform=gl.getUniformLocation(shaderProgramGlobePerspective,
"uPerspectiveMatrix"),shaderProgramGlobePerspective.modelViewMatrixUniform=gl.getUniformLocation(shaderProgramGlobePerspective,"uModelViewMatrix"))}shaderProgramGlobeCylindrical=gl.createProgram();initShaderProjection(shaderProgramGlobeCylindrical,"shader-fs-globe-cylindrical","shader-vs-globe-cylindrical");shaderProgramGlobeElliptical=gl.createProgram();initShaderProjection(shaderProgramGlobeElliptical,"shader-fs-globe-elliptical","shader-vs-globe-elliptical");shaderProgramGlobeSinusoidal=gl.createProgram();
initShaderProjection(shaderProgramGlobeSinusoidal,"shader-fs-globe-sinusoidal","shader-vs-globe-sinusoidal");shaderProgramGlobeRobinson=gl.createProgram();initShaderProjection(shaderProgramGlobeRobinson,"shader-fs-globe-robinson","shader-vs-globe-robinson")}function initShaders(){initShaderSymbol();initShaderSky();initShaderGlobe();initShaderTrack();initShaderXY();initShaderRADec();initShaderStars()}
function deleteSatellite(a){if(a=jsonSatellites["S"+a]){try{document.getElementById("labelContainer").removeChild(document.getElementById(a.elementShape))}catch(d){}try{document.getElementById("labelContainer").removeChild(document.getElementById(a.element))}catch(d){}try{document.getElementById("tableBodyTextualBody").removeChild(a.tracking.rowLabel)}catch(d){}delete a.tracking;a===objectCenter&&(objectCenter=null);a===objectReport&&(objectReport=null,updateObjectReport())}}
function deleteObjectReport(){if(objectReport)try{removeDisplayedSatelliteAndUncheck(objectReport.id),updateScene(!0)}catch(a){}}function updateSatelliteExtra(a){a.tracking.jdExtra!==jdNow&&(a.tracking.azel=satelliteAzElDegrees(a,observer),a.tracking.range=satelliteRangeAndRangeRate(a,observer),a.tracking.eclipse=eclipseState(a),a.tracking.jdExtra=jdNow)}
function updateSatellite(a,d){var g=!1;try{var m=1440*(jdNow-a.tracking.satrec.jdsatepoch),e=Math.floor((m-a.tracking.trackBackwardMinutes)/a.tracking.timeStep)*a.tracking.timeStep,b=[],c=[];a.tracking.pos=satellitePosition(a,m);if(a.tracking.pos){for(fromCartesianECEF(a.tracking,a.tracking.pos);0>a.tracking.longitude;)a.tracking.longitude+=2*Math.PI;if(satellitesToDisplay.length<MAX_NUM_SATELLITES||a===objectReport)if(a.tracking.recalculate||m<a.tracking.timeBase||e>=a.tracking.timeBaseStep+a.tracking.trackStepsActual*
a.tracking.timeStep){var f=[],h=[];a.tracking.recalculate=!1;a.tracking.timeBase=m;a.tracking.timeBaseStep=e;a.tracking.trackStepsMaximum=Math.ceil((a.tracking.trackForwardMinutes+a.tracking.trackBackwardMinutes)/a.tracking.timeStep);a.tracking.trackStepsActual=Math.floor((m-e+a.tracking.trackForwardMinutes)/a.tracking.timeStep);a.tracking.trackStepIndexCurrent=Math.floor((m-e)/a.tracking.timeStep);a.tracking.stepBack=1;if(0<a.tracking.trackStepsMaximum&&(h=addToSatelliteTrack(c,a,m+a.tracking.trackForwardMinutes,
!0))&&(addToSatelliteTrackPos(b,h.pos,h.latitude,!0),h=addToSatelliteTrack(c,a,m-a.tracking.trackBackwardMinutes,!0))){addToSatelliteTrackPos(b,h.pos,h.latitude,!1);for(var l=0;l<a.tracking.trackStepsActual;l++)if(f=h,h=addToSatelliteTrack(c,a,a.tracking.timeBaseStep+(l+1)*a.tracking.timeStep,!0))addToSatelliteTrackPos(b,h.pos,h.latitude,!1),addToSatelliteTrackPos(b,f.pos,f.latitude,!1);else break;h&&(f=h,h=addToSatelliteTrack(c,a,m+a.tracking.trackForwardMinutes,!0))&&(addToSatelliteTrackPos(b,h.pos,
h.latitude,!1),addToSatelliteTrackPos(b,f.pos,f.latitude,!1),addToSatelliteTrackPos(b,h.pos,h.latitude,!1),a.tracking.trackStepsActual<a.tracking.trackStepsMaximum&&(h=addToSatelliteTrack(c,a,m+a.tracking.trackForwardMinutes,!0),addToSatelliteTrackPos(b,h.pos,h.latitude,!0),a.tracking.stepBack=2))}addToSatelliteTrackCurrentPosition(c,b,a);gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.track);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(c),gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.trackPrevNext);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(b),gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);a.tracking.track.numItems=c.length/a.tracking.track.itemSize;a.tracking.circularBufferIndexStart=1}else{var p=Math.floor((m+a.tracking.trackForwardMinutes)/a.tracking.timeStep)-Math.floor((a.tracking.timeBase+a.tracking.trackForwardMinutes)/a.tracking.timeStep),k=Math.floor((m-e+a.tracking.trackForwardMinutes)/a.tracking.timeStep);f=[];h=[];d=[];var t=1;a.tracking.trackStepIndexCurrent=Math.floor((m-
e)/a.tracking.timeStep);if(0<a.tracking.trackStepsMaximum&&(h=a.tracking.timeBaseStep+a.tracking.trackStepsActual*a.tracking.timeStep>m?addToSatelliteTrack(d,a,a.tracking.timeBaseStep+a.tracking.trackStepsActual*a.tracking.timeStep,!1):addToSatelliteTrack(d,a,m,!1))){for(l=0;l<p;l++)if(f=h,h=addToSatelliteTrack(c,a,a.tracking.timeBaseStep+(a.tracking.trackStepsActual+l+1)*a.tracking.timeStep,!0))addToSatelliteTrackPos(b,h.pos,h.latitude,!1),addToSatelliteTrackPos(b,f.pos,f.latitude,!1);else break;
h&&(f=h,h=addToSatelliteTrack(c,a,m+a.tracking.trackForwardMinutes,!0))&&(addToSatelliteTrackPos(b,h.pos,h.latitude,!1),addToSatelliteTrackPos(b,f.pos,f.latitude,!1),addToSatelliteTrackPos(b,h.pos,h.latitude,!1),k<a.tracking.trackStepsMaximum&&(addToSatelliteTrackPos(c,h.pos,h.latitude,!0),addToSatelliteTrackPos(b,h.pos,h.latitude,!0)),a.tracking.trackStepsActual<a.tracking.trackStepsMaximum&&(t+=1),h=e+a.tracking.timeStep<m?addToSatelliteTrack(d,a,e+a.tracking.timeStep,!1):addToSatelliteTrack(d,
a,m,!1))&&(f=addToSatelliteTrack(c,a,m-a.tracking.trackBackwardMinutes,!0),addToSatelliteTrackPos(b,f.pos,f.latitude,!1),addToSatelliteTrackPos(b,h.pos,h.latitude,!1),addToSatelliteTrackPos(b,f.pos,f.latitude,!1),addToCircularBuffer(c,b,a,t))}a.tracking.timeBase=m;a.tracking.timeBaseStep=e;a.tracking.trackStepsActual=k;c.length=0;b.length=0;addToSatelliteTrackCurrentPosition(c,b,a);gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.track);gl.bufferSubData(gl.ARRAY_BUFFER,SIZE_OF_FLOAT*a.tracking.track.itemSize*
(a.tracking.track.numItems-6),new Float32Array(c));gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.trackPrevNext);gl.bufferSubData(gl.ARRAY_BUFFER,SIZE_OF_FLOAT*a.tracking.trackPrevNext.itemSize*(a.tracking.track.numItems-6),new Float32Array(b));gl.bindBuffer(gl.ARRAY_BUFFER,null)}if("joined"===a.setting.trackStyle){var u=vec3.create();m=[];vec3.normalize(u,a.tracking.pos);m.push(a.tracking.pos[0],a.tracking.pos[1],a.tracking.pos[2],0,u[0],u[1],u[2],0);gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.connect);gl.bufferData(gl.ARRAY_BUFFER,
new Float32Array(m),gl.DYNAMIC_DRAW)}g=!0}else removeDisplayedSatelliteAndUncheck(d)}catch(v){}return g};var textCenterInView='<div class="objectReportInteract" id="centerInView">&ocir;</div>',textEditObject='<div class="objectReportInteract" id="editObject">&#9967;</div>',textDeleteFromView='<div class="objectReportInteract" id="deleteFromView">&hairsp;&cross;</div>',textExpand='<div class="objectReportInteract" id="expandReport">&#x271A;</div>';
function updateObjectReport(){var a,d="&ndash;";if(a=document.getElementById("position")){if(objectReport)if(d="",objectReport.isObserver){var g="";objectReport.hasOwnProperty("title")&&(g=objectReport.title.trim(),0<g.length&&(d=d.concat(g)));if(0==g.length||0<reportLevelObserver)0<d.length&&(d=d.concat("<br />")),d=d.concat(longitudeToString(180*objectReport.tracking.longitude/Math.PI,!0,!1)+"&nbsp;"+latitudeToString(180*objectReport.tracking.latitude/Math.PI,!0,!1)+"&nbsp;"+altitudeObserverToString(objectReport.tracking.altitude));
d=d.concat("<br />");0<g.length&&(d=d.concat(textExpand));"projectionRadar"!==projection&&(d=d.concat(textCenterInView));d=d.concat(textEditObject)}else{updateSatelliteExtra(objectReport);for(g=0;g<=reportLevelSatellite;g++){switch(g){case 0:d=d.concat(objectReport[JSON_NAMES][0]+"&nbsp;("+objectReport.id+")");break;case 1:d=d.concat(longitudeToString(180*objectReport.tracking.longitude/Math.PI,!1,!0)+"&nbsp;"+latitudeToString(180*objectReport.tracking.latitude/Math.PI,!1,!0)+"&nbsp;"+altitudeSatelliteToString(objectReport.tracking.altitude*
EARTH_SEMI_MAJOR_AXIS_KM));break;case 2:d=d.concat("Az:&nbsp;"+azimuthToString(objectReport.tracking.azel.az,!0)+"&deg;&nbsp;El:&nbsp;"+elevationToString(objectReport.tracking.azel.el,!0)+"&deg");break;case 3:d=d.concat("Range:&nbsp;"+rangeToString(objectReport.tracking.range.range,!0)+"&#x339E;&nbsp;Rate:&nbsp;"+rangeRateToString(objectReport.tracking.range.rangeRate,!0)+"&#x339E;/s");break;case 4:d=d.concat("Eclipse:&nbsp;"+objectReport.tracking.eclipse)}d=d.concat("<br />")}d=d.concat(textExpand);
"projectionRadar"!==projection&&(d=d.concat(textCenterInView));d=d.concat(textEditObject);d=d.concat(textDeleteFromView)}a.innerHTML=d.trim();(a=document.getElementById("expandReport"))&&a.addEventListener("click",expandReport);(a=document.getElementById("centerInView"))&&a.addEventListener("click",centerObjectReport);(a=document.getElementById("deleteFromView"))&&a.addEventListener("click",deleteObjectReport);(a=document.getElementById("editObject"))&&a.addEventListener("click",editObjectReport)}}
function updateReportedPosition(a,d){null!=a&&null!=d?"projectTextual"===projection?updateReportedPositionTextual(a,d):"projectionPerspective"===projection?updateReportedPositionPerspective(a,d):"projectionRadar"===projection?updateReportedPositionRadar(a,d):updateReportedPositionProjection(a,d):document.getElementById("lonandlat").innerHTML="&ndash;"}
function initializeSatellite(a,d){var g=!1;a.labelRect=[];a.labelRect.width=0;a.labelRect.height=0;a.labelRect.cachedName="";if(a.hasOwnProperty(JSON_OMM_VALUES)){a.id=d;try{a.tracking.timeBaseStep=0}catch(m){a.tracking=[],a.tracking.timeBaseStep=0,a.element="SATELLITE_"+d.toString(),a.elementShape="SATELLITE_SHAPE_"+d.toString(),a.setting=Object.assign({},satelliteDefaultSettings),setSatelliteFootprintAngles(a)}a.tracking.satrec=SGP4.omm2rv(a[JSON_OMM_VALUES],wgsModel);a.tracking.satrec&&(SGP4.sgp4init(wgsModel,
"a",a.tracking.satrec.satnum,a.tracking.satrec.jdsatepoch-2433281.5,a.tracking.satrec.bstar,a.tracking.satrec.ecco,a.tracking.satrec.argpo,a.tracking.satrec.inclo,a.tracking.satrec.mo,a.tracking.satrec.no,a.tracking.satrec.nodeo,a.tracking.satrec),setTrackMinutes(a),a.tracking.timeStep=1/(10*Math.PI*a.tracking.satrec.no),a.tracking.recalculate=!0,a.tracking.jdSatEpoch=0,a.tracking.circularBufferIndex=0,a.tracking.connect=gl.createBuffer(),a.tracking.connect.itemSize=4,a.tracking.connect.itemType=
gl.FLOAT,a.tracking.track=gl.createBuffer(),a.tracking.track.itemSize=4,a.tracking.track.itemType=gl.FLOAT,a.tracking.trackPrevNext=gl.createBuffer(),a.tracking.trackPrevNext.itemSize=4,a.tracking.trackPrevNext.itemType=gl.FLOAT,a.tracking.jdExtra=0,createTableEntry(a),g=!0)}return g}
function drawObserver(){"projectionPerspective"===projection?drawLabelPerspective(!1,observer,observer.element,observer.elementShape,observer.pos,observer.setting.label,observer.setting.color,observer.setting.symbol,symbolSizeSatellite):("projectionCylindrical"===projection||"projectionSinusoidal"===projection||"projectionElliptical"===projection||"projectionRobinson"===projection)&&drawLabelProjection(!1,observer,observer.tracking,observer.setting,symbolSizeSatellite)}
function addToSatelliteTrackPos(a,d,g,m){m?a.push(d[0],d[1],d[2],g,d[0],d[1],d[2],g):a.push(d[0],d[1],d[2],g);return{pos:d,latitude:g}}function addToSatelliteTrack(a,d,g,m){return(d=satellitePosition(d,g))?(g=[],fromCartesianECEF(g,d),addToSatelliteTrackPos(a,d,g.latitude,m),{pos:d,latitude:g.latitude}):null}
function addToCircularBuffer(a,d,g,m){m=g.tracking.circularBufferIndexStart-m;1>m&&(m+=g.tracking.track.numItems/2-4);if(2*m+a.length/g.tracking.track.itemSize>=g.tracking.track.numItems-6){var e=g.tracking.track.numItems-6-2*m,b=a.length/g.tracking.track.itemSize-e+2;gl.bindBuffer(gl.ARRAY_BUFFER,g.tracking.track);gl.bufferSubData(gl.ARRAY_BUFFER,SIZE_OF_FLOAT*g.tracking.track.itemSize*2*m,new Float32Array(a.slice(0,e*g.tracking.track.itemSize)));gl.bufferSubData(gl.ARRAY_BUFFER,0,new Float32Array(a.slice(a.length-
b*g.tracking.track.itemSize)));gl.bindBuffer(gl.ARRAY_BUFFER,g.tracking.trackPrevNext);gl.bufferSubData(gl.ARRAY_BUFFER,SIZE_OF_FLOAT*g.tracking.trackPrevNext.itemSize*(2*m-1),new Float32Array(d.slice(0,(e+1)*g.tracking.trackPrevNext.itemSize)));gl.bufferSubData(gl.ARRAY_BUFFER,0,new Float32Array(d.slice(d.length-(b+1)*g.tracking.trackPrevNext.itemSize)));g.tracking.circularBufferIndexStart=2===b?g.tracking.track.numItems/2-4:b/2-1}else gl.bindBuffer(gl.ARRAY_BUFFER,g.tracking.track),gl.bufferSubData(gl.ARRAY_BUFFER,
SIZE_OF_FLOAT*g.tracking.track.itemSize*2*m,new Float32Array(a)),gl.bindBuffer(gl.ARRAY_BUFFER,g.tracking.trackPrevNext),gl.bufferSubData(gl.ARRAY_BUFFER,SIZE_OF_FLOAT*g.tracking.trackPrevNext.itemSize*(2*m-1),new Float32Array(d)),g.tracking.circularBufferIndexStart=m+a.length/(2*g.tracking.track.itemSize)-1;gl.bindBuffer(gl.ARRAY_BUFFER,null)}
function editObjectReport(){objectReport&&(objectReport.hasOwnProperty(JSON_OMM_VALUES)?(resetVisible(),bShowFindSatellite=!0,showElements(),resizedInternal(),searchForSatellitesRoutine("^"+objectReport[JSON_OMM_VALUES][OMM_OBJECT_ID]+"$",objectReport[JSON_OMM_VALUES][OMM_OBJECT_ID],headersSatellite[COLUMNS.INTERNATIONAL_DESIGNATOR].html,!0,!1,!1),bShowSatelliteSettings=!1,setTimeout(function(){showSatelliteSettings()},0)):(resetVisible(),bShowSelectObserver=!0,showElements(),resizedInternal(),bShowObserverSettings=
!1,setTimeout(function(){showObserverSettings()},0)))}function centerObjectReport(){objectReport&&(objectCenter=objectReport);redrawScene()}
function addToSatelliteTrackCurrentPosition(a,d,g){var m,e,b=[];if(m=1<g.tracking.trackStepIndexCurrent?addToSatelliteTrack(b,g,g.tracking.timeBaseStep+(g.tracking.trackStepIndexCurrent-1)*g.tracking.timeStep,!1):0<g.tracking.trackBackwardMinutes?addToSatelliteTrack(b,g,g.tracking.timeBase-g.tracking.trackBackwardMinutes,!1):addToSatelliteTrackPos(b,g.tracking.pos,g.tracking.latitude,!1))if(addToSatelliteTrackPos(d,m.pos,m.latitude,!1),m=0<g.tracking.trackStepIndexCurrent?addToSatelliteTrack(a,g,
g.tracking.timeBaseStep+(g.tracking.trackStepIndexCurrent+0)*g.tracking.timeStep,!0):0<g.tracking.trackBackwardMinutes?addToSatelliteTrack(a,g,g.tracking.timeBase-g.tracking.trackBackwardMinutes,!0):addToSatelliteTrackPos(a,g.tracking.pos,g.tracking.latitude,!0))if(e=addToSatelliteTrackPos(a,g.tracking.pos,g.tracking.latitude,!0))if(addToSatelliteTrackPos(d,e.pos,e.latitude,!1),addToSatelliteTrackPos(d,m.pos,m.latitude,!1),m=e,e=g.tracking.trackStepIndexCurrent<g.tracking.trackStepsActual?addToSatelliteTrack(a,
g,g.tracking.timeBaseStep+(g.tracking.trackStepIndexCurrent+1)*g.tracking.timeStep,!0):0<g.tracking.trackForwardMinutes?addToSatelliteTrack(a,g,g.tracking.timeBase+g.tracking.trackForwardMinutes,!0):addToSatelliteTrackPos(a,g.tracking.pos,g.tracking.latitude,!0))addToSatelliteTrackPos(d,e.pos,e.latitude,!1),addToSatelliteTrackPos(d,m.pos,m.latitude,!1),(e=g.tracking.trackStepIndexCurrent+1<g.tracking.trackStepsActual?addToSatelliteTrack(b,g,g.tracking.timeBaseStep+(g.tracking.trackStepIndexCurrent+
2)*g.tracking.timeStep,!1):0<g.tracking.trackForwardMinutes?addToSatelliteTrack(b,g,g.tracking.timeBase+g.tracking.trackForwardMinutes,!1):addToSatelliteTrackPos(b,g.tracking.pos,g.tracking.latitude,!1))&&addToSatelliteTrackPos(d,e.pos,e.latitude,!1)}
function updateSatelliteFootprint(a,d){if(d<FOOTPRINTS_ARRAY_NUM_SATELLITES){var g=4*d*FOOTPRINTS_ARRAY_NUM_ENTRIES;footprintData[g+0]=255*a.setting.color[0];footprintData[g+1]=255*a.setting.color[1];footprintData[g+2]=255*a.setting.color[2];footprintData[g+3]=255*a.setting.footprintAlpha;a.setting.footprintIndex=d;updateTextureArray(footprintData,d,1,a.tracking.longitude);updateTextureArray(footprintData,d,2,a.tracking.latitude+Math.PI/2);for(d=0;5>d;d++)a.setting.footprintArray.length>d&&a.setting.footprintArray[d]<
Math.PI/2?updateTextureArray(footprintData,a.setting.footprintIndex,d+3,getAngularDistanceRadians(a.tracking.altitude,a.setting.footprintArray[d])):updateTextureArray(footprintData,a.setting.footprintIndex,d+3,Math.PI)}}
function drawSatelliteTrackSubSub(a,d,g){d+=2*a.tracking.circularBufferIndexStart;d>=a.tracking.track.numItems-6&&(d+=2-(a.tracking.track.numItems-6));d+g<a.tracking.track.numItems-6?gl.drawArrays(gl.LINE_STRIP,d,g):(a=a.tracking.track.numItems-6-d,g=g-a+2,1<a?(gl.drawArrays(gl.LINE_STRIP,d,a),gl.drawArrays(gl.LINE_STRIP,0,g)):gl.drawArrays(gl.LINE_STRIP,1,g-1))}
function drawSatelliteTrackSub(a,d){gl.uniform4fv(d.color,a.setting.color);gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.track);gl.vertexAttribPointer(d.vertexPositionAttribute,a.tracking.track.itemSize,a.tracking.track.itemType,!1,0,0);gl.enableVertexAttribArray(d.vertexPositionAttribute);if("projectionCylindrical"===projection||"projectionSinusoidal"===projection||"projectionElliptical"===projection||"projectionRobinson"===projection||"projectionRadar"===projection)gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.trackPrevNext),
gl.vertexAttribPointer(d.vertexPositionPrevNextAttribute,a.tracking.trackPrevNext.itemSize,a.tracking.trackPrevNext.itemType,!1,0,0),gl.enableVertexAttribArray(d.vertexPositionPrevNextAttribute);0<a.tracking.trackStepsActual&&(0<a.tracking.trackStepIndexCurrent&&drawSatelliteTrackSubSub(a,0,2*(a.tracking.trackStepIndexCurrent+1)-1),0<a.tracking.trackStepsActual-a.tracking.trackStepIndexCurrent&&drawSatelliteTrackSubSub(a,2*(a.tracking.trackStepIndexCurrent+1)+1,2*(a.tracking.trackStepsActual-a.tracking.trackStepIndexCurrent+
1)-1));gl.drawArrays(gl.LINE_STRIP,a.tracking.track.numItems-6,6);gl.bindBuffer(gl.ARRAY_BUFFER,null)}
function drawSatelliteTrack(a){if(0<a.tracking.trackBackwardMinutes||0<a.tracking.trackForwardMinutes)if("projectionPerspective"===projection){if("both"===a.setting.trackStyle||"aerial"===a.setting.trackStyle||"joined"===a.setting.trackStyle)gl.useProgram(shaderProgramTrackPerspective),drawSatelliteTrackSub(a,shaderProgramTrackPerspective);if("both"===a.setting.trackStyle||"ground"===a.setting.trackStyle||"joined"===a.setting.trackStyle)gl.useProgram(shaderProgramTrackGroundPerspective),drawSatelliteTrackSub(a,
shaderProgramTrackGroundPerspective)}else"projectionCylindrical"===projection?(gl.useProgram(shaderProgramTrackCylindrical),drawSatelliteTrackSub(a,shaderProgramTrackCylindrical)):"projectionElliptical"===projection?(gl.useProgram(shaderProgramTrackElliptical),drawSatelliteTrackSub(a,shaderProgramTrackElliptical)):"projectionSinusoidal"===projection?(gl.useProgram(shaderProgramTrackSinusoidal),drawSatelliteTrackSub(a,shaderProgramTrackSinusoidal)):"projectionRobinson"===projection?(gl.useProgram(shaderProgramTrackRobinson),
drawSatelliteTrackSub(a,shaderProgramTrackRobinson)):"projectionRadar"===projection&&(gl.useProgram(shaderProgramTrackRadar),drawSatelliteTrackSub(a,shaderProgramTrackRadar));"projectionPerspective"===projection&&"joined"===a.setting.trackStyle&&(gl.useProgram(shaderProgramTrackPerspective),gl.bindBuffer(gl.ARRAY_BUFFER,a.tracking.connect),gl.getBufferParameter(gl.ARRAY_BUFFER,gl.BUFFER_SIZE)>=2*a.tracking.connect.itemSize*SIZE_OF_FLOAT&&(gl.vertexAttribPointer(shaderProgramTrackPerspective.vertexPositionAttribute,
a.tracking.connect.itemSize,a.tracking.connect.itemType,!1,0,0),gl.enableVertexAttribArray(shaderProgramTrackPerspective.vertexPositionAttribute),gl.drawArrays(gl.LINES,0,2)))}
function drawSatellite(a){if(a.tracking.pos)if((satellitesToDisplay.length<MAX_NUM_SATELLITES||a===objectReport)&&drawSatelliteTrack(a),"projectionPerspective"===projection){var d=vec3.create();"ground"!==a.setting.trackStyle&&"both"!==a.setting.trackStyle&&"joined"!==a.setting.trackStyle||vec3.normalize(d,a.tracking.pos);"both"===a.setting.trackStyle||"aerial"===a.setting.trackStyle||"joined"===a.setting.trackStyle?drawLabelPerspective(!0,a,a.element,a.elementShape,a.tracking.pos,a.setting.label,
a.setting.color,a.setting.symbol,symbolSizeSatellite):"ground"===a.setting.trackStyle&&drawLabelPerspective(!0,a,a.element,a.elementShape,d,a.setting.label,a.setting.color,a.setting.symbol,symbolSizeSatellite);"both"!==a.setting.trackStyle&&"joined"!==a.setting.trackStyle||drawLabelPerspective(!0,a,"","",d,!1,a.setting.color,a.setting.symbol,symbolSizeSatellite)}else"projectionCylindrical"===projection||"projectionSinusoidal"===projection||"projectionElliptical"===projection||"projectionRobinson"===
projection?drawLabelProjection(!0,a,a.tracking,a.setting,symbolSizeSatellite):"projectionRadar"===projection?drawLabelRadar(a,a.element,a.elementShape,a.tracking.pos,a.tracking.latitude,a.setting.label,a.setting.color,a.setting.symbol,symbolSizeSatellite):"projectionTextual"===projection&&drawTable(a)}
function drawSatellites(){"projectionPerspective"===projection&&(gl.useProgram(shaderProgramTrackPerspective),gl.uniformMatrix4fv(shaderProgramTrackPerspective.perspectiveMatrixUniform,!1,perspectiveMatrix),gl.uniformMatrix4fv(shaderProgramTrackPerspective.modelViewMatrixUniform,!1,modelViewMatrix),gl.useProgram(shaderProgramTrackGroundPerspective),gl.uniformMatrix4fv(shaderProgramTrackGroundPerspective.perspectiveMatrixUniform,!1,perspectiveMatrix),gl.uniformMatrix4fv(shaderProgramTrackGroundPerspective.modelViewMatrixUniform,
!1,modelViewMatrix));satellitesToDisplay.forEach(function(a){if(a=jsonSatellites["S"+a])try{a!=objectReport&&drawSatellite(a)}catch(d){}});if(objectReport&&!objectReport.isObserver)try{drawSatellite(objectReport)}catch(a){}}
function drawLabelXY(a,d,g,m,e,b,c,f,h,l,p){if(divLabelContainerNew){var k="satelliteHoverShape";c="satellite";a||(k="observerHoverShape",c="observer");if(0<h){var t=document.createElement("div");t&&(Object.assign(t,{id:d.elementShape,className:k,innerHTML:"&#9723;"}),Object.assign(t.style,{left:(g*canvas.clientWidth/100).toString()+"px",top:(m*canvas.clientHeight/100).toString()+"px"}),divLabelContainerNew.appendChild(t),gl.disable(gl.DEPTH_TEST),gl.useProgram(shaderProgramSymbol),gl.uniformMatrix4fv(shaderProgramSymbol.scaleMatrixUniform,
!1,scaleMatrix),gl.uniform4fv(shaderProgramSymbol.color,f),mat4.identity(scaleMatrix),mat4.scale(scaleMatrix,scaleMatrix,[l/gl.drawingBufferWidth,l/gl.drawingBufferHeight,1]),gl.uniformMatrix4fv(shaderProgramSymbol.scaleMatrixUniform,!1,scaleMatrix),mat4.identity(translateMatrix),mat4.translate(translateMatrix,translateMatrix,p),gl.uniformMatrix4fv(shaderProgramSymbol.translateMatrixUniform,!1,translateMatrix),gl.bindBuffer(gl.ARRAY_BUFFER,symbolBuffers[h]),gl.vertexAttribPointer(shaderProgramSymbol.vertexPositionAttribute,
symbolBuffers[h].itemSize,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(shaderProgramSymbol.vertexPositionAttribute),gl.drawArrays(symbolBuffers[h].style,0,symbolBuffers[h].numItems),gl.enable(gl.DEPTH_TEST))}if(e&&(!a||satellitesToDisplay.length<MAX_NUM_SATELLITES||d===objectReport)){e=a="-50%";var u=document.createElement("div");0<h&&(h=d.labelRect.width/2/canvas.clientWidth*100,e=d.labelRect.height/canvas.clientHeight*100,100<g+h?a="-100%":0>g-h&&(a="0%"),100<m+e?(e="-100%",m-=50*l/canvas.clientHeight):
(e="0%",m+=50*l/canvas.clientHeight));b&&(l=d.setting.fillBackground?makeRGBAColor(d.setting.colorBackground,.4):"transparent",Object.assign(u,{id:b,className:c,innerHTML:d[JSON_NAMES][0]}),Object.assign(u.style,{color:makeRGBAColor(d.setting.color,1),backgroundColor:l,transform:"translate("+a+","+e+")",webkitTransform:"translate("+a+","+e+")",left:(g*canvas.clientWidth/100).toString()+"px",top:(m*canvas.clientHeight/100).toString()+"px"}),divLabelContainerNew.appendChild(u));d.hasOwnProperty("screenWidth")&&
d.screenWidth==canvas.clientWidth&&d.cachedName===d.names[0]||setTimeout(function(){d.labelRect=u.getBoundingClientRect();d.cachedName=d[JSON_NAMES][0];d.screenWidth=canvas.clientWidth},0)}}}
function initShaderTrack(){var a=getShader(gl,"shader-fs-track-perspective"),d=getShader(gl,"shader-fs-track-projection"),g=getShader(gl,"shader-fs-track-radar");shaderProgramTrackPerspective=gl.createProgram();initShaderTrackPerspective(shaderProgramTrackPerspective,"shader-vs-track-perspective",a);shaderProgramTrackGroundPerspective=gl.createProgram();initShaderTrackPerspective(shaderProgramTrackGroundPerspective,"shader-vs-track-perspective-ground",a);shaderProgramTrackCylindrical=gl.createProgram();
initShaderTrackProjection(shaderProgramTrackCylindrical,"shader-vs-track-cylindrical",d);shaderProgramTrackElliptical=gl.createProgram();initShaderTrackProjection(shaderProgramTrackElliptical,"shader-vs-track-elliptical",d);shaderProgramTrackSinusoidal=gl.createProgram();initShaderTrackProjection(shaderProgramTrackSinusoidal,"shader-vs-track-sinusoidal",d);shaderProgramTrackRobinson=gl.createProgram();initShaderTrackProjection(shaderProgramTrackRobinson,"shader-vs-track-robinson",d);shaderProgramTrackRadar=
gl.createProgram();initShaderTrackRadar(shaderProgramTrackRadar,"shader-vs-track-radar",g)};function drawGlobeProjection(a){gl.useProgram(a);gl.activeTexture(gl.TEXTURE0+TEXTURE_DAY);gl.bindTexture(gl.TEXTURE_2D,globeTextureDay);gl.activeTexture(gl.TEXTURE0+TEXTURE_NIGHT);gl.bindTexture(gl.TEXTURE_2D,globeTextureNight);gl.activeTexture(gl.TEXTURE0+TEXTURE_MASK);gl.bindTexture(gl.TEXTURE_2D,globeTextureMask);gl.activeTexture(gl.TEXTURE0+TEXTURE_BOUNDARIES);gl.bindTexture(gl.TEXTURE_2D,globeTextureBoundaries);footprintTextureDefined&&(gl.activeTexture(gl.TEXTURE0+TEXTURE_FOOTPRINT),gl.bindTexture(gl.TEXTURE_2D,
globeTextureFootprints));gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexTextureCoordBufferProjection);gl.vertexAttribPointer(a.textureCoordAttribute,globeVertexTextureCoordBufferProjection.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(a.textureCoordAttribute);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,globeVertexIndexBufferProjection);gl.drawElements(gl.TRIANGLES,globeVertexIndexBufferProjection.numItems,gl.UNSIGNED_SHORT,0);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null);gl.bindTexture(gl.TEXTURE_2D,null)}
function drawGlobeCylindrical(){drawGlobeProjection(shaderProgramGlobeCylindrical)}function drawGlobeElliptical(){drawGlobeProjection(shaderProgramGlobeElliptical)}function drawGlobeSinusoidal(){drawGlobeProjection(shaderProgramGlobeSinusoidal)}function drawGlobeRobinson(){drawGlobeProjection(shaderProgramGlobeRobinson)}
function initGlobeBuffersProjection(){var a=[],d=[],g,m;for(m=0;m<=latitudeBands;m++){var e=1-m/latitudeBands;for(g=0;g<=longitudeBands;g++)a.push(1-g/longitudeBands,e)}for(m=0;m<latitudeBands;m++)for(g=0;g<longitudeBands;g++){e=m*(longitudeBands+1)+g;var b=e+longitudeBands+1;d.push(e,e+1,b,b,e+1,b+1)}globeVertexTextureCoordBufferProjection=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexTextureCoordBufferProjection);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);globeVertexTextureCoordBufferProjection.itemSize=
2;globeVertexTextureCoordBufferProjection.numItems=a.length/globeVertexTextureCoordBufferProjection.itemSize;globeVertexIndexBufferProjection=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,globeVertexIndexBufferProjection);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),gl.STATIC_DRAW);globeVertexIndexBufferProjection.numItems=d.length}
function drawLabelProjection(a,d,g,m,e){var b=longLatToXY(g.longitude,g.latitude),c=vec4.fromValues(b.x,b.y,0,0);a&&(e*=Math.pow(1.1,g.altitude));drawLabelXY(a,d,50*(b.x+1),100*(1-b.y)/2,m.label,d.element,d.elementShape,m.color,m.symbol,e,c)}
function initShaderTrackProjection(a,d,g){d=getShader(gl,d);gl.attachShader(a,d);gl.attachShader(a,g);gl.linkProgram(a);gl.getProgramParameter(a,gl.LINK_STATUS)&&(a.vertexPositionAttribute=gl.getAttribLocation(a,"aVertexPosition"),a.vertexPositionPrevNextAttribute=gl.getAttribLocation(a,"aVertexPositionPrevNext"),a.centralLongitude=gl.getUniformLocation(a,"uCentralLongitude"),a.color=gl.getUniformLocation(a,"uColor"))}
function updateReportedPositionProjection(a,d){var g=NaN,m=NaN;if("projectionCylindrical"===projection)g=180*(2*a/gl.drawingBufferWidth+centralPosition.longitudeRadians/Math.PI+1),m=90*(1-2*d/gl.drawingBufferHeight);else if("projectionRobinson"===projection){g=RobinsonMapStructs.length;a=2*(a-.5*gl.drawingBufferWidth)/gl.drawingBufferWidth;var e=2*(d-.5*gl.drawingBufferHeight)/gl.drawingBufferHeight;for(var b=0;b<g-1;b++)if(Math.abs(e)>=RobinsonMapStructs[b+0][2]&&Math.abs(e)<=RobinsonMapStructs[b+
1][2]){m=((Math.abs(e)-RobinsonMapStructs[b+0][2])*RobinsonMapStructs[b+1][0]+(RobinsonMapStructs[b+1][2]-Math.abs(e))*RobinsonMapStructs[b+0][0])/(RobinsonMapStructs[b+1][2]-RobinsonMapStructs[b+0][2]);0<e&&(m*=-1);break}d=longLatToXY(centralPosition.longitudeRadians-Math.PI,m*Math.PI/180);g=Math.abs(a)<=Math.abs(d.x)?180*centralPosition.longitudeRadians/Math.PI+a/(((Math.abs(e)-RobinsonMapStructs[b+0][2])*RobinsonMapStructs[b+1][1]+(RobinsonMapStructs[b+1][2]-Math.abs(e))*RobinsonMapStructs[b+0][1])/
(RobinsonMapStructs[b+1][2]-RobinsonMapStructs[b+0][2]))*180:NaN}else"projectionElliptical"===projection?(a=2*(a-.5*gl.drawingBufferWidth)/gl.drawingBufferWidth,e=Math.asin(2*(.5*gl.drawingBufferHeight-d)/gl.drawingBufferHeight),m=Math.asin((2*e+Math.sin(2*e))/Math.PI),d=longLatToXY(centralPosition.longitudeRadians-Math.PI,m),Math.abs(a)<=Math.abs(d.x)&&(g=180/Math.PI*(centralPosition.longitudeRadians+Math.PI*a/Math.cos(e)),m*=180/Math.PI)):"projectionSinusoidal"===projection&&(a=2*(a-.5*gl.drawingBufferWidth)/
gl.drawingBufferWidth,m=Math.PI/2*(1-2*d/gl.drawingBufferHeight),d=longLatToXY(centralPosition.longitudeRadians-Math.PI,m),Math.abs(a)<=Math.abs(d.x)&&0<Math.cos(m)&&(g=180/Math.PI*(Math.PI*a/Math.cos(m)+centralPosition.longitudeRadians),m*=180/Math.PI));isNaN(g)||isNaN(m)?(document.getElementById("lonandlat").innerHTML="&ndash;",mouseLatitude=mouseLongitude=null):(document.getElementById("lonandlat").innerHTML=longitudeToString(g,!1,!0)+"&nbsp;"+latitudeToString(m,!1,!0),mouseLongitude=g,mouseLatitude=
m)};var latitudeBands=60,longitudeBands=60,pixelWidth=4,ROBINSON_ANGLE_STEP_DEGREES=5;function initialize(){var a=new Float32Array([].concat.apply([],RobinsonMapStructs)),d;gl.useProgram(shaderProgramTrackRobinson);(d=gl.getUniformLocation(shaderProgramTrackRobinson,"uRobinsonMap"))&&gl.uniform3fv(d,a);gl.useProgram(shaderProgramGlobeRobinson);(d=gl.getUniformLocation(shaderProgramGlobeRobinson,"uRobinsonMap"))&&gl.uniform3fv(d,a)}
function applyPerspectiveRotation(){mat4.identity(globeRotationMatrix);mat4.rotateX(globeRotationMatrix,globeRotationMatrix,centralPosition.latitudeRadians);mat4.rotateY(globeRotationMatrix,globeRotationMatrix,Math.PI/2-centralPosition.longitudeRadians);mat4.identity(modelViewMatrix);mat4.translate(modelViewMatrix,modelViewMatrix,[0,0,-distanceScale]);mat4.multiply(modelViewMatrix,modelViewMatrix,globeRotationMatrix)}
function applySkyPerspectiveRotation(){mat4.identity(globeRotationMatrix);mat4.rotateX(globeRotationMatrix,globeRotationMatrix,centralPosition.latitudeRadians);mat4.rotateY(globeRotationMatrix,globeRotationMatrix,Math.PI/2-centralPosition.longitudeRadians-ThetaGRadians(jdNow));mat4.identity(skyModelViewMatrix);mat4.multiply(skyModelViewMatrix,skyModelViewMatrix,globeRotationMatrix)}
function perspective(){if(0<canvas.clientWidth){var a=canvas.clientWidth/canvas.clientHeight;near=MIN_SPHERICAL_VIEW_ALTITUDE/2;far=200;canvas.width=canvas.clientWidth;canvas.height=canvas.clientHeight;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);mat4.perspective(perspectiveMatrix,glMatrix.toRadian(angleViewing),a,near,far);calculateFontSize();calculateSymbolSize();calculateLineWidth()}}
function initShaderTrackPerspective(a,d,g){d=getShader(gl,d);gl.attachShader(a,d);gl.attachShader(a,g);gl.linkProgram(a);gl.getProgramParameter(a,gl.LINK_STATUS)&&(a.vertexPositionAttribute=gl.getAttribLocation(a,"aVertexPosition"),a.color=gl.getUniformLocation(a,"uColor"),a.perspectiveMatrixUniform=gl.getUniformLocation(a,"uPerspectiveMatrix"),a.modelViewMatrixUniform=gl.getUniformLocation(a,"uModelViewMatrix"))}
function initGlobeBuffersPerspective(){var a=[],d=[],g=[],m,e;for(e=0;60>=e;e++){var b=e*Math.PI/60;var c=1-e/60;for(m=0;60>=m;m++){var f=1-m/60;var h=toCartesianECEF(2*m*Math.PI/60,b-Math.PI/2,0);a.push(f,c);d.push(-h[0],-h[1],h[2])}}for(e=0;60>e;e++)for(m=0;60>m;m++)h=61*e+m,b=h+60+1,g.push(h,h+1,b,b,h+1,b+1);globeVertexTextureCoordBufferPerspective=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexTextureCoordBufferPerspective);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);
globeVertexTextureCoordBufferPerspective.itemSize=2;globeVertexTextureCoordBufferPerspective.numItems=a.length/globeVertexTextureCoordBufferPerspective.itemSize;globeVertexPositionBufferPerspective=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexPositionBufferPerspective);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(d),gl.STATIC_DRAW);globeVertexPositionBufferPerspective.itemSize=3;globeVertexPositionBufferPerspective.numItems=d.length/globeVertexPositionBufferPerspective.itemSize;globeVertexIndexBufferPerspective=
gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,globeVertexIndexBufferPerspective);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),gl.STATIC_DRAW);globeVertexIndexBufferPerspective.numItems=g.length}
function drawGlobePerspective(){gl.useProgram(shaderProgramGlobePerspective);gl.activeTexture(gl.TEXTURE0+TEXTURE_DAY);gl.bindTexture(gl.TEXTURE_2D,globeTextureDay);gl.activeTexture(gl.TEXTURE0+TEXTURE_NIGHT);gl.bindTexture(gl.TEXTURE_2D,globeTextureNight);gl.activeTexture(gl.TEXTURE0+TEXTURE_MASK);gl.bindTexture(gl.TEXTURE_2D,globeTextureMask);gl.activeTexture(gl.TEXTURE0+TEXTURE_BOUNDARIES);gl.bindTexture(gl.TEXTURE_2D,globeTextureBoundaries);footprintTextureDefined&&(gl.activeTexture(gl.TEXTURE0+
TEXTURE_FOOTPRINT),gl.bindTexture(gl.TEXTURE_2D,globeTextureFootprints));gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexPositionBufferPerspective);gl.vertexAttribPointer(shaderProgramGlobePerspective.vertexPositionAttribute,globeVertexPositionBufferPerspective.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramGlobePerspective.vertexPositionAttribute);gl.bindBuffer(gl.ARRAY_BUFFER,globeVertexTextureCoordBufferPerspective);gl.vertexAttribPointer(shaderProgramGlobePerspective.textureCoordAttribute,
globeVertexTextureCoordBufferPerspective.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramGlobePerspective.textureCoordAttribute);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,globeVertexIndexBufferPerspective);gl.uniformMatrix4fv(shaderProgramGlobePerspective.perspectiveMatrixUniform,!1,perspectiveMatrix);gl.uniformMatrix4fv(shaderProgramGlobePerspective.modelViewMatrixUniform,!1,modelViewMatrix);gl.drawElements(gl.TRIANGLES,globeVertexIndexBufferPerspective.numItems,gl.UNSIGNED_SHORT,0);
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null);gl.bindTexture(gl.TEXTURE_2D,null)}
function initSkyBuffersPerspective(){var a=[],d=[],g=[],m,e;for(e=0;60>=e;e++){var b=e*Math.PI/60;var c=1-e/60;for(m=0;60>=m;m++){var f=.5+m/60;var h=toCartesian(2*m*Math.PI/60,b-Math.PI/2);a.push(f,c);d.push(-199*h[0],-199*h[1],199*h[2])}}for(e=0;60>e;e++)for(m=0;60>m;m++)h=61*e+m,b=h+60+1,g.push(h,b,h+1,b,b+1,h+1);skyVertexTextureCoordBufferPerspective=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,skyVertexTextureCoordBufferPerspective);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);
skyVertexTextureCoordBufferPerspective.itemSize=2;skyVertexTextureCoordBufferPerspective.numItems=a.length/skyVertexTextureCoordBufferPerspective.itemSize;skyVertexPositionBufferPerspective=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,skyVertexPositionBufferPerspective);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(d),gl.STATIC_DRAW);skyVertexPositionBufferPerspective.itemSize=3;skyVertexPositionBufferPerspective.numItems=d.length/skyVertexPositionBufferPerspective.itemSize;skyVertexIndexBufferPerspective=
gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,skyVertexIndexBufferPerspective);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),gl.STATIC_DRAW);skyVertexIndexBufferPerspective.numItems=g.length}
function drawSkyPerspective(){gl.useProgram(shaderProgramSkyPerspective);gl.activeTexture(gl.TEXTURE0+TEXTURE_SKY);gl.bindTexture(gl.TEXTURE_2D,skyTexture);gl.bindBuffer(gl.ARRAY_BUFFER,skyVertexPositionBufferPerspective);gl.vertexAttribPointer(shaderProgramSkyPerspective.vertexPositionAttribute,skyVertexPositionBufferPerspective.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramSkyPerspective.vertexPositionAttribute);gl.bindBuffer(gl.ARRAY_BUFFER,skyVertexTextureCoordBufferPerspective);
gl.vertexAttribPointer(shaderProgramSkyPerspective.textureCoordAttribute,skyVertexTextureCoordBufferPerspective.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramSkyPerspective.textureCoordAttribute);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,skyVertexIndexBufferPerspective);gl.uniformMatrix4fv(shaderProgramSkyPerspective.perspectiveMatrixUniform,!1,perspectiveMatrix);gl.uniformMatrix4fv(shaderProgramSkyPerspective.modelViewMatrixUniform,!1,skyModelViewMatrix);gl.drawElements(gl.TRIANGLES,
skyVertexIndexBufferPerspective.numItems,gl.UNSIGNED_SHORT,0);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null);gl.bindTexture(gl.TEXTURE_2D,null)}
function drawLabelPerspective(a,d,g,m,e,b,c,f,h){var l=vec4.create(),p=!bDisplayEarth;vec4.transformMat4(l,vec4.fromValues(e[0],e[1],e[2],1),modelViewMatrix);p||(e=vec3.length(l),Math.acos(vec3.dot(l,vec3.fromValues(0,0,-1))/e)>angleGrazingEarthRadians?p=!0:e*e<distanceScale*distanceScale-1&&(p=!0));p&&(a&&(h*=Math.pow(1.2,distanceScale-vec3.dot(l,vec3.fromValues(0,0,-1)))),vec4.transformMat4(l,l,perspectiveMatrix),0<l[3]&&(vec4.scale(l,l,1/l[3]),-1<l[0]&&1>l[0]&&-1<l[1]&&1>l[1]&&drawLabelXY(a,d,
50*(l[0]+1),100*(1-l[1])/2,b,g,m,c,f,h,l)))}function calculateLineWidthPerspective(){var a=mat4.create(),d=vec4.fromValues(0,0,-1,1);mat4.translate(a,a,[0,0,-distanceScale]);mat4.rotateY(a,a,5E-5);mat4.multiply(a,perspectiveMatrix,a);vec4.transformMat4(d,d,a);vec4.scale(d,d,1/d[3]);a=5E-5*pixelWidth/(-gl.drawingBufferWidth*d[0]/2*Math.PI*4);.05<a&&(a=0);gl.useProgram(shaderProgramGlobePerspective);gl.uniform1f(shaderProgramGlobePerspective.lineWidth,a)}
function calculateLineWidth(){var a=Math.max(.001,.25*pixelWidth/gl.drawingBufferWidth),d=Math.max(.001,.25*pixelWidth/gl.drawingBufferHeight),g=(a+d)/2;gl.useProgram(shaderProgramGlobeCylindrical);gl.uniform1f(shaderProgramGlobeCylindrical.lineWidth,g);gl.uniform1f(shaderProgramGlobeCylindrical.lineWidthS,a);gl.uniform1f(shaderProgramGlobeCylindrical.lineWidthT,d);gl.useProgram(shaderProgramGlobeElliptical);gl.uniform1f(shaderProgramGlobeElliptical.lineWidth,g);gl.uniform1f(shaderProgramGlobeElliptical.lineWidthS,
a);gl.uniform1f(shaderProgramGlobeElliptical.lineWidthT,d);gl.useProgram(shaderProgramGlobeSinusoidal);gl.uniform1f(shaderProgramGlobeSinusoidal.lineWidth,g);gl.uniform1f(shaderProgramGlobeSinusoidal.lineWidthS,a);gl.uniform1f(shaderProgramGlobeSinusoidal.lineWidthT,d);gl.useProgram(shaderProgramGlobeRobinson);gl.uniform1f(shaderProgramGlobeRobinson.lineWidth,g);gl.uniform1f(shaderProgramGlobeRobinson.lineWidthS,a);gl.uniform1f(shaderProgramGlobeRobinson.lineWidthT,d);calculateLineWidthPerspective()}
function updateReportedPositionPerspective(a,d){var g=mat4.create(),m=mat4.create(),e=!1,b=[],c=!0,f=0;var h=mat4.create();mat4.translate(h,h,[0,0,-distanceScale]);mat4.rotateY(h,h,Math.PI/2);var l=toCartesianECEF(0,0,0);l=vec4.fromValues(l[0],l[1],l[2],1);vec4.transformMat4(l,l,h);vec4.transformMat4(l,l,perspectiveMatrix);var p=l[2]/l[3];l=toCartesianECEF(0,0,EARTH_SEMI_MAJOR_AXIS_KM*(Math.sin(angleGrazingEarthRadians)-1));l=vec4.fromValues(l[0],l[1],l[2],1);vec4.transformMat4(l,l,h);vec4.transformMat4(l,
l,perspectiveMatrix);h=l[2]/l[3];p=(h-p)/3;mat4.invert(g,perspectiveMatrix);mat4.invert(m,modelViewMatrix);b.altitude=.01;a=2*a/gl.drawingBufferWidth-1;d=1-2*d/gl.drawingBufferHeight;for(l=h;5E-5<Math.abs(b.altitude);){h=vec4.fromValues(a,d,l,1);vec4.transformMat4(h,h,g);vec4.transformMat4(h,h,m);vec4.scale(h,h,1/h[3]);fromCartesianECEF(b,vec3.fromValues(h[0],h[1],h[2]));if(0===f&&0<b.altitude){c=!1;break}0<b.altitude?(l+=p,e||(p/=2,e=!0)):(l-=p,e&&(p/=2,e=!1));f++;if(100<f)break}c?(mouseLongitude=
180*b.longitude/Math.PI,mouseLatitude=180*b.latitude/Math.PI,document.getElementById("lonandlat").innerHTML=longitudeToString(mouseLongitude,!1,!0)+"&nbsp;"+latitudeToString(mouseLatitude,!1,!0)):(mouseLatitude=mouseLongitude=null,document.getElementById("lonandlat").innerHTML="&ndash;")};var STRIDE_RA_GRID=30,STRIDE_DEC_GRID=30,STEP_RA_GRID=2,STEP_DEC_GRID=2,raVertexBuffer,decVertexBuffer,azimuthVertexBuffer,altitudeVertexBuffer,radarBrightestMagnitude=0,radarLimitingMagnitude=6,radarDisplayStars=!0,radarDisplayAzElGrid=!0,radarDisplayRADecGrid=!1,radarShowCentralPosition=!1,bShowConstellationBoundaries=!1,bShowConstellationShapes=!1,bShowConstellationNames=!1,radarColorStars=[1,1,1],radarColorConstellationNames=[1,1,1],radarColorConstellationShapes=[1,1,1],radarColorConstellationBoundaries=
[1,1,1],radarColorAzElGrid=[1,1,1],radarColorRADecGrid=[1,1,1],radarColorCentralPosition=[1,1,1],canvasWidthOld=0,canvasHeightOld=0,constellationBoundariesBuffer,constellationShapesBuffer,constellationStarsBuffer;
function initRADecBuffers(){var a=[],d,g;for(d=0;360>d;d+=STRIDE_RA_GRID){var m=glMatrix.toRadian(d);var e=glMatrix.toRadian(-90);for(g=-90;g<90+STEP_DEC_GRID/2;g+=STEP_DEC_GRID){var b=glMatrix.toRadian(g);-90!==g&&a.push(m,b);a.push(m,b,m,e,m,b);e=b}a.push(m,b)}raVertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,raVertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);raVertexBuffer.itemSize=4;raVertexBuffer.numItems=a.length/raVertexBuffer.itemSize;a.length=0;
for(g=-60;60>=g;g+=STRIDE_DEC_GRID){b=glMatrix.toRadian(g);e=glMatrix.toRadian(0);for(d=0;d<360+STEP_RA_GRID/2;d+=STEP_RA_GRID)m=glMatrix.toRadian(d),0!==d&&a.push(m,b),a.push(m,b,e,b,m,b),e=m;a.push(m,b)}decVertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,decVertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);decVertexBuffer.itemSize=4;decVertexBuffer.numItems=a.length/decVertexBuffer.itemSize}
function initAzElBuffers(){var a=[],d;for(d=0;360>d;d+=2)a.push(Math.cos(glMatrix.toRadian(d)),Math.sin(glMatrix.toRadian(d)));altitudeVertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,altitudeVertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);altitudeVertexBuffer.itemSize=2;altitudeVertexBuffer.numItems=a.length/altitudeVertexBuffer.itemSize;a.length=0;a.push(0,-1,0,1,-1,0,1,0);a.push(-1,-1,1,1,-1,1,1,-1);for(d=0;360>d;d+=5)a.push(.5*Math.cos(glMatrix.toRadian(d)),
.5*Math.sin(glMatrix.toRadian(d))),a.push(.49*Math.cos(glMatrix.toRadian(d)),.49*Math.sin(glMatrix.toRadian(d)));azimuthVertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,azimuthVertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);azimuthVertexBuffer.itemSize=2;azimuthVertexBuffer.numItems=a.length/azimuthVertexBuffer.itemSize}
function drawAzElGrid(){if(radarDisplayAzElGrid){gl.useProgram(shaderProgramXY);gl.uniform4f(shaderProgramXY.color,radarColorAzElGrid[0],radarColorAzElGrid[1],radarColorAzElGrid[2],.75);gl.bindBuffer(gl.ARRAY_BUFFER,altitudeVertexBuffer);gl.vertexAttribPointer(shaderProgramXY.vertexPositionAttribute,altitudeVertexBuffer.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramXY.vertexPositionAttribute);for(var a=1;6>=a;a++)canvas.clientWidth>canvas.clientHeight?(gl.uniform1f(shaderProgramXY.scaleX,
a/3*canvas.clientHeight/canvas.clientWidth),gl.uniform1f(shaderProgramXY.scaleY,a/3)):(gl.uniform1f(shaderProgramXY.scaleX,a/3),gl.uniform1f(shaderProgramXY.scaleY,a/3*canvas.clientWidth/canvas.clientHeight)),gl.drawArrays(gl.LINE_LOOP,0,altitudeVertexBuffer.numItems);gl.bindBuffer(gl.ARRAY_BUFFER,azimuthVertexBuffer);gl.vertexAttribPointer(shaderProgramXY.vertexPositionAttribute,azimuthVertexBuffer.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramXY.vertexPositionAttribute);gl.drawArrays(gl.LINES,
0,azimuthVertexBuffer.numItems);gl.bindBuffer(gl.ARRAY_BUFFER,null)}}
function drawRADecGrid(){if(radarDisplayRADecGrid){var a;gl.useProgram(shaderProgramRADec);gl.uniform4f(shaderProgramRADec.color,radarColorRADecGrid[0],radarColorRADecGrid[1],radarColorRADecGrid[2],.5);var d=2*(180/STEP_DEC_GRID+1);var g=360/STRIDE_RA_GRID;gl.bindBuffer(gl.ARRAY_BUFFER,raVertexBuffer);gl.vertexAttribPointer(shaderProgramRADec.vertexPositionAttribute,raVertexBuffer.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramRADec.vertexPositionAttribute);for(a=0;a<g;a++)gl.drawArrays(gl.LINE_STRIP,
a*d,d);d=2*(360/STEP_RA_GRID+1);g=(90-STRIDE_DEC_GRID)/STRIDE_DEC_GRID*2+1;gl.bindBuffer(gl.ARRAY_BUFFER,decVertexBuffer);gl.vertexAttribPointer(shaderProgramRADec.vertexPositionAttribute,decVertexBuffer.itemSize,gl.FLOAT,!1,0,0);gl.enableVertexAttribArray(shaderProgramRADec.vertexPositionAttribute);for(a=0;a<g;a++)gl.drawArrays(gl.LINE_STRIP,a*d,d);gl.bindBuffer(gl.ARRAY_BUFFER,null)}}function initGlobeBuffersRadar(){initAzElBuffers();initRADecBuffers()}
function drawGlobeRadar(){var a=ThetaGRadians(jdNow);gl.useProgram(shaderProgramRADec);gl.uniform1f(shaderProgramRADec.thetaG,a);gl.useProgram(shaderProgramStars);gl.uniform1f(shaderProgramStars.thetaG,a);drawAzElGrid();drawRADecGrid();drawConstellationBoundaries();drawConstellationShapes();drawStars();updateConstellationLabelPositions(a)}
function updateCenterLabel(){var a=document.getElementById("radarCenter");if(a){var d=getColorContrast(radarColorCentralPosition);d="-1px -1px 5px "+d+" 1px -1px 5px "+d+" -1px 1px 5px "+d+" 1px 1px 5px "+d;Object.assign(a.style,{color:makeHTMLColor(radarColorCentralPosition),fontSize:fontSize.toString()+"px",fontStyle,fontFamily,fontWeight,textShadow:d})}}
function initializeRadarLabels(){var a=document.getElementById("constellationLabels"),d=document.getElementById("radarLabels");if(d)for(var g=d.children.length,m=0;m<g;m++){var e=d.children[m];if(e){var b=Number(e.getAttribute("alt")),c=Number(e.getAttribute("az")),f=Math.cos(glMatrix.toRadian(c-90))*Math.abs(90-b)/90;b=Math.sin(glMatrix.toRadian(c-90))*Math.abs(90-b)/90;Object.assign(e.style,{left:(50*(1+f/2)).toString()+"%",top:(50*(1+b/2)).toString()+"%",transform:"translate("+e.getAttribute("xOffset")+
"%, "+e.getAttribute("yOffset")+"%"})}}if(a){g=a.children.length;for(m=0;m<g;m++)if(e=a.children[m])e.innerHTML=e.getAttribute("abbr");a.addEventListener("mouseover",enterConstellationName);a.addEventListener("mouseout",leaveConstellationName)}}
function updateConstellationLabelPositions(a){var d=document.getElementById("constellationLabels");if(d)if(bShowConstellationNames){var g=canvas.clientHeight,m=canvas.clientWidth,e=Math.sin(observer.tracking.latitude),b=Math.cos(observer.tracking.latitude);var c=m>g?g/2:m/2;for(var f=0;f<d.children.length;f++){var h=d.children[f];if(h){var l=Number(h.getAttribute("ra")),p=Number(h.getAttribute("dec")),k=Math.cos(a+observer.tracking.longitude-l),t=Math.sin(p),u=Math.cos(p);p=-k*u*e+t*b;var v=-Math.sin(a+
observer.tracking.longitude-l)*u;l=Math.atan2(v,p);k=Math.atan2(k*u*b+t*e,Math.sqrt(p*p+v*v));0<k?(p=(Math.PI-2*k)/Math.PI*Math.cos(Math.PI/2-l),v=-((Math.PI-2*k)/Math.PI)*Math.sin(Math.PI/2-l),p*=c,v*=c,p+=m/2,v+=g/2,Object.assign(h.style,{left:Math.round(p).toString()+"px",top:Math.round(v).toString()+"px",visibility:"visible"})):h.style.visibility="hidden"}d.style.display="inline"}}else d.style.display="none"}
function drawConstellationBoundaries(){bShowConstellationBoundaries&&constellationBoundariesBuffer&&(gl.useProgram(shaderProgramRADec),gl.uniform4f(shaderProgramRADec.color,radarColorConstellationBoundaries[0],radarColorConstellationBoundaries[1],radarColorConstellationBoundaries[2],1),gl.bindBuffer(gl.ARRAY_BUFFER,constellationBoundariesBuffer),gl.vertexAttribPointer(shaderProgramRADec.vertexPositionAttribute,constellationBoundariesBuffer.itemSize,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(shaderProgramRADec.vertexPositionAttribute),
gl.drawArrays(gl.LINES,0,constellationBoundariesBuffer.numItems),gl.bindBuffer(gl.ARRAY_BUFFER,null),gl.useProgram(null))}
function drawConstellationShapes(){bShowConstellationShapes&&constellationShapesBuffer&&(gl.useProgram(shaderProgramRADec),gl.uniform4f(shaderProgramRADec.color,radarColorConstellationShapes[0],radarColorConstellationShapes[1],radarColorConstellationShapes[2],.5),gl.bindBuffer(gl.ARRAY_BUFFER,constellationShapesBuffer),gl.vertexAttribPointer(shaderProgramRADec.vertexPositionAttribute,constellationShapesBuffer.itemSize,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(shaderProgramRADec.vertexPositionAttribute),
gl.drawArrays(gl.LINES,0,constellationShapesBuffer.numItems),gl.bindBuffer(gl.ARRAY_BUFFER,null),gl.useProgram(null))}
function drawStars(){radarDisplayStars&&constellationStarsBuffer&&(gl.useProgram(shaderProgramStars),gl.bindBuffer(gl.ARRAY_BUFFER,constellationStarsBuffer),gl.vertexAttribPointer(shaderProgramStars.vertexPositionAttribute,constellationStarsBuffer.itemSize,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(shaderProgramStars.vertexPositionAttribute),gl.drawArrays(gl.POINTS,0,constellationStarsBuffer.numItems),gl.bindBuffer(gl.ARRAY_BUFFER,null))}
function initConstellationBuffers(){constellationBoundariesBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,constellationBoundariesBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(jsonStellarData.constellationBoundaries),gl.STATIC_DRAW);constellationBoundariesBuffer.itemSize=4;constellationBoundariesBuffer.numItems=jsonStellarData.constellationBoundaries.length/constellationBoundariesBuffer.itemSize;constellationShapesBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,constellationShapesBuffer);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(jsonStellarData.constellationShapes),gl.STATIC_DRAW);constellationShapesBuffer.itemSize=4;constellationShapesBuffer.numItems=jsonStellarData.constellationShapes.length/constellationShapesBuffer.itemSize;constellationStarsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,constellationStarsBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(jsonStellarData.brightStars),gl.STATIC_DRAW);constellationStarsBuffer.itemSize=3;constellationStarsBuffer.numItems=
jsonStellarData.brightStars.length/constellationStarsBuffer.itemSize}function drawLabelRadar(a,d,g,m,e,b,c,f,h){var l=1;e=1;var p=azElFromPos(m,observer);canvas.clientWidth>canvas.clientHeight?l=canvas.clientHeight/canvas.clientWidth:e=canvas.clientWidth/canvas.clientHeight;m=l*(1-2*p.el/Math.PI)*Math.sin(p.az);e=e*(1-2*p.el/Math.PI)*Math.cos(p.az);l=vec4.fromValues(m,e,0,0);drawLabelXY(!0,a,50*(m+1),100*(1-e)/2,b,d,g,c,f,h,l)}
function initShaderTrackRadar(a,d,g){d=getShader(gl,d);gl.attachShader(a,d);gl.attachShader(a,g);gl.linkProgram(a);gl.getProgramParameter(a,gl.LINK_STATUS)&&(a.vertexPositionAttribute=gl.getAttribLocation(a,"aVertexPosition"),a.vertexPositionPrevNextAttribute=gl.getAttribLocation(a,"aVertexPositionPrevNext"),a.observerLongLatAlt=gl.getUniformLocation(a,"observerLongLatAlt"),a.color=gl.getUniformLocation(a,"uColor"),a.scaleX=gl.getUniformLocation(a,"uScaleX"),a.scaleY=gl.getUniformLocation(a,"uScaleY"))}
function enterConstellationName(a){a.target.style.fontSize="150%";a.target.innerHTML=a.target.getAttribute("fullName")}function leaveConstellationName(a){a.target.style.fontSize="100%";a.target.innerHTML=a.target.getAttribute("abbr")}
function updateReportedPositionRadar(a,d){mouseLatitude=mouseLongitude=null;a-=canvas.clientWidth/2;d-=canvas.clientHeight/2;canvas.clientWidth>canvas.clientHeight?(a/=canvas.clientHeight/2,d/=canvas.clientHeight/2):(a/=canvas.clientWidth/2,d/=canvas.clientWidth/2);var g=90-90*Math.sqrt(a*a+d*d);-90<=g?(a=90+180*Math.atan2(d,a)/Math.PI,0>a&&(a+=360),document.getElementById("lonandlat").innerHTML="Az: "+azimuthToString(a,!0)+"&deg;&nbsp;El: "+elevationToString(g,!0)+"&deg;"):document.getElementById("lonandlat").innerHTML=
"&ndash;"};function handleClick(a){if("click"===a.type){var d=a.target||a.srcElement;d&&((a=d.getAttribute("id"))||(a=d.parentElement.getAttribute("id")),a&&(d=a.indexOf("deleteFromTable"),-1!==d?(d=a.indexOf("_"),a=a.slice(d+1),removeDisplayedSatelliteAndUncheck(a)):(d=a.indexOf("_"),-1!==d&&(a=a.slice(d+1),d=a.indexOf("_"),-1!==d&&(a=a.slice(0,d))),0<parseInt(a,10)&&(a=jsonSatellites["S"+a])&&a.hasOwnProperty(JSON_OMM_VALUES)&&a[JSON_OMM_VALUES][OMM_OBJECT_ID]&&window.open(WEBSITE_NSSDC+a[JSON_OMM_VALUES][OMM_OBJECT_ID]))))}}
function sortViewTextTableHeader(a){var d=document.getElementById("tableHeadTextual");sortTableHeader(a,d,sortTextualColumn);2<sortTextualColumn.length&&sortTextualColumn.pop();sortFilledTable("tableBodyTextualBody",sortTextualColumn)}
function addRowHeaders(a,d){var g=document.createElement("tr");if(g){for(var m=d.length,e=0;e<m;e++){var b;if(b=document.createElement("th"))0<d[e].title.trim().length&&(b.innerHTML=d[e].title,d[e].sortable&&(b.className="sortable"),b.addEventListener("click",sortViewTextTableHeader)),g.appendChild(b)}a.appendChild(g)}}
function addHeaderToHeadTableProjection(){var a=document.getElementById("tableHeadTextual"),d=document.getElementById("tableBodyTextual");if(a){var g=document.createElement("thead");g&&(addRowHeaders(g,headersProjection),a.appendChild(g))}d&&(a=document.createElement("tbody"))&&(a.setAttribute("id","tableBodyTextualBody"),d.appendChild(a),d.addEventListener("click",handleClick,!0))}
function createTableEntry(a){var d=document.createElement("tr");if(d){var g=headersProjection.length;Object.assign(d,{id:a.element+"_row"});for(var m=0;m<g;m++){var e=document.createElement("td");"Name"===headersProjection[m].id?Object.assign(e,{id:a.element+"_"+headersProjection[m].id,innerHTML:'<div class="objectReportInteractCaution" id="deleteFromTable_'+a.id+'">&cross;</div>&nbsp;'+a[JSON_NAMES][0]}):"Id"===headersProjection[m].id?Object.assign(e,{id:a.element+"_"+headersProjection[m].id,innerHTML:a.id}):
Object.assign(e,{id:a.element+"_"+headersProjection[m].id,innerHTML:"&mdash;"});d.appendChild(e)}document.getElementById("tableBodyTextualBody").appendChild(d);a.tracking.rowLabel=d}}function drawTextual(){}
function drawTable(a){var d;updateSatelliteExtra(a);if((d=document.getElementById(a.element+"_row"))&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length)){d=headersProjection.length;for(var g=0;g<d;g++){var m;if(m=document.getElementById(a.element+"_"+headersProjection[g].id))"Longitude"===headersProjection[g].id?m.innerHTML=longitudeToString(180*a.tracking.longitude/Math.PI,!1,!0):"Latitude"===headersProjection[g].id?m.innerHTML=latitudeToString(180*a.tracking.latitude/Math.PI,!1,!0):"Altitude"===
headersProjection[g].id?m.innerHTML=(a.tracking.altitude*EARTH_SEMI_MAJOR_AXIS_KM).toFixed(0):"Azimuth"===headersProjection[g].id?m.innerHTML=a.tracking.azel.az.toFixed(2):"Elevation"===headersProjection[g].id?m.innerHTML=a.tracking.azel.el.toFixed(2):"Range"===headersProjection[g].id?m.innerHTML=a.tracking.range.range.toFixed(0):"RangeRate"===headersProjection[g].id?m.innerHTML=a.tracking.range.rangeRate.toFixed(2):"Eclipse"===headersProjection[g].id&&(m.innerHTML=a.tracking.eclipse)}}}
function updateReportedPositionTextual(a,d){document.getElementById("lonandlat").innerHTML="&ndash;"};function setResults(a){var d=document.getElementById("results");if(d){var g=d.getBoundingClientRect().height;d.innerHTML="Results: "+a;d.getBoundingClientRect().height!==g&&resizedInternal()}}
function setSelectedSatellitesAllNone(){var a=document.getElementById("selectAllNone");if(a){var d=document.getElementById("tableBodySatellitesBody");if(d&&(d=d.childNodes,d))for(var g=d.length,m=0;m<g;m++)if(d[m].firstChild&&d[m].firstChild.firstChild)if(0===m){var e=d[m].firstChild.firstChild.checked;a.checked=e;a.indeterminate=!1}else if(e!==d[m].firstChild.firstChild.checked){a.indeterminate=!0;break}}}
function fillTable(a){var d=[],g=document.getElementById("divSatellitesHead").getBoundingClientRect().height,m=a.length,e;for(e=0;e<m;e++){var b=a[e],c=jsonSatellites["S"+b];if(c&&c[JSON_OMM_VALUES]){var f=document.createElement("tr");f.setAttribute("tabindex",e);f.setAttribute("id",b);if(c[JSON_OMM_VALUES][OMM_DECAY_DATE]){f.setAttribute("class","decayed");var h="<td><input type='checkbox' class='tableUnselectable' style='visibility: hidden'></td>"}else h=0<=satellitesToDisplay.indexOf(b)?"<td class='selected'><input type='checkbox' class='tableSelect' checked></td>":
"<td class='unselected'><input type='checkbox' class='tableSelect'></td>";f.innerHTML=h.concat("<td>"+c[JSON_NAMES][0]+"</td><td>"+b+"</td><td>"+c[JSON_OMM_VALUES][OMM_OBJECT_ID]+"</td><td>"+c[JSON_OMM_VALUES][OMM_LAUNCH_DATE]+"</td><td>"+c[JSON_OMM_VALUES][OMM_SITE]+"</td><td>"+c[JSON_OMM_VALUES][OMM_COUNTRY_CODE]+"</td><td>"+c[JSON_OMM_VALUES][OMM_DECAY_DATE]+"</td>");d.push(f)}}sortTable("tableBodySatellitesBody",d,sortSatelliteColumn);setSelectedSatellitesAllNone();setColumnWidths("tableHeadSatellites",
"tableBodySatellites");g!==document.getElementById("divSatellitesHead").getBoundingClientRect().height&&resizedInternal()}function displaySatelliteCheck(a,d){(a=a.getAttribute("id"))&&(d?addDisplayedSatellite(a):removeDisplayedSatellite(a))}
function selectAllNone(a){var d=document.getElementById("selectAllNone");if(d&&(a=document.getElementById("tableBodySatellitesBody"))&&(a=a.childNodes)){var g=d.checked,m=a.length;d.indeterminate=!1;for(d=0;d<m;d++){var e=a[d],b=e.firstChild;b&&(b.firstChild&&"tableSelect"==b.firstChild.className?(b.firstChild.checked=g,b.className=g?"selected":"unselected",displaySatelliteCheck(e,g)):b.className="unselected")}setSelectedSatellitesAllNone();g&&updateScene(!1)}}
function openNSSDCPage(a){a&&a[JSON_OMM_VALUES]&&a[JSON_OMM_VALUES][OMM_OBJECT_ID]&&window.open(WEBSITE_NSSDC+a[JSON_OMM_VALUES][OMM_OBJECT_ID])}
function interactedWithSatelliteEntry(a){var d=a.target||a.srcElement,g=a.which||a.keyCode;if(d&&("click"===a.type||"keypress"===a.type&&g===KEY_INFO))if((g=a.target.getAttribute("id"))||(g=a.target.parentElement.getAttribute("id")),d.className&&"selected"==d.className)if(-1===satellitesToDisplay.indexOf(g))openNSSDCPage(jsonSatellites["S"+g]);else{if(a=jsonSatellites["S"+g])objectReport=a,updateObjectReport()}else g?openNSSDCPage(jsonSatellites["S"+g]):selectSatelliteByRow(d)}
function selectSatelliteByRow(a){var d=!0;if("TR"===a.parentNode.nodeName)var g=a.parentNode;else"TR"===a.parentNode.parentNode.nodeName&&(g=a.parentNode.parentNode,d=!1);if(g){var m;if(m=g.firstChild)if(a=m.firstChild)d&&(a.checked=!a.checked),m.className=a.checked?"selected":"unselected",displaySatelliteCheck(g,a.checked),setSelectedSatellitesAllNone(),updateScene(!1)}}
function sortSatelliteTableHeader(a){if(a.target.firstChild){var d=document.getElementById("tableHeadSatellites");sortTableHeader(a,d,sortSatelliteColumn);4<sortSatelliteColumn.length&&(sortSatelliteColumn.pop(),sortSatelliteColumn.pop(),sortSatelliteColumn.push(COLUMNS.NORAD));sortFilledTable("tableBodySatellitesBody",sortSatelliteColumn)}}
function addHeaderToHeadTableSatellites(){var a=document.getElementById("tableHeadSatellites");if(a){var d=document.createElement("thead");if(d){var g=document.createElement("tr");if(g){var m;d.setAttribute("id","tableHeadSatellitesHeader");for(m=0;m<headersSatellite.length;m++){var e=document.createElement("th");0<headersSatellite[m].html.trim().length&&(e.innerHTML=headersSatellite[m].html,e.addEventListener("click",sortSatelliteTableHeader));g.appendChild(e)}d.appendChild(g)}a.appendChild(d)}}if(a=
document.getElementById("tableBodySatellites"))if(d=document.createElement("tbody"))d.setAttribute("id","tableBodySatellitesBody"),a.appendChild(d)}function addSatellitesToStore(a,d,g,m){if(d<jsonCategories.length&&g<jsonCategories[d].groups.length){d=jsonCategories[d].groups[g].satellites;g=d.length;var e;for(e=0;e<g;e++){var b=d[e];(m||0>a.indexOf(b))&&a.push(b)}}}function loadSatelliteDisplayed(a){fillTable(satellitesToDisplay);setResults("Displayed orbiting satellites")}
function loadSatelliteAll(a){setTimeout(function(){for(var d=jsonCategories.length,g=[],m=0;m<d;m++)for(var e=jsonCategories[m].groups.length,b=0;b<e;b++)addSatellitesToStore(g,m,b,!1);fillTable(g);setResults(a.target.innerHTML+" orbiting satellites")},0)}
function loadSatelliteCategory(a){if(a=a.target||a.srcElement){var d=a.getAttribute("category");d&&d<jsonCategories.length&&setTimeout(function(){for(var g=jsonCategories[d].groups.length,m=[],e=0;e<g;e++)addSatellitesToStore(m,d,e,!1);fillTable(m);setResults(jsonCategories[d].category)},0)}}
function loadSatelliteGroup(a){var d=a.target||a.srcElement;if(d){a=d.getAttribute("category");d=d.getAttribute("group");var g=[];addSatellitesToStore(g,a,d,!1);fillTable(g);setResults(jsonCategories[a].category+" - "+jsonCategories[a].groups[d].group)}}
function fullScreenToggled(a){document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen?document.getElementById("buttonFullscreen").style.backgroundImage="url(Buttons/ExitFullscreen.png)":document.getElementById("buttonFullscreen").style.backgroundImage="url(Buttons/Fullscreen.png)"}
function fillSatelliteCategories(){var a=document.getElementById("displayedSatellites");if(a){0<a.childNodes.length&&(a.innerHTML="");var d=document.createElement("ul"),g=document.createElement("li");d.setAttribute("class","categories");g.appendChild(document.createTextNode("Displayed"));g.setAttribute("class","all");g.addEventListener("click",loadSatelliteDisplayed);d.appendChild(g);a.appendChild(d)}if(a=document.getElementById("categorySatellites")){0<a.childNodes.length&&(a.innerHTML="");d=document.createElement("ul");
g=document.createElement("li");var m=document.createElement("li"),e=document.createElement("li"),b=jsonCategories.length;d.setAttribute("class","categories");e.appendChild(document.createTextNode("All"));e.setAttribute("class","all");e.addEventListener("click",loadSatelliteAll);d.appendChild(g);d.appendChild(m);d.appendChild(e);for(g=0;g<b;g++){var c=jsonCategories[g];m=c.groups;var f=document.createElement("li");e=document.createElement("ul");var h=m.length;e.setAttribute("class","groups");f.appendChild(document.createTextNode(c.category));
f.setAttribute("class","category");f.setAttribute("category",g);f.addEventListener("click",loadSatelliteCategory);d.appendChild(f);for(c=0;c<h;c++)f=document.createElement("li"),f.appendChild(document.createTextNode(m[c].group)),f.setAttribute("class","group"),f.setAttribute("category",g),f.setAttribute("group",c),f.addEventListener("click",loadSatelliteGroup),e.appendChild(f);d.appendChild(e)}a.appendChild(d)}}
function searchForSatellitesSubroutine(a,d,g,m,e,b,c){for(h in a){var f=a[h];var h=h.slice(1);if(!(!f.hasOwnProperty(JSON_OMM_VALUES)||e&&(!f[JSON_OMM_VALUES].hasOwnProperty(OMM_DECAY_DATE)||""!==f[JSON_OMM_VALUES][OMM_DECAY_DATE])||b&&f[JSON_OMM_VALUES][OMM_OBJECT_TYPE]!==OMM_OBJECT_TYPE_PAYLOAD&&f[JSON_OMM_VALUES][OMM_OBJECT_TYPE]!==OMM_OBJECT_TYPE_PAYLOAD_ALT||c&&f[JSON_OMM_VALUES][OMM_OPERATIONAL_STATUS]!==OMM_OPERATIONAL_STATUS_OPERATIONAL&&f[JSON_OMM_VALUES][OMM_OPERATIONAL_STATUS]!==OMM_OPERATIONAL_STATUS_PARTIALLY_OPERATIONAL&&
f[JSON_OMM_VALUES][OMM_OPERATIONAL_STATUS]!==OMM_OPERATIONAL_STATUS_EXTENDED_MISSION))if(m===headersSatellite[COLUMNS.NORAD].html)d.test(h)&&g.push(h);else if(m===headersSatellite[COLUMNS.INTERNATIONAL_DESIGNATOR].html)f[JSON_OMM_VALUES][OMM_OBJECT_ID]&&d.test(f[JSON_OMM_VALUES][OMM_OBJECT_ID])&&g.push(h);else if(m===headersSatellite[COLUMNS.NAME].html&&f[JSON_NAMES])for(var l=f[JSON_NAMES].length,p=0;p<l;p++)if(d.test(f[JSON_NAMES][p])){g.push(h);break}}}
function searchForSatellitesRoutine(a,d,g,m,e,b){var c=[],f=new RegExp(a);setTimeout(function(){searchForSatellitesSubroutine(jsonSatellites,f,c,g,m,e,b);fillTable(c)},0);setResults("Searched for '"+d+"' by "+g)}
function searchForSatellites(a){if((a.which||a.keyCode)===KEY_ENTER){var d=document.getElementById("searchSatelliteBy").value,g=document.getElementById("searchOnOrbit").checked,m=document.getElementById("searchPayload").checked,e=document.getElementById("searchActive").checked;searchForSatellitesRoutine(a.target.value.toUpperCase(),a.target.value.toUpperCase(),d,g,m,e)}}
function scrollSatellitesBody(a){if("scroll"===a.type&&scrollLeft!==a.target.scrollLeft){var d=document.getElementById("divSatellitesHead");d&&(d.style.left=-a.target.scrollLeft+"px");scrollLeft=a.target.scrollLeft}}
function getSatelliteSettings(){var a={symbol:void 0};document.getElementById("satelliteLabel").indeterminate||(a.label=document.getElementById("satelliteLabel").checked);document.getElementById("colorSatellite").indeterminate||(a.color=document.getElementById("colorSatellite").value);document.getElementById("satelliteLabelBackground").indeterminate||(a.fillBackground=document.getElementById("satelliteLabelBackground").checked);document.getElementById("colorSatelliteLabelBackground").indeterminate||
(a.colorBackground=document.getElementById("colorSatelliteLabelBackground").value);document.getElementById("satelliteTrackForwardCount").indeterminate||(a.trackForward=document.getElementById("satelliteTrackForwardCount").value);document.getElementById("satelliteTrackBackwardCount").indeterminate||(a.trackBackward=document.getElementById("satelliteTrackBackwardCount").value);document.getElementById("satelliteTrackUnits").indeterminate||(a.trackUnits=document.getElementById("satelliteTrackUnits").value);
document.getElementById("satelliteTrackStyle").indeterminate||(a.trackStyle=document.getElementById("satelliteTrackStyle").value);document.getElementById("satelliteOutline").indeterminate||(a.footprintOutline=document.getElementById("satelliteOutline").checked);document.getElementById("satelliteShade").indeterminate||(a.footprintShade=document.getElementById("satelliteShade").checked);document.getElementById("satelliteOutlineAngles").indeterminate||(a.footprintAngles=document.getElementById("satelliteOutlineAngles").value);
document.getElementById("satelliteFootprintAlpha").indeterminate||(a.footprintAlpha=document.getElementById("satelliteFootprintAlpha").value);for(var d=0;d<symbols.length;d++){var g=document.getElementById(symbols[d]);if(g&&"transparent"!==g.style.backgroundColor){a.symbol=d;break}}return a}
function setSelectedSatelliteSettingsInstance(a,d){if(d)try{void 0!==a.color&&(d.setting.color=makeColor(a.color,1));void 0!==a.label&&(d.setting.label=a.label);if(void 0!==a.fillBackground||void 0!==a.colorBackground)void 0!==a.fillBackground&&(d.setting.fillBackground=a.fillBackground),void 0!==a.colorBackground&&(d.setting.colorBackground=d.setting.fillBackground?makeColor(a.colorBackground,1):makeColor(a.colorBackground,0));void 0!==a.symbol&&(d.setting.symbol=a.symbol);void 0!==a.footprintAlpha&&
(d.setting.footprintAlpha=a.footprintAlpha);if(void 0!==a.footprintShade||void 0!==a.footprintOutline||void 0!==a.footprintAngles){var g=!1;void 0!==a.footprintShade&&d.setting.footprintShade!==a.footprintShade&&(d.setting.footprintShade=a.footprintShade,g=!0);void 0!==a.footprintOutline&&d.setting.footprintOutline!==a.footprintOutline&&(d.setting.footprintOutline=a.footprintOutline,g=!0);void 0!==a.footprintAngles&&d.setting.footprintAngles!==a.footprintAngles&&(d.setting.footprintAngles=a.footprintAngles,
g=!0);g&&setSatelliteFootprintAngles(d)}if(void 0!==a.trackForward||void 0!==a.trackBackward||void 0!==a.trackUnits)g=!1,void 0!==a.trackUnits&&d.setting.trackUnits!=a.trackUnits&&(d.setting.trackUnits=a.trackUnits,g=!0),void 0!==a.trackForward&&d.setting.trackForward!=a.trackForward&&(d.setting.trackForward=a.trackForward,g=!0),void 0!==a.trackBackward&&d.setting.trackBackward!=a.trackBackward&&(d.setting.trackBackward=a.trackBackward,g=!0),g&&setTrackMinutes(d);void 0!==a.trackStyle&&(d.setting.trackStyle=
a.trackStyle)}catch(m){}}function setSelectedSatelliteSettings(){var a;if(a=document.getElementById("tableBodySatellitesBody")){var d,g,m,e=getSatelliteSettings();if(g=a.childNodes.length)for(m=0;m<g;m++)if((d=a.childNodes[m])&&d.firstChild&&d.firstChild.firstChild){var b;(b=d.firstChild.firstChild)&&b.checked&&(d=d.getAttribute("id"))&&setSelectedSatelliteSettingsInstance(e,jsonSatellites["S"+d])}}}
function changeSatelliteColor(){document.getElementById("colorSatellite").indeterminate=!1;document.getElementById("colorSatellite").style.borderColor="#ffffff";document.getElementById("colorSatellite").style.backgroundColor=document.getElementById("colorSatellite").value;document.getElementById("satelliteGroupColor").style.backgroundColor="transparent"}
function changeSatelliteLabel(){document.getElementById("satelliteLabel").indeterminate=!1;document.getElementById("satelliteGroupLabel").style.backgroundColor="transparent"}function changeSatelliteBackgroundFill(){document.getElementById("satelliteLabelBackground").indeterminate=!1;document.getElementById("satelliteGroupLabelBackground").style.backgroundColor="transparent"}
function changeSatelliteBackgroundColor(){document.getElementById("colorSatelliteLabelBackground").indeterminate=!1;document.getElementById("colorSatelliteLabelBackground").style.borderColor="#ffffff";document.getElementById("colorSatelliteLabelBackground").style.backgroundColor=document.getElementById("colorSatelliteLabelBackground").value;document.getElementById("satelliteGroupLabelBackgroundColor").style.backgroundColor="transparent"}
function changeSatelliteFootprintShade(){document.getElementById("satelliteShade").indeterminate=!1;document.getElementById("satelliteGroupShade").style.backgroundColor="transparent"}
function changeSatelliteFootprintAlpha(){var a=document.getElementById("satelliteFootprintAlpha").value;document.getElementById("satelliteFootprintAlphaValue").value=parseFloat(a).toFixed(2);document.getElementById("satelliteFootprintAlpha").indeterminate=!1;document.getElementById("satelliteFootprintAlphaValue").indeterminate=!1;document.getElementById("satelliteGroupAlpha").style.backgroundColor="transparent"}
function changeSatelliteFootprintOutline(){document.getElementById("satelliteOutline").indeterminate=!1;document.getElementById("satelliteGroupOutline").style.backgroundColor="transparent"}function changeSatelliteFootprintAngles(){document.getElementById("satelliteOutlineAngles").indeterminate=!1;document.getElementById("satelliteGroupOutlineAngles").style.backgroundColor="transparent"}
function changeSatelliteTrackForwardCount(){document.getElementById("satelliteTrackForwardCount").indeterminate=!1;document.getElementById("satelliteGroupTrackForward").style.backgroundColor="transparent"}function changeSatelliteTrackBackwardCount(){document.getElementById("satelliteTrackBackwardCount").indeterminate=!1;document.getElementById("satelliteGroupTrackBackward").style.backgroundColor="transparent"}
function changeSatelliteTrackUnits(){document.getElementById("satelliteTrackUnits").indeterminate=!1;document.getElementById("satelliteGroupTrackUnits").style.backgroundColor="transparent"}function changeSatelliteTrackStyle(){document.getElementById("satelliteTrackStyle").indeterminate=!1;document.getElementById("satelliteGroupTrackStyle").style.backgroundColor="transparent"}
function fillSatelliteSettings(a){void 0!==a.color?(document.getElementById("colorSatellite").value=makeHTMLColor(a.color),changeSatelliteColor()):(document.getElementById("colorSatellite").value="#000000",document.getElementById("colorSatellite").style.borderColor="#333333",document.getElementById("colorSatellite").style.backgroundColor="#333333",document.getElementById("colorSatellite").indeterminate=!0,document.getElementById("satelliteGroupColor").style.backgroundColor="#000000");void 0!==a.label?
(document.getElementById("satelliteLabel").checked=a.label,changeSatelliteLabel()):(document.getElementById("satelliteLabel").checked=satelliteDefaultSettings.label,document.getElementById("satelliteLabel").indeterminate=!0,document.getElementById("satelliteGroupLabel").style.backgroundColor="#000000");void 0!==a.fillBackground?(document.getElementById("satelliteLabelBackground").checked=a.fillBackground,changeSatelliteBackgroundFill()):(document.getElementById("satelliteLabelBackground").checked=
satelliteDefaultSettings.fillBackground,document.getElementById("satelliteLabelBackground").indeterminate=!0,document.getElementById("satelliteGroupLabelBackground").style.backgroundColor="#000000");void 0!==a.colorBackground?(document.getElementById("colorSatelliteLabelBackground").value=makeHTMLColor(a.colorBackground),document.getElementById("colorSatelliteLabelBackground").style.backgroundColor=makeHTMLColor(a.colorBackground),changeSatelliteBackgroundColor()):(document.getElementById("colorSatelliteLabelBackground").value=
"#000000",document.getElementById("colorSatelliteLabelBackground").style.borderColor="#333333",document.getElementById("colorSatelliteLabelBackground").style.backgroundColor="#333333",document.getElementById("colorSatelliteLabelBackground").indeterminate=!0,document.getElementById("satelliteGroupLabelBackgroundColor").style.backgroundColor="#000000");setSatelliteSymbolIndex(a.symbol);void 0!==a.footprintShade?(document.getElementById("satelliteShade").checked=a.footprintShade,changeSatelliteFootprintShade()):
(document.getElementById("satelliteShade").checked=satelliteDefaultSettings.footprintShade,document.getElementById("satelliteShade").indeterminate=!0,document.getElementById("satelliteGroupShade").style.backgroundColor="#000000");void 0!==a.footprintAlpha?(document.getElementById("satelliteFootprintAlpha").value=a.footprintAlpha,changeSatelliteFootprintAlpha()):(document.getElementById("satelliteFootprintAlpha").style.color="#000000",document.getElementById("satelliteFootprintAlpha").value=satelliteDefaultSettings.footprintAlpha,
document.getElementById("satelliteFootprintAlpha").indeterminate=!0,document.getElementById("satelliteFootprintAlphaValue").value=parseFloat(satelliteDefaultSettings.footprintAlpha).toFixed(2),document.getElementById("satelliteFootprintAlphaValue").indeterminate=!0,document.getElementById("satelliteGroupAlpha").style.backgroundColor="#000000");void 0!==a.footprintOutline?(document.getElementById("satelliteOutline").checked=a.footprintOutline,changeSatelliteFootprintOutline()):(document.getElementById("satelliteOutline").checked=
satelliteDefaultSettings.footprintOutline,document.getElementById("satelliteOutline").indeterminate=!0,document.getElementById("satelliteGroupOutline").style.backgroundColor="#000000");void 0!==a.footprintAngles?(document.getElementById("satelliteOutlineAngles").value=a.footprintAngles,changeSatelliteFootprintAngles()):(document.getElementById("satelliteOutlineAngles").value="",document.getElementById("satelliteOutlineAngles").indeterminate=!0,document.getElementById("satelliteGroupOutlineAngles").style.backgroundColor=
"#000000");void 0!==a.trackForward?(document.getElementById("satelliteTrackForwardCount").value=a.trackForward,changeSatelliteTrackForwardCount()):(document.getElementById("satelliteTrackForwardCount").value="",document.getElementById("satelliteTrackForwardCount").indeterminate=!0,document.getElementById("satelliteGroupTrackForward").style.backgroundColor="#000000");void 0!==a.trackBackward?(document.getElementById("satelliteTrackBackwardCount").value=a.trackBackward,changeSatelliteTrackBackwardCount()):
(document.getElementById("satelliteTrackBackwardCount").value="",document.getElementById("satelliteTrackBackwardCount").indeterminate=!0,document.getElementById("satelliteGroupTrackBackward").style.backgroundColor="#000000");void 0!==a.trackUnits?(document.getElementById("satelliteTrackUnits").value=a.trackUnits,changeSatelliteTrackUnits()):(document.getElementById("satelliteTrackUnits").value="",document.getElementById("satelliteTrackUnits").indeterminate=!0,document.getElementById("satelliteGroupTrackUnits").style.backgroundColor=
"#000000");void 0!==a.trackStyle?(document.getElementById("satelliteTrackStyle").value=a.trackStyle,changeSatelliteTrackStyle()):(document.getElementById("satelliteTrackStyle").value="",document.getElementById("satelliteTrackStyle").indeterminate=!0,document.getElementById("satelliteGroupTrackStyle").style.backgroundColor="#000000")}
function fillSelectedSatelliteSettings(){var a;if(a=document.getElementById("tableBodySatellitesBody")){var d;if(d=a.childNodes.length){var g=!0;var m=Object.assign({},satelliteDefaultSettings);for(var e=0;e<d;e++){var b=a.childNodes[e];if(b&&b.firstChild&&b.firstChild.firstChild){var c;if((c=b.firstChild.firstChild)&&c.checked&&(b=b.getAttribute("id"))&&(b=jsonSatellites["S"+b]))try{Object.assign(m,{color:checkArrayValue(m.color,b.setting.color,g),label:checkValue(m.label,b.setting.label,g),fillBackground:checkValue(m.fillBackground,
b.setting.fillBackground,g),colorBackground:checkArrayValue(m.colorBackground,b.setting.colorBackground,g),symbol:checkValue(m.symbol,b.setting.symbol,g),footprintAlpha:checkValue(m.footprintAlpha,b.setting.footprintAlpha,g),footprintShade:checkValue(m.footprintShade,b.setting.footprintShade,g),footprintOutline:checkValue(m.footprintOutline,b.setting.footprintOutline,g),footprintAngles:checkValue(m.footprintAngles,b.setting.footprintAngles,g),trackForward:checkValue(m.trackForward,b.setting.trackForward,
g),trackBackward:checkValue(m.trackBackward,b.setting.trackBackward,g),trackUnits:checkValue(m.trackUnits,b.setting.trackUnits,g),trackStyle:checkValue(m.trackStyle,b.setting.trackStyle,g)}),g=!1}catch(f){}}}fillSatelliteSettings(m)}}}
function setTrackMinutes(a){"orbits"===a.setting.trackUnits&&0<a.tracking.satrec.no?(a.tracking.trackForwardMinutes=2*Math.PI/a.tracking.satrec.no*a.setting.trackForward,a.tracking.trackBackwardMinutes=2*Math.PI/a.tracking.satrec.no*a.setting.trackBackward):"hours"===a.setting.trackUnits?(a.tracking.trackForwardMinutes=60*a.setting.trackForward,a.tracking.trackBackwardMinutes=60*a.setting.trackBackward):"days"===a.setting.trackUnits?(a.tracking.trackForwardMinutes=1440*a.setting.trackForward,a.tracking.trackBackwardMinutes=
1440*a.setting.trackBackward):(a.tracking.trackForwardMinutes=a.setting.trackForward,a.tracking.trackBackwardMinutes=a.setting.trackBackward);a.tracking.recalculate=!0}
function setSatelliteSymbolElementId(a){var d=symbols.length;document.getElementById("satelliteGroupSymbol").style.backgroundColor="#000000";for(var g=0;g<d;g++){var m=document.getElementById(symbols[g]);m&&(a===symbols[g]?(m.style.backgroundColor="#007f00",document.getElementById("satelliteGroupSymbol").style.backgroundColor="transparent"):m.style.backgroundColor="transparent")}}function setSatelliteSymbolIndex(a){var d;a<symbols.length&&(d=symbols[a]);setSatelliteSymbolElementId(d)}
function setSatelliteFootprintAngles(a){var d=a.setting.footprintAngles.split(","),g=d.length,m;a.setting.footprintArray=[];for(m=0;m<g;m++){var e=glMatrix.toRadian(parseFloat(d[m]));!isNaN(e)&&0<=e&&e<Math.PI/2&&(0===a.setting.footprintArray.length&&(a.setting.footprintShade?a.setting.footprintArray.push(e):a.setting.footprintArray.push(Math.PI)),a.setting.footprintOutline?a.setting.footprintArray.push(e):a.setting.footprintArray.push(Math.PI))}0===a.setting.footprintArray.length&&(a.setting.footprintShade||
a.setting.footprintOutline)&&(a.setting.footprintShade?a.setting.footprintArray.push(0):a.setting.footprintArray.push(Math.PI),a.setting.footprintOutline?a.setting.footprintArray.push(0):a.setting.footprintArray.push(Math.PI))}function setSatelliteSymbolEvent(a){setSatelliteSymbolElementId(a.target.id)}function setObserverSymbolEvent(a){setObserverSymbolElementId(a.target.id)};function displayDefaultInfo(){}
function updateObserverReportedPositionLatLng(a,d){0<=d?document.getElementById("observerLonEast").checked=!0:document.getElementById("observerLonWest").checked=!0;document.getElementById("observerLonDegrees").value=Math.round(1E5*Math.abs(d))/1E5;document.getElementById("observerLonDMS").innerHTML="["+longitudeToString(d,!0,!1)+"]";0<=a?document.getElementById("observerLatNorth").checked=!0:document.getElementById("observerLatSouth").checked=!0;document.getElementById("observerLatDegrees").value=Math.round(1E5*
Math.abs(a))/1E5;document.getElementById("observerLatDMS").innerHTML="["+latitudeToString(a,!0,!1)+"]"}function updateObserverReportedPosition(){var a=180*observer.tracking.longitude/Math.PI,d=180*observer.tracking.latitude/Math.PI;updateObserverReportedPositionLatLng(d,a);document.getElementById("observerName").value=observer.title;document.getElementById("observerAltitude").value=Math.abs(observer.tracking.altitude);observerMarker&&observerMarker.setPosition({lat:d,lng:a})}
function applyObserverPositionSettings(){observer.title=document.getElementById("observerName").value;var a=Math.abs(document.getElementById("observerLonDegrees").value);document.getElementById("observerLonWest").checked&&(a*=-1);observer.tracking.longitude=glMatrix.toRadian(a);a=Math.abs(document.getElementById("observerLatDegrees").value);document.getElementById("observerLatSouth").checked&&(a*=-1);observer.tracking.latitude=glMatrix.toRadian(a);observer.tracking.altitude=document.getElementById("observerAltitude").value;
updateObserverPosition();redrawScene()}function resetObserverPositionSettings(){updateObserverReportedPosition()}function setDeviceLocation(a){observer.tracking.longitude=glMatrix.toRadian(a.coords.longitude);observer.tracking.latitude=glMatrix.toRadian(a.coords.latitude);updateObserverPosition();redrawScene()}function useDeviceLocationError(a){}
function useDeviceLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(setDeviceLocation,useDeviceLocationError,{enableHighAccuracy:!0,timeout:5E3,maximumAge:Infinity})}function updateMarkerPositionOnClick(a){observerMarker&&observerMarker.setPosition(a);updateObserverReportedPositionLatLng(a.lat(),a.lng())}
function setObserverSettings(){var a=symbols.length;observer.setting.label=document.getElementById("observerLabel").checked;observer.setting.color=makeColor(document.getElementById("colorObserver").value,1);observer.setting.fillBackground=document.getElementById("observerLabelBackground").checked;observer.setting.colorBackground=makeColor(document.getElementById("colorObserverLabelBackground").value,1);for(var d=0;d<a;d++){var g=document.getElementById(symbols[d]+"Observer");if(g&&"transparent"!==
g.style.backgroundColor){observer.setting.symbol=d;break}}}function setObserverSymbolElementId(a){document.getElementById("observerGroupSymbol").style.backgroundColor="#000000";for(var d=0;d<symbols.length;d++){var g=document.getElementById(symbols[d]+"Observer");g&&(a===symbols[d]+"Observer"?(g.style.backgroundColor="#007f00",document.getElementById("observerGroupSymbol").style.backgroundColor="transparent"):g.style.backgroundColor="transparent")}}
function setObserverSymbolIndex(a){var d;a<symbols.length&&(d=symbols[a]+"Observer");setObserverSymbolElementId(d)}
function fillObserverSettings(){document.getElementById("colorObserver").value=makeHTMLColor(observer.setting.color);document.getElementById("colorObserver").style.backgroundColor=makeHTMLColor(observer.setting.color);document.getElementById("observerLabel").checked=observer.setting.label;document.getElementById("observerLabelBackground").checked=observer.setting.fillBackground;document.getElementById("colorObserverLabelBackground").value=makeHTMLColor(observer.setting.colorBackground);document.getElementById("colorObserverLabelBackground").style.backgroundColor=
makeHTMLColor(observer.setting.colorBackground);setObserverSymbolIndex(observer.setting.symbol)};
